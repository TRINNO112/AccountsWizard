<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 2 — Basic Accounting Terms | AccountsWizard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="main.css">
  <style>
    :root {
      --bg: #0b1020;
      --bg-2: #0f1733;
      --card: #111633;
      --muted: #b8c2ff;
      --brand: #7c4dff;
      --brand-2: #00e5ff;
      --accent: #ff7ac6;
      --text: #e9eefc;
      --radius: 16px;
      --shadow: 0 18px 40px rgba(2,6,23,.55);
      --speed: 300ms;
      --success: #4caf50;
      --error: #f44336;
      --warning: #ffd166;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--text);
      background:
        radial-gradient(900px 600px at 80% -10%, rgba(124,77,255,.18), transparent 45%),
        radial-gradient(700px 500px at 8% 12%, rgba(0,229,255,.12), transparent 40%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
      min-height: 100vh;
      padding: 20px;
    }
    
    header { text-align: center; padding: 30px 20px; }
    .lesson-title {
      font-size: 2.5rem; 
      font-weight: 900; 
      margin-bottom: 10px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2), var(--accent));
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent;
      animation: gradient 3s ease infinite;
    }
    
    @keyframes gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .breadcrumb { 
      color: var(--muted); 
      font-size: .95rem; 
    }
    .breadcrumb a { 
      color: inherit; 
      text-decoration: none; 
      transition: color var(--speed);
    }
    .breadcrumb a:hover { color: var(--brand-2); }
    
    .nav-header {
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      padding: 12px 24px; 
      background: var(--card); 
      border-radius: var(--radius);
      margin-bottom: 32px; 
      box-shadow: var(--shadow);
    }
    .nav-header a {
      color: var(--muted); 
      text-decoration: none; 
      display: flex; 
      align-items: center;
      gap: 8px; 
      padding: 8px 16px; 
      border-radius: 8px; 
      transition: all var(--speed);
    }
    .nav-header a:hover { 
      color: var(--text); 
      background: rgba(255,255,255,.1); 
    }
    
    section {
      background: var(--card); 
      border-radius: var(--radius);
      padding: 32px; 
      margin-bottom: 32px; 
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    
    section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--brand), var(--brand-2), var(--accent));
      animation: gradient 3s ease infinite;
    }
    
    section h2 {
      margin-top: 0; 
      font-size: 1.8rem;
      background: linear-gradient(90deg, #fff, var(--brand-2));
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent;
    }
    section p { 
      line-height: 1.8; 
      color: var(--muted); 
      font-size: 1.05rem;
    }

    /* Enhanced Accordion */
    .accordion {
      margin-top: 20px;
    }
    
    .accordion-item {
      margin-bottom: 14px;
      border-radius: var(--radius);
      overflow: hidden;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.05);
      transition: all var(--speed);
    }
    
    .accordion-item:hover {
      transform: translateX(5px);
      border-color: var(--brand-2);
      box-shadow: 0 5px 20px rgba(0,229,255,.1);
    }
    
    .accordion-header {
      width: 100%;
      padding: 18px 24px;
      text-align: left;
      font-size: 1.05rem;
      font-weight: 600;
      border: none;
      background: transparent;
      color: var(--text);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all var(--speed);
    }
    
    .accordion-header:hover {
      background: rgba(124,77,255,.08);
    }
    
    .accordion-header.active {
      background: rgba(0,229,255,.08);
      color: var(--brand-2);
    }
    
    .accordion-header i {
      font-size: 1.3rem;
      color: var(--accent);
      transition: transform var(--speed);
    }
    
    .accordion-header.active i {
      transform: rotate(90deg);
      color: var(--brand-2);
    }
    
    .accordion-body {
      max-height: 0;
      overflow: hidden;
      padding: 0 24px;
      background: rgba(0,0,0,.2);
      transition: all 0.4s ease;
    }
    
    .accordion-body.open {
      max-height: 800px;
      padding: 20px 24px;
    }
    
    .accordion-body ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .accordion-body li {
      margin: 8px 0;
      color: var(--muted);
      line-height: 1.6;
    }
    
    .accordion-body strong {
      color: var(--brand-2);
    }

    /* Visual Hierarchy Container */
    .hierarchy-container {
      position: relative;
      padding: 40px 20px;
      background: linear-gradient(135deg, rgba(124,77,255,0.03), rgba(0,229,255,0.03));
      border-radius: var(--radius);
      margin: 30px 0;
    }

    /* Hierarchy Cards */
    .hierarchy-level {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      margin: 40px 0;
      flex-wrap: wrap;
    }
    
    .hierarchy-card {
      position: relative;
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      min-width: 200px;
    }
    
    .hierarchy-card:hover {
      transform: translateY(-5px) scale(1.02);
      border-color: var(--brand-2);
      box-shadow: 0 12px 35px rgba(0,229,255,0.2);
    }
    
    .root-card {
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color: white;
      min-width: 280px;
      padding: 25px;
    }
    
    .root-card i {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .type-card {
      min-width: 220px;
    }
    
    .asset-card { border-left: 5px solid var(--success); }
    .liability-card { border-left: 5px solid var(--error); }
    .capital-card { border-left: 5px solid var(--warning); }
    
    .type-card h4 {
      color: var(--text);
      margin: 10px 0;
      font-size: 1.2rem;
    }
    
    .type-card p {
      font-size: 0.85rem;
      color: var(--muted);
      margin: 5px 0;
    }

    /* Detail Cards */
    .detail-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .detail-card {
      background: rgba(255,255,255,.03);
      border-radius: 12px;
      padding: 20px;
      border-left: 4px solid var(--brand-2);
      transition: all var(--speed);
    }
    
    .detail-card:hover {
      transform: translateX(5px);
      background: rgba(255,255,255,.06);
    }
    
    .detail-card h5 {
      color: var(--brand-2);
      margin: 0 0 10px 0;
      font-size: 1.1rem;
    }
    
    .detail-card p {
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    /* Formula Box */
    .formula-box {
      background: linear-gradient(135deg, rgba(124,77,255,.1), rgba(0,229,255,.1));
      border: 2px solid var(--brand-2);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
    }
    
    .formula-box h4 {
      color: var(--brand-2);
      margin: 0 0 15px 0;
    }
    
    .formula {
      font-size: 1.3rem;
      color: var(--text);
      font-weight: 600;
      padding: 10px;
      background: rgba(0,0,0,.3);
      border-radius: 8px;
      display: inline-block;
    }

    /* Comparison Table */
    .comparison-table {
      width: 100%;
      margin: 20px 0;
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    
    .comparison-table th {
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color: white;
      padding: 15px;
      font-weight: 600;
      text-align: left;
    }
    
    .comparison-table td {
      background: rgba(255,255,255,.03);
      padding: 15px;
      border-bottom: 1px solid rgba(255,255,255,.05);
      color: var(--muted);
    }
    
    .comparison-table tr:hover td {
      background: rgba(255,255,255,.06);
      color: var(--text);
    }

    /* Icon Badge */
    .icon-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,.05);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      color: var(--brand-2);
      border: 1px solid rgba(0,229,255,.3);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hierarchy-level { gap: 20px; }
      .detail-grid { grid-template-columns: 1fr; }
      .lesson-title { font-size: 1.8rem; }
      .formula { font-size: 1rem; }
    }

    /* Add this CSS for the comparison table wrapper */
    .table-wrapper {
      width: 100%;
      overflow-x: auto;
      margin: 20px 0;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    .comparison-table {
      width: 100%;
      min-width: 600px; /* Ensures table doesn't compress too much */
      margin: 0; /* Remove margin since wrapper has it */
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
      border-radius: 12px;
    }

    /* Scrollbar styling for the wrapper */
    .table-wrapper::-webkit-scrollbar {
      height: 8px;
    }

    .table-wrapper::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
      border-radius: 4px;
    }

    .table-wrapper::-webkit-scrollbar-thumb {
      background: var(--brand);
      border-radius: 4px;
    }

    .table-wrapper::-webkit-scrollbar-thumb:hover {
      background: var(--brand-2);
    }
  </style>
</head>
<body>
  <div class="nav-header">
    <a href="../index.html"><i class="fa-solid fa-house"></i><span>Home</span></a>
    <a href="../lessons.html"><i class="fa-solid fa-book"></i><span>All Lessons</span></a>
  </div>

  <header>
    <h1 class="lesson-title">Basic Accounting Terms</h1>
    <div class="breadcrumb">
      <a href="../index.html">Home</a> / 
      <a href="../lessons.html">Lessons</a> / 
      Chapter 2: Basic Accounting Terms
    </div>
  </header>

  <main>
    <!-- Introduction Section -->
    <section>
      <h2><i class="fas fa-info-circle"></i> Introduction</h2>
      <p>
        Chapter 2 of DK Goel Class 11 Accountancy introduces the fundamental terminology of accounting. 
        These terms form the language of business and are essential for understanding financial transactions. 
        Every business activity can be expressed using these standardized terms, making communication 
        in the business world precise and universally understood.
      </p>
    </section>

    <!-- Core Business Terms Section -->
    <section>
      <h2><i class="fas fa-briefcase"></i> Core Business Terms</h2>
      <div class="accordion">
        
        <!-- Business Transaction -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-exchange-alt"></i> Business Transaction</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> An economic event that changes the financial position of a business and can be measured in monetary terms.</p>
            <ul>
              <li><strong>Must have:</strong> Monetary value, dual aspect (debit and credit), and documentary evidence</li>
              <li><strong>Types:</strong>
                <ul>
                  <li>External Transactions: With parties outside the business (customers, suppliers)</li>
                  <li>Internal Transactions: Within the organization (depreciation, provisions)</li>
                </ul>
              </li>
              <li><strong>Example:</strong> Purchase of goods for ₹10,000, Sale of goods for ₹15,000</li>
            </ul>
          </div>
        </div>

        <!-- Event -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-calendar-check"></i> Event</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> The result or consequence of a transaction.</p>
            <ul>
              <li>It is the outcome of one or more transactions</li>
              <li>Not directly recorded but calculated from recorded transactions</li>
              <li><strong>Example:</strong> Calculating net profit or loss after considering all revenues and expenses</li>
            </ul>
          </div>
        </div>

        <!-- Account -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-book"></i> Account</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> A summarized record of all transactions relating to a particular person, asset, liability, expense, or income at one place.</p>
            <ul>
              <li>Shows both debit and credit effects</li>
              <li>Maintains complete record under specific heads</li>
              <li>Helps in determining the net position of any item</li>
              <li><strong>Format:</strong> T-shaped with debit on left and credit on right</li>
              <li><strong>Example:</strong> Cash Account, Salary Account, Ram's Account</li>
            </ul>
          </div>
        </div>

        <!-- Capital -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-coins"></i> Capital</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> The amount of money or money's worth invested by the owner(s) in the business.</p>
            <ul>
              <li>Represents owner's equity in the business</li>
              <li>It's an internal liability (business owes to owner)</li>
              <li><strong>Formula:</strong> Capital = Assets - External Liabilities</li>
              <li>Increases with additional investment and profits</li>
              <li>Decreases with drawings and losses</li>
              <li><strong>Example:</strong> Owner invests ₹5,00,000 to start business</li>
            </ul>
          </div>
        </div>

        <!-- Drawings -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-hand-holding-usd"></i> Drawings</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> Cash or value of goods withdrawn by the owner from the business for personal use.</p>
            <ul>
              <li>Reduces owner's capital in the business</li>
              <li>Not a business expense (personal withdrawal)</li>
              <li>Recorded separately to track owner's withdrawals</li>
              <li><strong>Example:</strong> Owner takes ₹10,000 cash for personal expenses</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Assets Classification Section -->
    <section>
      <h2><i class="fas fa-chart-pie"></i> Complete Assets Classification</h2>
      <div class="hierarchy-container">
        <div class="hierarchy-level">
          <div class="hierarchy-card root-card">
            <i class="fas fa-coins"></i>
            <h3>ASSETS</h3>
            <p>Resources owned by business providing future economic benefits</p>
          </div>
        </div>
        
        <div class="hierarchy-level">
          <div class="hierarchy-card type-card asset-card">
            <i class="fas fa-building"></i>
            <h4>Non-Current Assets</h4>
            <p>Held for long-term use (>1 year)</p>
            <div class="icon-badge">
              <i class="fas fa-clock"></i> Long-term
            </div>
          </div>
          
          <div class="hierarchy-card type-card asset-card">
            <i class="fas fa-sync-alt"></i>
            <h4>Current Assets</h4>
            <p>Convertible to cash within 1 year</p>
            <div class="icon-badge">
              <i class="fas fa-tachometer-alt"></i> Short-term
            </div>
          </div>
          
          <div class="hierarchy-card type-card asset-card">
            <i class="fas fa-ghost"></i>
            <h4>Fictitious Assets</h4>
            <p>Deferred expenses (not real assets)</p>
            <div class="icon-badge">
              <i class="fas fa-exclamation-triangle"></i> Non-realizable
            </div>
          </div>
        </div>
      </div>

      <div class="detail-grid">
        <div class="detail-card">
          <h5><i class="fas fa-industry"></i> Fixed Assets - Tangible</h5>
          <p>Physical assets that can be seen and touched:</p>
          <ul>
            <li>Land & Building</li>
            <li>Plant & Machinery</li>
            <li>Furniture & Fixtures</li>
            <li>Vehicles</li>
          </ul>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-lightbulb"></i> Fixed Assets - Intangible</h5>
          <p>Non-physical assets with value:</p>
          <ul>
            <li>Goodwill</li>
            <li>Patents & Copyrights</li>
            <li>Trademarks</li>
            <li>Computer Software</li>
          </ul>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-money-bill-wave"></i> Current Assets Examples</h5>
          <p>Assets easily convertible to cash:</p>
          <ul>
            <li>Cash in hand/bank</li>
            <li>Inventory/Stock</li>
            <li>Trade Receivables (Debtors)</li>
            <li>Bills Receivable</li>
            <li>Prepaid Expenses</li>
            <li>Accrued Income</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Liabilities Classification Section -->
    <section>
      <h2><i class="fas fa-balance-scale"></i> Complete Liabilities Classification</h2>
      <div class="hierarchy-container">
        <div class="hierarchy-level">
          <div class="hierarchy-card root-card">
            <i class="fas fa-file-invoice-dollar"></i>
            <h3>LIABILITIES</h3>
            <p>Obligations to pay in future</p>
          </div>
        </div>
        
        <div class="hierarchy-level">
          <div class="hierarchy-card type-card liability-card">
            <i class="fas fa-user-tie"></i>
            <h4>Internal Liabilities</h4>
            <p>Amount owed to owners</p>
            <div class="icon-badge">
              <i class="fas fa-home"></i> Capital
            </div>
          </div>
          
          <div class="hierarchy-card type-card liability-card">
            <i class="fas fa-users"></i>
            <h4>External Liabilities</h4>
            <p>Amount owed to outsiders</p>
            <div class="icon-badge">
              <i class="fas fa-handshake"></i> Third Parties
            </div>
          </div>
        </div>
      </div>

      <div class="detail-grid">
        <div class="detail-card">
          <h5><i class="fas fa-hourglass-half"></i> Non-Current Liabilities</h5>
          <p>Payable after more than one year:</p>
          <ul>
            <li>Long-term Loans</li>
            <li>Debentures</li>
            <li>Mortgage Loans</li>
            <li>Long-term Provisions</li>
          </ul>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-clock"></i> Current Liabilities</h5>
          <p>Payable within one year:</p>
          <ul>
            <li>Trade Payables (Creditors)</li>
            <li>Bills Payable</li>
            <li>Bank Overdraft</li>
            <li>Outstanding Expenses</li>
            <li>Unearned Income</li>
            <li>Short-term Loans</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Revenue, Expense & Profit Section -->
    <section>
      <h2><i class="fas fa-chart-line"></i> Revenue, Expenses & Financial Results</h2>
      
      <div class="accordion">
        <!-- Revenue -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-arrow-up"></i> Revenue</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> Income of recurring nature from business activities.</p>
            <ul>
              <li><strong>Operating Revenue:</strong> From main business (Sales)</li>
              <li><strong>Non-Operating Revenue:</strong> From other sources (Rent, Interest, Commission)</li>
              <li><strong>Revenue Receipts:</strong> Regular/recurring nature</li>
              <li><strong>Capital Receipts:</strong> Non-recurring (Sale of fixed asset, Loan taken)</li>
            </ul>
          </div>
        </div>

        <!-- Expense -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-arrow-down"></i> Expense</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> Cost incurred for generating revenue in an accounting period.</p>
            <ul>
              <li>Related to current period's operations</li>
              <li><strong>Examples:</strong> Rent, Salary, Depreciation, Insurance, Utilities</li>
              <li>Matched against revenue to determine profit</li>
            </ul>
          </div>
        </div>

        <!-- Expenditure -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-shopping-cart"></i> Expenditure</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Definition:</strong> Spending of money or incurring liability for acquiring assets, goods, or services.</p>
            <ul>
              <li><strong>Revenue Expenditure:</strong> Benefit within one year (Rent, Wages)</li>
              <li><strong>Capital Expenditure:</strong> Benefit beyond one year (Machinery, Building)</li>
              <li><strong>Deferred Revenue Expenditure:</strong> Heavy expense, benefit over multiple years (Large Advertisement Campaign)</li>
            </ul>
          </div>
        </div>

        <!-- Income, Profit & Loss -->
        <div class="accordion-item">
          <button class="accordion-header">
            <span><i class="fas fa-chart-bar"></i> Income, Profit & Loss</span>
            <i class="fas fa-chevron-right"></i>
          </button>
          <div class="accordion-body">
            <p><strong>Income:</strong> The excess of Revenue over Expenses</p>
            <p><strong>Profit:</strong> Excess of total revenues over total expenses from regular business</p>
            <p><strong>Gain:</strong> Profit from irregular/non-recurring activities (Sale of fixed asset)</p>
            <p><strong>Loss:</strong> When Expenses exceed Revenue</p>
            <div class="formula-box">
              <h4>Key Formula</h4>
              <div class="formula">Income = Revenue - Expenses</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Trading Terms Section -->
    <section>
      <h2><i class="fas fa-store"></i> Trading Terms</h2>
      
      <div class="detail-grid">
        <div class="detail-card">
          <h5><i class="fas fa-box"></i> Goods/Merchandise</h5>
          <p>Items purchased for resale or production. The primary items a business deals in.</p>
          <p><strong>Note:</strong> Term 'Goods' is specific to items for trade, not assets.</p>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-shopping-bag"></i> Purchases</h5>
          <p>Buying of goods (only) for resale or production.</p>
          <ul>
            <li>Cash Purchases: Immediate payment</li>
            <li>Credit Purchases: Payment later</li>
          </ul>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-cash-register"></i> Sales</h5>
          <p>Selling of goods or services - main revenue source.</p>
          <ul>
            <li>Cash Sales: Immediate receipt</li>
            <li>Credit Sales: Payment received later</li>
          </ul>
        </div>
        
        <div class="detail-card">
          <h5><i class="fas fa-warehouse"></i> Stock/Inventory</h5>
          <p>Unsold goods at the end of accounting period.</p>
          <ul>
            <li>Opening Stock: Beginning of period</li>
            <li>Closing Stock: End of period</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Debtors vs Creditors Section -->
    <section>
      <h2><i class="fas fa-exchange-alt"></i> Debtors vs Creditors</h2>
      
      <div class="table-wrapper">
        <table class="comparison-table">
          <thead>
            <tr>
              <th><i class="fas fa-user-plus"></i> Aspect</th>
              <th><i class="fas fa-arrow-up"></i> Debtors (Trade Receivables)</th>
              <th><i class="fas fa-arrow-down"></i> Creditors (Trade Payables)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Definition</strong></td>
              <td>Persons who owe money to the business</td>
              <td>Persons to whom business owes money</td>
            </tr>
            <tr>
              <td><strong>Arises from</strong></td>
              <td>Credit sales of goods/services</td>
              <td>Credit purchases of goods/services</td>
            </tr>
            <tr>
              <td><strong>Classification</strong></td>
              <td>Current Asset</td>
              <td>Current Liability</td>
            </tr>
            <tr>
              <td><strong>Also called</strong></td>
              <td>Sundry Debtors, Trade Receivables</td>
              <td>Sundry Creditors, Trade Payables</td>
            </tr>
            <tr>
              <td><strong>Bills related</strong></td>
              <td>Bills Receivable (formal promise to receive)</td>
              <td>Bills Payable (formal promise to pay)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Discount & Vouchers Section -->
    <section>
      <h2><i class="fas fa-percentage"></i> Discounts & Vouchers</h2>
      
      <div class="hierarchy-container">
        <div class="hierarchy-level">
          <div class="hierarchy-card type-card">
            <i class="fas fa-tag"></i>
            <h4>Trade Discount</h4>
            <p>Deduction from list price</p>
            <ul style="text-align: left; font-size: 0.85rem; color: var(--muted);">
              <li>NOT recorded in books</li>
              <li>Given to all customers</li>
              <li>Deducted before recording</li>
            </ul>
          </div>
          
          <div class="hierarchy-card type-card">
            <i class="fas fa-hand-holding-dollar"></i>
            <h4>Cash Discount</h4>
            <p>For prompt payment</p>
            <ul style="text-align: left; font-size: 0.85rem; color: var(--muted);">
              <li>IS recorded in books</li>
              <li>Motivates quick payment</li>
              <li>Shown as expense/income</li>
            </ul>
          </div>
          
          <div class="hierarchy-card type-card">
            <i class="fas fa-file-invoice"></i>
            <h4>Voucher</h4>
            <p>Source document</p>
            <ul style="text-align: left; font-size: 0.85rem; color: var(--muted);">
              <li>Invoice, Receipt</li>
              <li>Cash Memo</li>
              <li>Debit/Credit Note</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Key Formulas Summary -->
    <section>
      <h2><i class="fas fa-calculator"></i> Key Formulas Summary</h2>
      
      <div class="formula-box">
        <h4>Fundamental Accounting Equation</h4>
        <div class="formula">Assets = Capital + Liabilities</div>
      </div>
      
      <div class="detail-grid">
        <div class="detail-card">
          <h5>Capital Formula</h5>
          <p class="formula">Capital = Assets - Liabilities</p>
        </div>
        
        <div class="detail-card">
          <h5>Income Formula</h5>
          <p class="formula">Income = Revenue - Expenses</p>
        </div>
        
        <div class="detail-card">
          <h5>Gross Profit</h5>
          <p class="formula">GP = Sales - COGS</p>
        </div>
        
        <div class="detail-card">
          <h5>Net Profit</h5>
          <p class="formula">NP = GP - Indirect Expenses</p>
        </div>
        
        <div class="detail-card">
          <h5>Cost of Goods Sold</h5>
          <p class="formula">COGS = Op.Stock + Purchases - Cl.Stock</p>
        </div>
        
        <div class="detail-card">
          <h5>Working Capital</h5>
          <p class="formula">WC = Current Assets - Current Liabilities</p>
        </div>
      </div>
    </section>

    <!-- Operating Cycle -->
    <section>
      <h2><i class="fas fa-sync-alt"></i> Operating Cycle</h2>
      <p>
        The <strong>Operating Cycle</strong> is the time period between the acquisition of assets for processing 
        and their final conversion into cash. This cycle helps determine whether an asset or liability 
        is classified as "current" (within operating cycle or one year, whichever is longer) or "non-current".
      </p>
      <div class="formula-box">
        <h4>Operating Cycle Flow</h4>
        <div class="formula">Cash → Inventory → Debtors → Cash</div>
      </div>
    </section>

    <!-- MCQs -->
    <section class="card" id="mcqSection">
    <h2>🧩 MCQ Practice</h2>
    <div id="quiz-progress"></div>
    
    <div class="mcq-grid" id="quiz-container">
      
      <div class="mcq" data-answer="c">
      <h3>1. What is capital?</h3>
      <input type="radio" name="q1" id="q1a" value="a"><label for="q1a">Money kept in bank</label>
      <input type="radio" name="q1" id="q1b" value="b"><label for="q1b">Total assets of business</label>
      <input type="radio" name="q1" id="q1c" value="c"><label for="q1c">Owner’s investment</label>
      <input type="radio" name="q1" id="q1d" value="d"><label for="q1d">Cash balance</label>
    </div>

    <div class="mcq" data-answer="b">
      <h3>2. Which of the following is an asset?</h3>
      <input type="radio" name="q2" id="q2a" value="a"><label for="q2a">Salary payable</label>
      <input type="radio" name="q2" id="q2b" value="b"><label for="q2b">Building owned</label>
      <input type="radio" name="q2" id="q2c" value="c"><label for="q2c">Bank loan</label>
      <input type="radio" name="q2" id="q2d" value="d"><label for="q2d">Outstanding rent</label>
    </div>

    <div class="mcq" data-answer="d">
      <h3>3. A transaction must involve:</h3>
      <input type="radio" name="q3" id="q3a" value="a"><label for="q3a">Only cash</label>
      <input type="radio" name="q3" id="q3b" value="b"><label for="q3b">Only credit</label>
      <input type="radio" name="q3" id="q3c" value="c"><label for="q3c">Only goods</label>
      <input type="radio" name="q3" id="q3d" value="d"><label for="q3d">Exchange of value</label>
    </div>

    <div class="mcq" data-answer="a">
      <h3>4. Which is a liability?</h3>
      <input type="radio" name="q4" id="q4a" value="a"><label for="q4a">Bank loan</label>
      <input type="radio" name="q4" id="q4b" value="b"><label for="q4b">Cash in hand</label>
      <input type="radio" name="q4" id="q4c" value="c"><label for="q4c">Machinery</label>
      <input type="radio" name="q4" id="q4d" value="d"><label for="q4d">Inventory</label>
    </div>

    <div class="mcq" data-answer="b">
      <h3>5. Personal accounts relate to:</h3>
      <input type="radio" name="q5" id="q5a" value="a"><label for="q5a">Assets</label>
      <input type="radio" name="q5" id="q5b" value="b"><label for="q5b">Persons or entities</label>
      <input type="radio" name="q5" id="q5c" value="c"><label for="q5c">Expenses</label>
      <input type="radio" name="q5" id="q5d" value="d"><label for="q5d">Incomes</label>
    </div>

    <div class="mcq" data-answer="c">
      <h3>6. Which of these is a real account?</h3>
      <input type="radio" name="q6" id="q6a" value="a"><label for="q6a">Rent A/c</label>
      <input type="radio" name="q6" id="q6b" value="b"><label for="q6b">Salary A/c</label>
      <input type="radio" name="q6" id="q6c" value="c"><label for="q6c">Building A/c</label>
      <input type="radio" name="q6" id="q6d" value="d"><label for="q6d">Commission A/c</label>
    </div>

    <div class="mcq" data-answer="a">
      <h3>7. Nominal accounts record:</h3>
      <input type="radio" name="q7" id="q7a" value="a"><label for="q7a">Expenses and incomes</label>
      <input type="radio" name="q7" id="q7b" value="b"><label for="q7b">Assets</label>
      <input type="radio" name="q7" id="q7c" value="c"><label for="q7c">Liabilities</label>
      <input type="radio" name="q7" id="q7d" value="d"><label for="q7d">Owners</label>
    </div>

    <div class="mcq" data-answer="b">
      <h3>8. Outstanding rent is classified as:</h3>
      <input type="radio" name="q8" id="q8a" value="a"><label for="q8a">Asset</label>
      <input type="radio" name="q8" id="q8b" value="b"><label for="q8b">Liability</label>
      <input type="radio" name="q8" id="q8c" value="c"><label for="q8c">Capital</label>
      <input type="radio" name="q8" id="q8d" value="d"><label for="q8d">Income</label>
    </div>

    <div class="mcq" data-answer="c">
      <h3>9. Which account does Bank A/c fall under?</h3>
      <input type="radio" name="q9" id="q9a" value="a"><label for="q9a">Nominal</label>
      <input type="radio" name="q9" id="q9b" value="b"><label for="q9b">Real</label>
      <input type="radio" name="q9" id="q9c" value="c"><label for="q9c">Personal</label>
      <input type="radio" name="q9" id="q9d" value="d"><label for="q9d">None</label>
    </div>

    <div class="mcq" data-answer="a">
      <h3>10. Profit increases:</h3>
      <input type="radio" name="q10" id="q10a" value="a"><label for="q10a">Capital</label>
      <input type="radio" name="q10" id="q10b" value="b"><label for="q10b">Liabilities</label>
      <input type="radio" name="q10" id="q10c" value="c"><label for="q10c">Expenses</label>
      <input type="radio" name="q10" id="q10d" value="d"><label for="q10d">Loss</label>
    </div>

    <div class="mcq" data-answer="d">
      <h3>11. Which of the following is not an asset?</h3>
      <input type="radio" name="q11" id="q11a" value="a"><label for="q11a">Cash</label>
      <input type="radio" name="q11" id="q11b" value="b"><label for="q11b">Machinery</label>
      <input type="radio" name="q11" id="q11c" value="c"><label for="q11c">Inventory</label>
      <input type="radio" name="q11" id="q11d" value="d"><label for="q11d">Outstanding salary</label>
    </div>

    <div class="mcq" data-answer="c">
      <h3>12. The amount invested by owner is shown as:</h3>
      <input type="radio" name="q12" id="q12a" value="a"><label for="q12a">Asset</label>
      <input type="radio" name="q12" id="q12b" value="b"><label for="q12b">Liability</label>
      <input type="radio" name="q12" id="q12c" value="c"><label for="q12c">Capital</label>
      <input type="radio" name="q12" id="q12d" value="d"><label for="q12d">Expense</label>
    </div>

    <div class="mcq" data-answer="b">
      <h3>13. Which of these is a nominal account?</h3>
      <input type="radio" name="q13" id="q13a" value="a"><label for="q13a">Furniture A/c</label>
      <input type="radio" name="q13" id="q13b" value="b"><label for="q13b">Rent A/c</label>
      <input type="radio" name="q13" id="q13c" value="c"><label for="q13c">Bank A/c</label>
      <input type="radio" name="q13" id="q13d" value="d"><label for="q13d">Debtors A/c</label>
    </div>

    <div class="mcq" data-answer="a">
      <h3>14. Liabilities are payable to:</h3>
      <input type="radio" name="q14" id="q14a" value="a"><label for="q14a">Outsiders</label>
      <input type="radio" name="q14" id="q14b" value="b"><label for="q14b">Owners</label>
      <input type="radio" name="q14" id="q14c" value="c"><label for="q14c">Employees</label>
      <input type="radio" name="q14" id="q14d" value="d"><label for="q14d">Government only</label>
    </div>

    <div class="mcq" data-answer="d">
      <h3>15. Which of these represents expenses?</h3>
      <input type="radio" name="q15" id="q15a" value="a"><label for="q15a">Capital</label>
      <input type="radio" name="q15" id="q15b" value="b"><label for="q15b">Debtors</label>
      <input type="radio" name="q15" id="q15c" value="c"><label for="q15c">Cash</label>
      <input type="radio" name="q15" id="q15d" value="d"><label for="q15d">Salary paid</label>
    </div>

    <div class="mcq" data-answer="c">
      <h3>16. Which account records goods purchased?</h3>
      <input type="radio" name="q16" id="q16a" value="a"><label for="q16a">Sales A/c</label>
      <input type="radio" name="q16" id="q16b" value="b"><label for="q16b">Capital A/c</label>
      <input type="radio" name="q16" id="q16c" value="c"><label for="q16c">Purchases A/c</label>
      <input type="radio" name="q16" id="q16d" value="d"><label for="q16d">Cash A/c</label>
    </div>

    <div class="mcq" data-answer="b">
      <h3>17. Which of these is a fictitious asset?</h3>
      <input type="radio" name="q17" id="q17a" value="a"><label for="q17a">Cash</label>
      <input type="radio" name="q17" id="q17b" value="b"><label for="q17b">Preliminary expenses</label>
      <input type="radio" name="q17" id="q17c" value="c"><label for="q17c">Building</label>
      <input type="radio" name="q17" id="q17d" value="d"><label for="q17d">Furniture</label>
    </div>

    <div class="mcq" data-answer="d">
      <h3>18. Who is a creditor?</h3>
      <input type="radio" name="q18" id="q18a" value="a"><label for="q18a">One who buys goods</label>
      <input type="radio" name="q18" id="q18b" value="b"><label for="q18b">One who lends money</label>
      <input type="radio" name="q18" id="q18c" value="c"><label for="q18c">One who invests capital</label>
      <input type="radio" name="q18" id="q18d" value="d"><label for="q18d">One to whom money is payable</label>
    </div>

    <div class="mcq" data-answer="a">
      <h3>19. Debit the receiver, credit the giver applies to:</h3>
      <input type="radio" name="q19" id="q19a" value="a"><label for="q19a">Personal accounts</label>
      <input type="radio" name="q19" id="q19b" value="b"><label for="q19b">Real accounts</label>
      <input type="radio" name="q19" id="q19c" value="c"><label for="q19c">Nominal accounts</label>
      <input type="radio" name="q19" id="q19d" value="d"><label for="q19d">None</label>
    </div>

    <div class="mcq" data-answer="c">
      <h3>20. Debit what comes in, credit what goes out applies to:</h3>
      <input type="radio" name="q20" id="q20a" value="a"><label for="q20a">Nominal accounts</label>
      <input type="radio" name="q20" id="q20b" value="b"><label for="q20b">Personal accounts</label>
      <input type="radio" name="q20" id="q20c" value="c"><label for="q20c">Real accounts</label>
      <input type="radio" name="q20" id="q20d" value="d"><label for="q20d">Capital accounts</label>
    </div>

        
      <!-- ✅ CHANGED: Added onclick handler -->
      <button id="submitQuiz" onclick="submitQuiz()">Submit Answers</button>
      <div id="quizResult"></div>
      
      <!-- ✅ CHANGED: Added onclick and style -->
      <button id="retry-btn" onclick="retryQuiz()" style="display:none;">Try Again</button>
    </section>
  </main>

    <script type="module">
    // ========================================
    // 1. IMPORT FIREBASE (ONLY THIS LINE NEEDS EXTERNAL FILE)
    // ========================================
    import { submitLessonAttempt, loadPreviousAnswers } from '../firebase-config.js';

    // ========================================
    // 2. CONFIGURATION (CHANGE FOR EACH LESSON)
    // ========================================
    const LESSON_NUMBER = '2';  // ← Change this: '1', '2', '3', etc.
    const LESSON_ID = 'lesson-2'; // ← Change this: 'lesson-1', 'lesson-2', etc.

    // ========================================
    // 3. INITIALIZE QUIZ
    // ========================================
    function initQuiz() {
      console.log('🎯 Initializing quiz for Lesson', LESSON_NUMBER);
      
      const container = document.getElementById('quiz-container');
      if (!container) {
        console.error('❌ Quiz container not found');
        return;
      }

      // Add event listeners to all radio buttons
      const allInputs = container.querySelectorAll('input[type="radio"]');
      allInputs.forEach(input => {
        // UPDATE PROGRESS BAR ON CHANGE
        input.addEventListener('change', updateProgressBar);
        
        // ✨ ADD UNCLICK FUNCTIONALITY ✨
        input.addEventListener('click', function(e) {
          // If already checked, uncheck it
          if (this.dataset.checked === 'true') {
            this.checked = false;
            this.dataset.checked = 'false';
            updateProgressBar(); // Update progress after unclick
          } else {
            // Mark all radios in this group as unchecked
            const groupName = this.name;
            document.querySelectorAll(`input[name="${groupName}"]`).forEach(radio => {
              radio.dataset.checked = 'false';
            });
            // Mark this one as checked
            this.dataset.checked = 'true';
          }
        });
      });

      console.log('✅ Quiz initialized with', allInputs.length, 'options');
      updateProgressBar();
    }

    // ========================================
    // 4. UPDATE PROGRESS BAR (REAL-TIME)
    // ========================================
    function updateProgressBar() {
      const container = document.getElementById('quiz-container');
      if (!container) return;

      // Count total questions
      const allQuestions = container.querySelectorAll('.mcq');
      const totalQuestions = allQuestions.length;

      // Count answered questions
      let answeredCount = 0;
      allQuestions.forEach(mcq => {
        const questionName = mcq.querySelector('input[type="radio"]').name;
        const selected = document.querySelector(`input[name="${questionName}"]:checked`);
        if (selected) answeredCount++;
      });

      // Calculate progress percentage
      const progressPercentage = totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0;

      // Update progress bar UI
      const progressDiv = document.getElementById('quiz-progress');
      if (progressDiv) {
        progressDiv.innerHTML = `
          <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: var(--muted);">
              <span>Questions Answered</span>
              <span><strong style="color: var(--brand-2);">${answeredCount}/${totalQuestions}</strong></span>
            </div>
            <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
              <div style="width: ${progressPercentage}%; height: 100%; background: linear-gradient(90deg, var(--brand), var(--brand-2)); transition: width 0.3s ease;"></div>
            </div>
          </div>
        `;
      }

      console.log(`📊 Progress: ${answeredCount}/${totalQuestions} (${progressPercentage}%)`);
    }

    // ========================================
    // 5. SUBMIT QUIZ (BULLETPROOF VERSION)
    // ========================================
    window.submitQuiz = async function() {
      console.log('📤 Submitting quiz for Lesson', LESSON_NUMBER);
      
      const container = document.getElementById('quiz-container');
      if (!container) return;

      const mcqs = container.querySelectorAll('.mcq');
      if (mcqs.length === 0) return;

      let answersData = {};
      let correctCount = 0;
      let totalQuestions = mcqs.length;
      let answeredCount = 0;

      mcqs.forEach((mcq, index) => {
        const correctAnswer = mcq.dataset.answer;
        const questionNumber = `q${index + 1}`;
        const inputs = mcq.querySelectorAll('input[type="radio"]');
        const questionName = inputs[0].name;
        const selected = document.querySelector(`input[name="${questionName}"]:checked`);

        if (!selected) return;

        answeredCount++;
        const selectedValue = selected.value;
        const isCorrect = selectedValue === correctAnswer;
        if (isCorrect) correctCount++;

        answersData[questionNumber] = {
          selected: selectedValue,
          correct: correctAnswer,
          isCorrect: isCorrect
        };

        inputs.forEach(input => {
          const label = input.nextElementSibling;
          if (!label) return;
          input.disabled = true;
          if (input.value === correctAnswer) {
            label.style.background = 'linear-gradient(90deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1))';
            label.style.borderLeft = '4px solid #10b981';
            label.style.fontWeight = 'bold';
          }
          if (input.value === selectedValue && !isCorrect) {
            label.style.background = 'linear-gradient(90deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1))';
            label.style.borderLeft = '4px solid #ef4444';
          }
        });
      });

      if (answeredCount === 0) {
        alert('⚠️ Please answer at least 1 question before submitting!');
        return;
      }

      const percentage = Math.round((correctCount / totalQuestions) * 100);
      const submitBtn = document.getElementById('submitQuiz');
      const resultDiv = document.getElementById('quizResult');

      if (submitBtn) {
        submitBtn.disabled = true;
        submitBtn.textContent = 'Submitting...';
      }

      // Show loading state
      if (resultDiv) {
        resultDiv.innerHTML = `
          <div style="padding: 20px; margin-top: 20px; background: rgba(124,77,255,0.1); border-radius: 12px; text-align: center;">
            <div style="font-size: 1.2rem; color: var(--brand-2);">⚙️ Saving your progress...</div>
          </div>`;
      }

      try {
        console.log("📤 Submitting to Firebase:", { lessonNumber: LESSON_NUMBER, correctCount, totalQuestions, percentage });
        const result = await submitLessonAttempt(LESSON_NUMBER, answersData, correctCount, totalQuestions);
        console.log("✅ Firebase response:", result);

        // ALWAYS show result, even if Firebase fails
        if (resultDiv) {
          if (result && result.success) {
            if (result.updated) {
              // New best score!
              resultDiv.innerHTML = `
                <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-radius: 12px; border: 2px solid #10b981;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #10b981; margin-bottom: 10px;">🎉 New Best Score!</div>
                  <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                  <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                  <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">✅ Progress saved to cloud</div>
                </div>`;
            } else {
              // Previous score was better
              resultDiv.innerHTML = `
                <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.1)); border-radius: 12px; border: 2px solid #fbbf24;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #fbbf24; margin-bottom: 10px;">📊 Quiz Completed</div>
                  <div style="font-size: 1.2rem; margin-bottom: 10px;">Current Score: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                  <div style="font-size: 1.1rem; margin-bottom: 10px; color: #10b981;">Your Best: <strong>${result.bestScore}/${result.totalQuestions}</strong> (${result.percentage}%)</div>
                  <div style="color: var(--muted); font-size: 0.9rem;">Answered ${answeredCount} out of ${totalQuestions} questions</div>
                  <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">💡 Try again to beat your best score!</div>
                </div>`;
            }
          } else {
            // Firebase failed but still show score
            resultDiv.innerHTML = `
              <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
                <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                <div style="color: #fbbf24; font-size: 0.85rem; margin-top: 10px;">⚠️ Could not save to cloud. Check console (F12) for details.</div>
              </div>`;
            console.error("❌ Firebase error:", result?.error || "Unknown error");
          }
        }
      } catch (error) {
        console.error("❌ Critical error during submission:", error);
        // STILL show the score even if everything fails
        if (resultDiv) {
          resultDiv.innerHTML = `
            <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
              <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
              <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
              <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
              <div style="color: #ef4444; font-size: 0.85rem; margin-top: 10px;">❌ Error: ${error.message}</div>
              <div style="color: var(--muted); font-size: 0.8rem; margin-top: 5px;">Check browser console (F12) for details</div>
            </div>`;
        }
      } finally {
        // Always show retry button and update submit button
        const retryBtn = document.getElementById('retry-btn');
        if (retryBtn) retryBtn.style.display = 'block';
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.textContent = '✓ Submitted';
        }
      }
    };

    // ========================================
    // 6. RETRY QUIZ
    // ========================================
    window.retryQuiz = function() {
      console.log('🔄 Retrying quiz');
      
      const container = document.getElementById('quiz-container');
      if (!container) return;

      // Reset all inputs
      const allInputs = container.querySelectorAll('input[type="radio"]');
      allInputs.forEach(input => {
        input.checked = false;
        input.disabled = false;
        input.dataset.checked = 'false'; // Reset unclick tracking
        
        const label = input.nextElementSibling;
        if (label) {
          label.style.background = '';
          label.style.borderLeft = '';
          label.style.fontWeight = '';
        }
      });

      // Reset UI
      const resultDiv = document.getElementById('quizResult');
      if (resultDiv) resultDiv.innerHTML = '';

      const submitBtn = document.getElementById('submitQuiz');
      if (submitBtn) {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Answers';
      }

      const retryBtn = document.getElementById('retry-btn');
      if (retryBtn) retryBtn.style.display = 'none';

      updateProgressBar();
      document.getElementById('mcqSection')?.scrollIntoView({ behavior: 'smooth' });
    };

    // ========================================
    // 7. INITIALIZE ON PAGE LOAD
    // ========================================
    initQuiz();
    console.log('✅ Lesson', LESSON_NUMBER, 'quiz ready!');

    

    // Add animation to cards on scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    document.querySelectorAll('.detail-card, .hierarchy-card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'all 0.5s ease';
      observer.observe(card);
    });

    // Accordion functionality
    document.querySelectorAll('.accordion-header').forEach(header => {
      header.addEventListener('click', () => {
        const body = header.nextElementSibling;
        const isOpen = body.classList.contains('open');
        
        // Close all accordion items
        document.querySelectorAll('.accordion-body').forEach(b => b.classList.remove('open'));
        document.querySelectorAll('.accordion-header').forEach(h => h.classList.remove('active'));
        
        // Open clicked item if it was closed
        if (!isOpen) {
          body.classList.add('open');
          header.classList.add('active');
        }
      });
    });
</script>

</body>
</html>

</body>
</html>
