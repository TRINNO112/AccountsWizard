<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Lesson 4 — Process & Basis of Accounting | AccountsWizard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="main.css" />
  <style>
    :root {
      --bg: #0b1020;
      --bg-2: #0f1733;
      --card: #111633;
      --muted: #b8c2ff;
      --brand: #7c4dff;
      --brand-2: #00e5ff;
      --accent: #ff7ac6;
      --text: #e9eefc;
      --radius: 16px;
      --shadow: 0 18px 40px rgba(2,6,23,.55);
      --speed: 300ms;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, Roboto, Arial;
      color: var(--text);
      background: linear-gradient(180deg, var(--bg), var(--bg-2));
      min-height: 100vh;
      padding: 20px;
    }
    header { text-align: center; padding: 30px 20px; }
    .lesson-title {
      font-size: 2.2rem; font-weight: 900;
      background: linear-gradient(90deg,#fff,var(--accent));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .breadcrumb { color: var(--muted); font-size: .95rem; }
    .breadcrumb a { color: inherit; text-decoration: none; }
    .breadcrumb a:hover { color: var(--text); }
    .nav-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 24px; background: var(--card); border-radius: var(--radius);
      margin-bottom: 32px; box-shadow: var(--shadow);
    }
    .nav-header a {
      color: var(--muted); text-decoration: none; display: flex; align-items: center;
      gap: 8px; padding: 8px 16px; border-radius: 8px; transition: all var(--speed);
    }
    .nav-header a:hover { color: var(--text); background: rgba(255,255,255,.1); }
    section {
      background: var(--card); border-radius: var(--radius);
      padding: 32px; margin-bottom: 32px; box-shadow: var(--shadow);
    }
    section h2 {
      margin-top: 0; font-size: 1.5rem;
      background: linear-gradient(90deg,#fff,var(--brand-2));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    section p { line-height: 1.6; color: var(--muted); }
    .placeholder {
      margin: 15px 0; padding: 20px;
      border: 2px dashed var(--brand-2);
      border-radius: 12px; text-align: center;
      color: var(--muted); font-style: italic;
    }

    /* Responsive adjustments for summary section */
    @media (max-width: 768px) {
        section[style*="grid-template-columns: 1fr 1fr"] {
            grid-template-columns: 1fr !important;
            gap: 20px !important;
        }
        
        section[style*="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr))"] {
            grid-template-columns: 1fr !important;
        }
        
        table {
            font-size: 0.85rem !important;
        }
        
        th, td {
            padding: 8px 12px !important;
        }
    }

        /* Card Animation Base Styles */
        .animate-card {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        transition: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .animate-card.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
        }

        .animate-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 25px 50px rgba(2,6,23,.8) !important;
        }

        /* Staggered animation delays */
        .animate-card:nth-child(1) { transition-delay: 0.1s; }
        .animate-card:nth-child(2) { transition-delay: 0.2s; }
        .animate-card:nth-child(3) { transition-delay: 0.3s; }
        .animate-card:nth-child(4) { transition-delay: 0.4s; }
        .animate-card:nth-child(5) { transition-delay: 0.5s; }
        .animate-card:nth-child(6) { transition-delay: 0.6s; }
        .animate-card:nth-child(7) { transition-delay: 0.7s; }

        /* Process flow cards animation */
        .process-card {
        opacity: 0;
        transform: translateX(-40px) rotateY(15deg);
        transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .process-card.visible {
        opacity: 1;
        transform: translateX(0) rotateY(0deg);
        }

        .process-card:hover {
        transform: translateY(-12px) scale(1.05);
        box-shadow: 0 20px 40px rgba(124, 77, 255, 0.4);
        }

        /* Basis cards special animation */
        .basis-card {
        opacity: 0;
        transform: translateY(50px) rotateX(20deg);
        transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .basis-card.visible {
        opacity: 1;
        transform: translateY(0) rotateX(0deg);
        }

        .basis-card:hover {
        transform: translateY(-15px) scale(1.05);
        box-shadow: 0 30px 60px rgba(0, 229, 255, 0.3);
        }

        /* Float animation for icons */
        @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        }

        .animate-card:hover i {
        animation: float 2s ease-in-out infinite;
        }

        /* Pulse animation for borders */
        @keyframes pulse-border {
        0% { box-shadow: 0 0 0 0 rgba(124, 77, 255, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(124, 77, 255, 0); }
        100% { box-shadow: 0 0 0 0 rgba(124, 77, 255, 0); }
        }

        .animate-card:hover {
        animation: pulse-border 1.5s infinite;
        }

        /* Table row animation */
        .animate-table-row {
        opacity: 0;
        transform: translateX(-20px);
        transition: all 0.4s ease;
        }

        .animate-table-row.visible {
        opacity: 1;
        transform: translateX(0);
        }

        .animate-table-row:hover {
        background: rgba(255,255,255,0.08) !important;
        transform: translateX(5px);
        }

        .animate-card:not(.visible) {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        /* Remove any properties that might hide content completely */
        visibility: visible !important;
        display: block !important;
        }

        /* Ensure all content is visible by default, then animate */
        .animate-card {
        opacity: 1; /* Default to visible */
        transform: translateY(0) scale(1);
        transition: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        /* Only hide cards that haven't been animated yet */
        .animate-card.animate-pending {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        }

        .animate-card.animate-pending.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
        }

        /* Remove horizontal scroll from tables */
        .table-container {
        overflow-x: hidden !important; /* Remove horizontal scroll */
        width: 100%;
        max-width: 100%;
        }

        /* Make tables responsive without horizontal scroll */
        table {
        width: 100% !important;
        min-width: auto !important; /* Remove min-width that causes scroll */
        table-layout: fixed; /* Force table to fit container */
        overflow-wrap: break-word;
        }

        table th, table td {
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
        min-width: 0; /* Allow cells to shrink */
        }

        /* Specific fix for your comparison table */
        div[style*="overflow: auto"] {
        overflow: visible !important; /* Remove the overflow auto that creates scroll */
        overflow-x: visible !important;
        }

        /* Alternative responsive table solution */
        @media (max-width: 768px) {
        table {
            font-size: 0.8rem !important;
            min-width: auto !important;
        }
        
        th, td {
            padding: 6px 8px !important;
            word-break: break-word;
        }
        
        /* Stack table headers and data on mobile if needed */
        .responsive-table {
            display: block;
            overflow-x: visible;
        }
        
        .responsive-table thead {
            display: none; /* Hide headers on mobile */
        }
        
        .responsive-table tr {
            display: block;
            margin-bottom: 1rem;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 10px;
        }
        
        .responsive-table td {
            display: block;
            text-align: left !important;
            border: none !important;
            padding: 5px 0 !important;
        }
        
        .responsive-table td:before {
            content: attr(data-label) ": ";
            font-weight: bold;
            color: var(--brand-2);
        }
        }

        /* Fix for any content that might be getting clipped */
        section {
        overflow: visible !important;
        }

        .basis-card, .process-card {
        overflow: visible !important;
        }

        /* Ensure text content is always visible */
        h3, h4, p, ul, ol, li {
        opacity: 1 !important;
        visibility: visible !important;
        }

        /* Fix for hidden content in examples section */
        div[style*="display: flex; gap: 20px; flex-wrap: wrap"] {
        overflow: visible !important;
        }

        /* Remove any problematic overflow properties */
        * {
        overflow-x: visible !important;
        }

        body {
        overflow-x: hidden; /* Only hide horizontal scroll on body */
        }

        /* Specific fix for table containers */
        .table-wrapper, 
        div[style*="overflow: auto"],
        div[style*="overflow-x: auto"] {
        overflow: visible !important;
        overflow-x: visible !important;
        width: 100%;
        max-width: 100%;
        }
  </style>
</head>
<body>
  <div class="nav-header">
    <a href="../index.html"><i class="fa-solid fa-house"></i><span>Home</span></a>
    <a href="../lessons.html"><i class="fa-solid fa-book"></i><span>All Lessons</span></a>
  </div>

  <header>
    <h1 class="lesson-title">Process & Basis of Accounting</h1>
    <div class="breadcrumb">
      <a href="../index.html">Home</a> / 
      <a href="../lessons.html">Lessons</a> / 
      Process & Basis of Accounting
    </div>
  </header>

  <main>

    <!-- Intro Section -->
        <section>
        <h2>Introduction</h2>
        <p style="font-size:1.1rem; line-height:1.8; color: var(--muted);">
            Accounting is not only about recording financial transactions but also about 
            following a systematic <strong>process</strong> and applying an appropriate 
            <strong>basis of accounting</strong>. The process ensures that transactions 
            move step by step from their initial recording to the preparation of final 
            accounts. The basis defines <em>when</em> and <em>how</em> incomes and 
            expenses are recognized. Together, these form the backbone of accurate and 
            reliable financial reporting.
        </p>

        <div style="
            margin-top:20px; 
            padding:20px; 
            border-radius:12px; 
            background:rgba(255,255,255,0.04);
            box-shadow: var(--shadow); 
            text-align:center;">
            <i class="fas fa-project-diagram" style="font-size:2rem; color:var(--brand-2); margin-bottom:10px;"></i>
            <h3 style="margin:10px 0; color: var(--text);">Why This Chapter Matters?</h3>
            <p style="color:var(--muted); font-size:0.95rem; line-height:1.6;">
            Without understanding the accounting process and basis, it is impossible 
            to prepare consistent, comparable, and meaningful financial statements.
            </p>
        </div>
</section>

    <!-- Process of Accounting -->
        <section>
        <h2>Process of Accounting</h2>
        <p style="font-size:1.05rem; color:var(--muted); line-height:1.7;">
            The process of accounting is a step-by-step method by which financial 
            information is identified, recorded, classified, summarized, and presented 
            in the form of financial statements. Each step ensures accuracy and 
            reliability of business records.
        </p>

        <!-- Flowchart Container -->
        <div style="
            display: flex; 
            justify-content: center; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 25px; 
            margin-top: 30px;">
            
            <!-- Identification -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-search" style="font-size:1.8rem; color:var(--accent);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Identification</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Recognizing financial transactions.</p>
            </div>

            <i class="fas fa-arrow-right" style="font-size:1.5rem; color:var(--brand-2); align-self:center;"></i>

            <!-- Vouchers -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-file-alt" style="font-size:1.8rem; color:var(--brand-2);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Vouchers</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Evidence supporting each transaction.</p>
            </div>

            <i class="fas fa-arrow-right" style="font-size:1.5rem; color:var(--brand-2); align-self:center;"></i>

            <!-- Books of Original Entry -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-book" style="font-size:1.8rem; color:var(--brand);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Books of Original Entry</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Recording in Journal/other books.</p>
            </div>

            <i class="fas fa-arrow-right" style="font-size:1.5rem; color:var(--brand-2); align-self:center;"></i>

            <!-- Ledger -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-layer-group" style="font-size:1.8rem; color:var(--accent);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Ledger</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Classification of entries into accounts.</p>
            </div>

            <i class="fas fa-arrow-right" style="font-size:1.5rem; color:var(--brand-2); align-self:center;"></i>

            <!-- Trial Balance -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-balance-scale" style="font-size:1.8rem; color:var(--brand-2);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Trial Balance</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Checking arithmetical accuracy.</p>
            </div>

            <i class="fas fa-arrow-right" style="font-size:1.5rem; color:var(--brand-2); align-self:center;"></i>

            <!-- Financial Statements -->
            <div style="min-width: 160px; padding: 20px; border-radius: 12px; background: var(--card); text-align: center; box-shadow: var(--shadow);">
            <i class="fas fa-file-invoice-dollar" style="font-size:1.8rem; color:var(--brand);"></i>
            <h4 style="margin:10px 0; color:var(--text);">Financial Statements</h4>
            <p style="font-size:0.85rem; color:var(--muted);">Trading, P&L, and Balance Sheet.</p>
            </div>
        </div>

        <!-- Detailed Explanation -->
        <div style="margin-top:40px;">
            <h3 style="color:var(--text);">Step-wise Explanation</h3>
            <ol style="line-height:1.8; color:var(--muted); font-size:1rem;">
            <li><strong>Identification of Transactions:</strong> Determining which events are financial in nature and measurable in money.</li>
            <li><strong>Preparation of Vouchers:</strong> Preparing documentary evidence (cash memos, bills, receipts, invoices) for every transaction.</li>
            <li><strong>Recording in Books of Original Entry:</strong> First recording of transactions in the Journal, Cash Book, or other subsidiary books.</li>
            <li><strong>Posting to Ledger:</strong> Classifying journal entries into their respective accounts for a clear view of each item.</li>
            <li><strong>Preparation of Trial Balance:</strong> Listing debit and credit balances of all accounts to test mathematical accuracy of books.</li>
            <li><strong>Preparation of Financial Statements:</strong> Final step to present business results and financial position (Trading A/c, P&L A/c, Balance Sheet).</li>
            </ol>
        </div>
        </section>

        <!-- Basis of Accounting -->
        <section>
            <h2>Basis of Accounting</h2>

            <p style="font-size:1.03rem; color:var(--muted); line-height:1.7;">
                The basis of accounting determines <strong>when</strong> and <strong>how</strong> transactions are recorded. 
                Different bases change the timing of revenue and expense recognition and therefore affect reported profit.
                Below are the three common bases used in practice.
            </p>

            <!-- Cards Row -->
            <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 24px; margin-top: 30px;">
                
                <!-- Cash Basis - Highlighted -->
                <div style="
                    min-width: 280px; 
                    max-width: 320px;
                    padding: 24px;
                    border-radius: 16px;
                    background: linear-gradient(145deg, var(--card), rgba(124, 77, 255, 0.1));
                    box-shadow: var(--shadow);
                    border: 2px solid var(--accent);
                    position: relative;
                    flex: 1;
                ">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-money-bill-wave" style="font-size:1.8rem; color:var(--accent);"></i>
                        <h3 style="margin: 0; color: var(--text);">Cash Basis</h3>
                        <span style="
                            background: var(--accent); 
                            color: var(--bg); 
                            padding: 4px 10px; 
                            border-radius: 20px; 
                            font-size: 0.75rem; 
                            font-weight: bold;
                        ">Primary</span>
                    </div>
                    
                    <p style="color:var(--muted); font-size:0.95rem; line-height:1.6; margin-bottom: 16px;">
                        Recognizes income when cash is received and expenses when cash is paid.
                    </p>
                    
                    <ul style="color:var(--muted); font-size:0.9rem; line-height:1.6; padding-left: 20px; margin: 0;">
                        <li>Simple, used by small businesses</li>
                        <li>No receivables or payables recognition</li>
                        <li>May not reflect true period profit</li>
                    </ul>
                </div>

                <!-- Accrual Basis - Highlighted -->
                <div style="
                    min-width: 280px; 
                    max-width: 320px;
                    padding: 24px;
                    border-radius: 16px;
                    background: linear-gradient(145deg, var(--card), rgba(0, 229, 255, 0.1));
                    box-shadow: var(--shadow);
                    border: 2px solid var(--brand-2);
                    position: relative;
                    flex: 1;
                ">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-calendar-check" style="font-size:1.8rem; color:var(--brand-2);"></i>
                        <h3 style="margin: 0; color: var(--text);">Accrual Basis</h3>
                        <span style="
                            background: var(--brand-2); 
                            color: var(--bg); 
                            padding: 4px 10px; 
                            border-radius: 20px; 
                            font-size: 0.75rem; 
                            font-weight: bold;
                        ">Primary</span>
                    </div>
                    
                    <p style="color:var(--muted); font-size:0.95rem; line-height:1.6; margin-bottom: 16px;">
                        Recognizes income when earned and expenses when incurred, regardless of cash movement.
                    </p>
                    
                    <ul style="color:var(--muted); font-size:0.9rem; line-height:1.6; padding-left: 20px; margin: 0;">
                        <li>Matches revenues with related expenses</li>
                        <li>Shows receivables and payables</li>
                        <li>Preferred for accurate period reporting</li>
                    </ul>
                </div>

                <!-- Hybrid Basis -->
                <div style="
                    min-width: 280px; 
                    max-width: 320px;
                    padding: 24px;
                    border-radius: 16px;
                    background: var(--card);
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.1);
                    flex: 1;
                ">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <i class="fas fa-project-diagram" style="font-size:1.8rem; color:var(--brand);"></i>
                        <h3 style="margin: 0; color: var(--text);">Hybrid Basis</h3>
                    </div>
                    
                    <p style="color:var(--muted); font-size:0.95rem; line-height:1.6; margin-bottom: 16px;">
                        A mix of cash & accrual: businesses may use cash basis for some items and accrual for others.
                    </p>
                    
                    <ul style="color:var(--muted); font-size:0.9rem; line-height:1.6; padding-left: 20px; margin: 0;">
                        <li>Common for tax or practical reasons</li>
                        <li>Example: Accrual for sales, cash for petty expenses</li>
                        <li>Requires clear policy & consistent application</li>
                    </ul>
                </div>
            </div>

            <!-- Compact Comparison Table -->
            <div style="margin-top: 40px;">
                <h3 style="color: var(--text); margin-bottom: 20px;">Comparison of Accounting Bases</h3>
                
                <div style="overflow: auto; border-radius: 12px; box-shadow: var(--shadow);">
                    <table style="width: 100%; border-collapse: collapse; min-width: 700px;">
                        <thead>
                            <tr style="background: linear-gradient(90deg, var(--brand), var(--brand-2));">
                                <th style="padding: 14px 16px; font-weight: 700; color: var(--bg); text-align: left; border-right: 1px solid rgba(255,255,255,0.2);">Feature</th>
                                <th style="padding: 14px 16px; font-weight: 700; color: var(--bg); text-align: left; border-right: 1px solid rgba(255,255,255,0.2);">Cash Basis</th>
                                <th style="padding: 14px 16px; font-weight: 700; color: var(--bg); text-align: left; border-right: 1px solid rgba(255,255,255,0.2);">Accrual Basis</th>
                                <th style="padding: 14px 16px; font-weight: 700; color: var(--bg); text-align: left;">Hybrid</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: rgba(255,255,255,0.03);">
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: 600;">Recognition timing</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">On cash receipt/payment</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">When earned/incurred</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Mix of both as per policy</td>
                            </tr>
                            <tr style="background: rgba(255,255,255,0.01);">
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: 600;">Complexity</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Low</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">High</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Medium</td>
                            </tr>
                            <tr style="background: rgba(255,255,255,0.03);">
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: 600;">Use-case</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Small cash-driven businesses</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Larger entities, GAAP/IFRS</td>
                                <td style="padding: 12px 16px; color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.05);">Transitional / tax-driven setups</td>
                            </tr>
                            <tr style="background: rgba(255,255,255,0.01);">
                                <td style="padding: 12px 16px; color: var(--muted); font-weight: 600;">Effect on reports</td>
                                <td style="padding: 12px 16px; color: var(--muted);">May misstate period profit</td>
                                <td style="padding: 12px 16px; color: var(--muted);">Matches revenue to expense</td>
                                <td style="padding: 12px 16px; color: var(--muted);">Depends on applied mix</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Explanatory Examples -->
            <div style="margin-top: 40px;">
                <h3 style="color: var(--text); margin-bottom: 20px;">Practical Examples</h3>
                
                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 280px; background: linear-gradient(145deg, var(--card), rgba(124, 77, 255, 0.05)); padding: 20px; border-radius: 12px; box-shadow: var(--shadow); border-left: 4px solid var(--accent);">
                        <h4 style="margin: 0 0 12px 0; color: var(--text); display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-money-bill-wave" style="color: var(--accent);"></i> Cash Basis Example
                        </h4>
                        <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
                            If a customer pays ₹10,000 in cash for goods in March, revenue is recorded in March only.
                        </p>
                    </div>

                    <div style="flex: 1; min-width: 280px; background: linear-gradient(145deg, var(--card), rgba(0, 229, 255, 0.05)); padding: 20px; border-radius: 12px; box-shadow: var(--shadow); border-left: 4px solid var(--brand-2);">
                        <h4 style="margin: 0 0 12px 0; color: var(--text); display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-calendar-check" style="color: var(--brand-2);"></i> Accrual Basis Example
                        </h4>
                        <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
                            If goods are delivered in March but payment received in April, revenue is recorded in March (earned).
                        </p>
                    </div>

                    <div style="flex: 1; min-width: 280px; background: var(--card); padding: 20px; border-radius: 12px; box-shadow: var(--shadow); border-left: 4px solid var(--brand);">
                        <h4 style="margin: 0 0 12px 0; color: var(--text); display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-project-diagram" style="color: var(--brand);"></i> Hybrid Basis Note
                        </h4>
                        <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
                            Use accrual for sales/AR and cash for petty cash to reduce admin complexity — keep the policy documented.
                        </p>
                    </div>
                </div>
            </div>
        </section>

    <!-- Key Terms Section -->
        <section>
            <h2>Key Terms</h2>
            <p style="font-size:1.05rem; color:var(--muted); line-height:1.7; margin-bottom: 30px;">
                Understanding these fundamental accounting terms is essential for mastering the concepts in this chapter.
                Click on any term to reveal its detailed definition.
            </p>

            <!-- Key Terms Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; margin-top: 20px;">
                
                <!-- Cash Basis Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-money-bill-wave" style="font-size: 1.5rem; color: var(--accent);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Cash Basis</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        An accounting method where revenue is recorded when cash is received, and expenses are recorded when cash is paid.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Key Characteristics:</strong><br>
                                • Simple to implement<br>
                                • No accounts receivable or payable<br>
                                • May not match revenues with expenses in the same period<br>
                                • Commonly used by small businesses and for personal finance
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--accent);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>

                <!-- Accrual Basis Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-calendar-check" style="font-size: 1.5rem; color: var(--brand-2);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Accrual Basis</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        An accounting method where revenue is recorded when earned, and expenses are recorded when incurred, regardless of cash flow.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Key Characteristics:</strong><br>
                                • Matches revenues with related expenses<br>
                                • Records accounts receivable and payable<br>
                                • Provides a more accurate financial picture<br>
                                • Required by GAAP for most businesses
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--brand-2);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>

                <!-- Double Entry System Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-balance-scale" style="font-size: 1.5rem; color: var(--brand);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Double Entry System</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        A fundamental accounting concept where every transaction affects at least two accounts, maintaining the accounting equation.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Key Principles:</strong><br>
                                • For every debit, there is a credit<br>
                                • Assets = Liabilities + Equity<br>
                                • Provides built-in error checking<br>
                                • Foundation of modern accounting
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--brand);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>

                <!-- GAAP Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-gavel" style="font-size: 1.5rem; color: var(--accent);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">GAAP</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        Generally Accepted Accounting Principles - a common set of accounting rules, standards, and procedures.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Key Aspects:</strong><br>
                                • Standardizes financial reporting<br>
                                • Enhances comparability between companies<br>
                                • Includes principles like revenue recognition<br>
                                • Used primarily in the United States
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--accent);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>

                <!-- IFRS Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-globe" style="font-size: 1.5rem; color: var(--brand-2);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">IFRS</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        International Financial Reporting Standards - global accounting standards for financial statements.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Key Aspects:</strong><br>
                                • Used in over 140 countries<br>
                                • Principles-based rather than rules-based<br>
                                • Aims for global accounting consistency<br>
                                • Issued by the International Accounting Standards Board
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--brand-2);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>

                <!-- Accounting Equation Card -->
                <div class="term-card" style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: var(--shadow);
                    border: 1px solid rgba(255,255,255,0.05);
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                " onclick="toggleTerm(this)">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                        <i class="fas fa-equals" style="font-size: 1.5rem; color: var(--brand);"></i>
                        <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Accounting Equation</h3>
                    </div>
                    <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
                        The fundamental equation that forms the foundation of double-entry bookkeeping: Assets = Liabilities + Equity.
                    </p>
                    <div class="term-details" style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        margin-top: 0;
                    ">
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                                <strong>Components:</strong><br>
                                • <strong>Assets:</strong> Resources owned by the business<br>
                                • <strong>Liabilities:</strong> Obligations to creditors<br>
                                • <strong>Equity:</strong> Owner's claim on assets<br>
                                • The equation must always balance
                            </p>
                        </div>
                    </div>
                    <div class="term-indicator" style="
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 3px;
                        background: var(--brand);
                        transform: scaleX(0);
                        transition: transform 0.3s ease;
                    "></div>
                </div>
            </div>

           
            <!-- JavaScript for interactive cards -->
            <script>
                function toggleTerm(card) {
                    const details = card.querySelector('.term-details');
                    const indicator = card.querySelector('.term-indicator');
                    
                    if (details.style.maxHeight === '0px' || !details.style.maxHeight) {
                        // Close any other open cards
                        document.querySelectorAll('.term-card').forEach(otherCard => {
                            if (otherCard !== card) {
                                otherCard.querySelector('.term-details').style.maxHeight = '0px';
                                otherCard.querySelector('.term-indicator').style.transform = 'scaleX(0)';
                                otherCard.style.background = 'var(--card)';
                            }
                        });
                        
                        // Open this card
                        details.style.maxHeight = details.scrollHeight + 'px';
                        indicator.style.transform = 'scaleX(1)';
                        card.style.background = 'linear-gradient(145deg, var(--card), rgba(255,255,255,0.05))';
                    } else {
                        // Close this card
                        details.style.maxHeight = '0px';
                        indicator.style.transform = 'scaleX(0)';
                        card.style.background = 'var(--card)';
                    }
                }
            </script>
        </section>

    <!-- Summary -->
        <section>
            <h2>Chapter Summary</h2>
            
            <div style="
                background: linear-gradient(135deg, rgba(124,77,255,0.1), rgba(0,229,255,0.1));
                border-radius: 16px;
                padding: 25px;
                margin-bottom: 30px;
                border-left: 5px solid var(--brand);
            ">
                <h3 style="
                    margin: 0 0 15px 0;
                    color: var(--text);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                ">
                    <i class="fas fa-lightbulb" style="color: var(--brand-2);"></i>
                    Key Learning Outcomes
                </h3>
                <p style="color: var(--muted); line-height: 1.7; margin: 0; font-size: 1.05rem;">
                    This chapter covered the systematic process of accounting and different bases for recording transactions. 
                    Understanding these concepts is fundamental to maintaining accurate financial records and preparing reliable financial statements.
                </p>
            </div>

            <!-- Two Column Layout for Key Points -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                
                <!-- Process of Accounting -->
                <div style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 25px;
                    box-shadow: var(--shadow);
                    border-left: 4px solid var(--accent);
                ">
                    <h3 style="
                        margin: 0 0 20px 0;
                        color: var(--text);
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        font-size: 1.2rem;
                    ">
                        <i class="fas fa-cogs" style="color: var(--accent);"></i>
                        Process of Accounting
                    </h3>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: var(--brand-2); margin: 0 0 10px 0; font-size: 1rem;">6-Step Sequential Process:</h4>
                        <ol style="color: var(--muted); line-height: 1.6; padding-left: 20px; margin: 0;">
                            <li><strong>Identification</strong> - Recognizing financial transactions</li>
                            <li><strong>Vouchers</strong> - Creating documentary evidence</li>
                            <li><strong>Books of Original Entry</strong> - First recording in journals</li>
                            <li><strong>Ledger</strong> - Classifying entries into accounts</li>
                            <li><strong>Trial Balance</strong> - Testing mathematical accuracy</li>
                            <li><strong>Financial Statements</strong> - Final presentation of results</li>
                        </ol>
                    </div>
                    
                    <div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 3px solid var(--accent);
                    ">
                        <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
                            <i class="fas fa-info-circle" style="color: var(--accent); margin-right: 8px;"></i>
                            <strong>Remember:</strong> Each step builds upon the previous one, ensuring systematic and accurate record-keeping.
                        </p>
                    </div>
                </div>

                <!-- Basis of Accounting -->
                <div style="
                    background: var(--card);
                    border-radius: 12px;
                    padding: 25px;
                    box-shadow: var(--shadow);
                    border-left: 4px solid var(--brand-2);
                ">
                    <h3 style="
                        margin: 0 0 20px 0;
                        color: var(--text);
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        font-size: 1.2rem;
                    ">
                        <i class="fas fa-balance-scale" style="color: var(--brand-2);"></i>
                        Basis of Accounting
                    </h3>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: var(--brand-2); margin: 0 0 10px 0; font-size: 1rem;">Three Main Bases:</h4>
                        <div style="space-y: 12px;">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: var(--accent);">Cash Basis:</strong>
                                <span style="color: var(--muted); display: block; margin-left: 15px; font-size: 0.9rem;">
                                    Records when cash is received/paid
                                </span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: var(--brand-2);">Accrual Basis:</strong>
                                <span style="color: var(--muted); display: block; margin-left: 15px; font-size: 0.9rem;">
                                    Records when earned/incurred (regardless of cash)
                                </span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: var(--brand);">Hybrid Basis:</strong>
                                <span style="color: var(--muted); display: block; margin-left: 15px; font-size: 0.9rem;">
                                    Mix of cash and accrual methods
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 3px solid var(--brand-2);
                    ">
                        <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
                            <i class="fas fa-star" style="color: var(--brand-2); margin-right: 8px;"></i>
                            <strong>Best Practice:</strong> Accrual basis provides the most accurate matching of revenues and expenses.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Key Formulas & Concepts -->
            <div style="
                background: var(--card);
                border-radius: 12px;
                padding: 25px;
                box-shadow: var(--shadow);
                margin-bottom: 30px;
                border-left: 4px solid var(--brand);
            ">
                <h3 style="
                    margin: 0 0 20px 0;
                    color: var(--text);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    font-size: 1.2rem;
                ">
                    <i class="fas fa-calculator" style="color: var(--brand);"></i>
                    Essential Formulas & Principles
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                    <!-- Accounting Equation -->
                    <div>
                        <h4 style="color: var(--brand-2); margin: 0 0 12px 0;">Fundamental Accounting Equation:</h4>
                        <div style="
                            background: linear-gradient(90deg, var(--brand), var(--brand-2));
                            color: white;
                            padding: 15px;
                            border-radius: 8px;
                            text-align: center;
                            font-size: 1.1rem;
                            font-weight: 700;
                            margin-bottom: 15px;
                        ">
                            ASSETS = CAPITAL + LIABILITIES
                        </div>
                        <p style="color: var(--muted); font-size: 0.9rem; margin: 0; line-height: 1.5;">
                            This equation must always balance and forms the basis of double-entry bookkeeping.
                        </p>
                    </div>

                    <!-- Double Entry Rules -->
                    <div>
                        <h4 style="color: var(--brand-2); margin: 0 0 12px 0;">Double Entry Rules:</h4>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div style="margin-bottom: 8px;">
                                <span style="color: var(--accent); font-weight: 600;">Personal A/c:</span>
                                <span style="color: var(--muted); font-size: 0.9rem;"> Dr. Receiver, Cr. Giver</span>
                            </div>
                            <div style="margin-bottom: 8px;">
                                <span style="color: var(--brand-2); font-weight: 600;">Real A/c:</span>
                                <span style="color: var(--muted); font-size: 0.9rem;"> Dr. What comes in, Cr. What goes out</span>
                            </div>
                            <div style="margin-bottom: 0;">
                                <span style="color: var(--brand); font-weight: 600;">Nominal A/c:</span>
                                <span style="color: var(--muted); font-size: 0.9rem;"> Dr. Expenses, Cr. Income</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comparison Table -->
            <div style="
                background: var(--card);
                border-radius: 12px;
                padding: 25px;
                box-shadow: var(--shadow);
                margin-bottom: 30px;
            ">
                <h3 style="
                    margin: 0 0 20px 0;
                    color: var(--text);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    font-size: 1.2rem;
                ">
                    <i class="fas fa-chart-bar" style="color: var(--brand-2);"></i>
                    Quick Comparison: Accounting Bases
                </h3>
                
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
                        <thead>
                            <tr style="background: linear-gradient(90deg, var(--brand), var(--brand-2));">
                                <th style="padding: 12px 16px; color: white; text-align: left; font-weight: 700;">Aspect</th>
                                <th style="padding: 12px 16px; color: white; text-align: left; font-weight: 700;">Cash Basis</th>
                                <th style="padding: 12px 16px; color: white; text-align: left; font-weight: 700;">Accrual Basis</th>
                                <th style="padding: 12px 16px; color: white; text-align: left; font-weight: 700;">Hybrid Basis</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: rgba(255,255,255,0.02);">
                                <td style="padding: 10px 16px; color: var(--text); font-weight: 600;">When to record</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Cash received/paid</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">When earned/incurred</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Mix as per policy</td>
                            </tr>
                            <tr style="background: rgba(255,255,255,0.01);">
                                <td style="padding: 10px 16px; color: var(--text); font-weight: 600;">Best for</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Small businesses</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Large entities</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Specific needs</td>
                            </tr>
                            <tr style="background: rgba(255,255,255,0.02);">
                                <td style="padding: 10px 16px; color: var(--text); font-weight: 600;">Accuracy</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">May misstate periods</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Most accurate</td>
                                <td style="padding: 10px 16px; color: var(--muted); font-size: 0.9rem;">Depends on mix</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Important Points -->
            <div style="
                background: linear-gradient(135deg, rgba(255,122,198,0.1), rgba(124,77,255,0.1));
                border-radius: 12px;
                padding: 25px;
                border-left: 4px solid var(--accent);
            ">
                <h3 style="
                    margin: 0 0 20px 0;
                    color: var(--text);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    font-size: 1.2rem;
                ">
                    <i class="fas fa-exclamation-triangle" style="color: var(--accent);"></i>
                    Remember These Key Points
                </h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 3px solid var(--brand-2);
                    ">
                        <h4 style="color: var(--brand-2); margin: 0 0 8px 0; font-size: 1rem;">Process Flow</h4>
                        <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
                            Always follow the 6-step process sequentially. Skipping steps can lead to errors and incomplete records.
                        </p>
                    </div>
                    
                    <div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 3px solid var(--accent);
                    ">
                        <h4 style="color: var(--accent); margin: 0 0 8px 0; font-size: 1rem;">Consistency</h4>
                        <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
                            Once you choose an accounting basis, apply it consistently throughout the accounting period.
                        </p>
                    </div>
                    
                    <div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 3px solid var(--brand);
                    ">
                        <h4 style="color: var(--brand); margin: 0 0 8px 0; font-size: 1rem;">Documentation</h4>
                        <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
                            Every transaction must have proper documentary evidence (vouchers) before recording.
                        </p>
                    </div>
                </div>
            </div>
        </section>

    <!-- MCQ Section -->
<section>
    <h2>Multiple Choice Questions</h2>
    <p style="color: var(--muted); line-height: 1.6; margin-bottom: 30px;">
        Test your understanding of the Process & Basis of Accounting concepts. Complete all 20 questions to see your results.
    </p>

    <!-- MCQ Container -->
            <div class="mcq-grid" id="mcq-container">
                
                <!-- Question 1 -->
                <div class="mcq" data-answer="b">
                    <h3>1. What is the first step in the accounting process?</h3>
                    <input type="radio" name="q1" id="q1a" value="a"><label for="q1a">Preparation of vouchers</label>
                    <input type="radio" name="q1" id="q1b" value="b"><label for="q1b">Identification of transactions</label>
                    <input type="radio" name="q1" id="q1c" value="c"><label for="q1c">Recording in journal</label>
                    <input type="radio" name="q1" id="q1d" value="d"><label for="q1d">Posting to ledger</label>
                </div>

                <!-- Question 2 -->
                <div class="mcq" data-answer="c">
                    <h3>2. Which accounting basis records revenue when cash is received?</h3>
                    <input type="radio" name="q2" id="q2a" value="a"><label for="q2a">Accrual basis</label>
                    <input type="radio" name="q2" id="q2b" value="b"><label for="q2b">Hybrid basis</label>
                    <input type="radio" name="q2" id="q2c" value="c"><label for="q2c">Cash basis</label>
                    <input type="radio" name="q2" id="q2d" value="d"><label for="q2d">Modified basis</label>
                </div>

                <!-- Question 3 -->
                <div class="mcq" data-answer="d">
                    <h3>3. Trial balance is prepared to check:</h3>
                    <input type="radio" name="q3" id="q3a" value="a"><label for="q3a">Business performance</label>
                    <input type="radio" name="q3" id="q3b" value="b"><label for="q3b">Cash flow</label>
                    <input type="radio" name="q3" id="q3c" value="c"><label for="q3c">Asset values</label>
                    <input type="radio" name="q3" id="q3d" value="d"><label for="q3d">Arithmetical accuracy</label>
                </div>

                <!-- Question 4 -->
                <div class="mcq" data-answer="a">
                    <h3>4. Under accrual basis, expenses are recorded when:</h3>
                    <input type="radio" name="q4" id="q4a" value="a"><label for="q4a">Incurred</label>
                    <input type="radio" name="q4" id="q4b" value="b"><label for="q4b">Cash is paid</label>
                    <input type="radio" name="q4" id="q4c" value="c"><label for="q4c">Invoice is received</label>
                    <input type="radio" name="q4" id="q4d" value="d"><label for="q4d">At year end</label>
                </div>

                <!-- Question 5 -->
                <div class="mcq" data-answer="c">
                    <h3>5. Books of original entry include:</h3>
                    <input type="radio" name="q5" id="q5a" value="a"><label for="q5a">Ledger accounts</label>
                    <input type="radio" name="q5" id="q5b" value="b"><label for="q5b">Trial balance</label>
                    <input type="radio" name="q5" id="q5c" value="c"><label for="q5c">Journal and cash book</label>
                    <input type="radio" name="q5" id="q5d" value="d"><label for="q5d">Balance sheet</label>
                </div>

                <!-- Question 6 -->
                <div class="mcq" data-answer="b">
                    <h3>6. What provides documentary evidence for transactions?</h3>
                    <input type="radio" name="q6" id="q6a" value="a"><label for="q6a">Ledger entries</label>
                    <input type="radio" name="q6" id="q6b" value="b"><label for="q6b">Vouchers</label>
                    <input type="radio" name="q6" id="q6c" value="c"><label for="q6c">Trial balance</label>
                    <input type="radio" name="q6" id="q6d" value="d"><label for="q6d">Financial statements</label>
                </div>

                <!-- Question 7 -->
                <div class="mcq" data-answer="a">
                    <h3>7. The accounting equation is:</h3>
                    <input type="radio" name="q7" id="q7a" value="a"><label for="q7a">Assets = Capital + Liabilities</label>
                    <input type="radio" name="q7" id="q7b" value="b"><label for="q7b">Assets = Capital - Liabilities</label>
                    <input type="radio" name="q7" id="q7c" value="c"><label for="q7c">Capital = Assets + Liabilities</label>
                    <input type="radio" name="q7" id="q7d" value="d"><label for="q7d">Liabilities = Assets + Capital</label>
                </div>

                <!-- Question 8 -->
                <div class="mcq" data-answer="c">
                    <h3>8. Which basis is preferred for accurate period reporting?</h3>
                    <input type="radio" name="q8" id="q8a" value="a"><label for="q8a">Cash basis</label>
                    <input type="radio" name="q8" id="q8b" value="b"><label for="q8b">Hybrid basis</label>
                    <input type="radio" name="q8" id="q8c" value="c"><label for="q8c">Accrual basis</label>
                    <input type="radio" name="q8" id="q8d" value="d"><label for="q8d">Modified cash basis</label>
                </div>

                <!-- Question 9 -->
                <div class="mcq" data-answer="d">
                    <h3>9. Ledger is used for:</h3>
                    <input type="radio" name="q9" id="q9a" value="a"><label for="q9a">First recording of transactions</label>
                    <input type="radio" name="q9" id="q9b" value="b"><label for="q9b">Checking accuracy</label>
                    <input type="radio" name="q9" id="q9c" value="c"><label for="q9c">Preparing vouchers</label>
                    <input type="radio" name="q9" id="q9d" value="d"><label for="q9d">Classification of entries into accounts</label>
                </div>

                <!-- Question 10 -->
                <div class="mcq" data-answer="b">
                    <h3>10. Small businesses commonly use which accounting basis?</h3>
                    <input type="radio" name="q10" id="q10a" value="a"><label for="q10a">Accrual basis</label>
                    <input type="radio" name="q10" id="q10b" value="b"><label for="q10b">Cash basis</label>
                    <input type="radio" name="q10" id="q10c" value="c"><label for="q10c">Hybrid basis</label>
                    <input type="radio" name="q10" id="q10d" value="d"><label for="q10d">Modified accrual</label>
                </div>

                <!-- Question 11 -->
                <div class="mcq" data-answer="c">
                    <h3>11. Financial statements include:</h3>
                    <input type="radio" name="q11" id="q11a" value="a"><label for="q11a">Journal and ledger</label>
                    <input type="radio" name="q11" id="q11b" value="b"><label for="q11b">Vouchers and bills</label>
                    <input type="radio" name="q11" id="q11c" value="c"><label for="q11c">Trading A/c, P&L A/c, Balance Sheet</label>
                    <input type="radio" name="q11" id="q11d" value="d"><label for="q11d">Cash book and bank book</label>
                </div>

                <!-- Question 12 -->
                <div class="mcq" data-answer="a">
                    <h3>12. Double entry system means:</h3>
                    <input type="radio" name="q12" id="q12a" value="a"><label for="q12a">Every transaction affects at least two accounts</label>
                    <input type="radio" name="q12" id="q12b" value="b"><label for="q12b">Recording twice in same account</label>
                    <input type="radio" name="q12" id="q12c" value="c"><label for="q12c">Using two different books</label>
                    <input type="radio" name="q12" id="q12d" value="d"><label for="q12d">Preparing two copies of entries</label>
                </div>

                <!-- Question 13 -->
                <div class="mcq" data-answer="d">
                    <h3>13. Hybrid basis of accounting:</h3>
                    <input type="radio" name="q13" id="q13a" value="a"><label for="q13a">Uses only cash basis</label>
                    <input type="radio" name="q13" id="q13b" value="b"><label for="q13b">Uses only accrual basis</label>
                    <input type="radio" name="q13" id="q13c" value="c"><label for="q13c">Is not allowed in accounting</label>
                    <input type="radio" name="q13" id="q13d" value="d"><label for="q13d">Combines cash and accrual methods</label>
                </div>

                <!-- Question 14 -->
                <div class="mcq" data-answer="b">
                    <h3>14. Which step comes after posting to ledger?</h3>
                    <input type="radio" name="q14" id="q14a" value="a"><label for="q14a">Identification of transactions</label>
                    <input type="radio" name="q14" id="q14b" value="b"><label for="q14b">Preparation of trial balance</label>
                    <input type="radio" name="q14" id="q14c" value="c"><label for="q14c">Recording in journal</label>
                    <input type="radio" name="q14" id="q14d" value="d"><label for="q14d">Preparation of vouchers</label>
                </div>

                <!-- Question 15 -->
                <div class="mcq" data-answer="c">
                    <h3>15. Cash basis accounting does NOT recognize:</h3>
                    <input type="radio" name="q15" id="q15a" value="a"><label for="q15a">Cash receipts</label>
                    <input type="radio" name="q15" id="q15b" value="b"><label for="q15b">Cash payments</label>
                    <input type="radio" name="q15" id="q15c" value="c"><label for="q15c">Accounts receivable</label>
                    <input type="radio" name="q15" id="q15d" value="d"><label for="q15d">Bank transactions</label>
                </div>

                <!-- Question 16 -->
                <div class="mcq" data-answer="a">
                    <h3>16. The main advantage of accrual basis is:</h3>
                    <input type="radio" name="q16" id="q16a" value="a"><label for="q16a">Matches revenues with related expenses</label>
                    <input type="radio" name="q16" id="q16b" value="b"><label for="q16b">Simpler to maintain</label>
                    <input type="radio" name="q16" id="q16c" value="c"><label for="q16c">Requires less documentation</label>
                    <input type="radio" name="q16" id="q16d" value="d"><label for="q16d">Shows only cash position</label>
                </div>

                <!-- Question 17 -->
                <div class="mcq" data-answer="d">
                    <h3>17. Which document is prepared first in the accounting process?</h3>
                    <input type="radio" name="q17" id="q17a" value="a"><label for="q17a">Trial balance</label>
                    <input type="radio" name="q17" id="q17b" value="b"><label for="q17b">Journal entry</label>
                    <input type="radio" name="q17" id="q17c" value="c"><label for="q17c">Ledger account</label>
                    <input type="radio" name="q17" id="q17d" value="d"><label for="q17d">Voucher</label>
                </div>

                <!-- Question 18 -->
                <div class="mcq" data-answer="b">
                    <h3>18. In the accounting equation, if assets increase by ₹5,000 and liabilities increase by ₹2,000, capital will:</h3>
                    <input type="radio" name="q18" id="q18a" value="a"><label for="q18a">Decrease by ₹3,000</label>
                    <input type="radio" name="q18" id="q18b" value="b"><label for="q18b">Increase by ₹3,000</label>
                    <input type="radio" name="q18" id="q18c" value="c"><label for="q18c">Remain unchanged</label>
                    <input type="radio" name="q18" id="q18d" value="d"><label for="q18d">Increase by ₹7,000</label>
                </div>

                <!-- Question 19 -->
                <div class="mcq" data-answer="c">
                    <h3>19. Which accounting basis may misstate period profit?</h3>
                    <input type="radio" name="q19" id="q19a" value="a"><label for="q19a">Accrual basis</label>
                    <input type="radio" name="q19" id="q19b" value="b"><label for="q19b">Modified accrual</label>
                    <input type="radio" name="q19" id="q19c" value="c"><label for="q19c">Cash basis</label>
                    <input type="radio" name="q19" id="q19d" value="d"><label for="q19d">Hybrid basis</label>
                </div>

                <!-- Question 20 -->
                <div class="mcq" data-answer="a">
                    <h3>20. The final step in the accounting process is:</h3>
                    <input type="radio" name="q20" id="q20a" value="a"><label for="q20a">Preparation of financial statements</label>
                    <input type="radio" name="q20" id="q20b" value="b"><label for="q20b">Trial balance preparation</label>
                    <input type="radio" name="q20" id="q20c" value="c"><label for="q20c">Posting to ledger</label>
                    <input type="radio" name="q20" id="q20d" value="d"><label for="q20d">Recording in journal</label>
                </div>
            </div>

           <!-- ✅ CHANGED: Added onclick handler -->
            <button id="submitQuiz" onclick="submitQuiz()">Submit Answers</button>
            <div id="quizResult"></div>
            
            <!-- ✅ CHANGED: Added onclick and style -->
            <button id="retry-btn" onclick="retryQuiz()" style="display:none;">Try Again</button>
        </section>

        <script type="module">
        // ========================================
        // 1. IMPORT FIREBASE (ONLY THIS LINE NEEDS EXTERNAL FILE)
        // ========================================
        import { submitLessonAttempt, loadPreviousAnswers } from '../firebase-config.js';

        // ========================================
        // 2. CONFIGURATION (CHANGE FOR EACH LESSON)
        // ========================================
        const LESSON_NUMBER = '1';  // ← Change this: '1', '2', '3', etc.
        const LESSON_ID = 'lesson-1'; // ← Change this: 'lesson-1', 'lesson-2', etc.

        // ========================================
        // 3. INITIALIZE QUIZ
        // ========================================
        function initQuiz() {
        console.log('🎯 Initializing quiz for Lesson', LESSON_NUMBER);
        
        const container = document.getElementById('quiz-container');
        if (!container) {
            console.error('❌ Quiz container not found');
            return;
        }

        // Add event listeners to all radio buttons
        const allInputs = container.querySelectorAll('input[type="radio"]');
        allInputs.forEach(input => {
            // UPDATE PROGRESS BAR ON CHANGE
            input.addEventListener('change', updateProgressBar);
            
            // ✨ ADD UNCLICK FUNCTIONALITY ✨
            input.addEventListener('click', function(e) {
            // If already checked, uncheck it
            if (this.dataset.checked === 'true') {
                this.checked = false;
                this.dataset.checked = 'false';
                updateProgressBar(); // Update progress after unclick
            } else {
                // Mark all radios in this group as unchecked
                const groupName = this.name;
                document.querySelectorAll(`input[name="${groupName}"]`).forEach(radio => {
                radio.dataset.checked = 'false';
                });
                // Mark this one as checked
                this.dataset.checked = 'true';
            }
            });
        });

        console.log('✅ Quiz initialized with', allInputs.length, 'options');
        updateProgressBar();
        }

        // ========================================
        // 4. UPDATE PROGRESS BAR (REAL-TIME)
        // ========================================
        function updateProgressBar() {
        const container = document.getElementById('quiz-container');
        if (!container) return;

        // Count total questions
        const allQuestions = container.querySelectorAll('.mcq');
        const totalQuestions = allQuestions.length;

        // Count answered questions
        let answeredCount = 0;
        allQuestions.forEach(mcq => {
            const questionName = mcq.querySelector('input[type="radio"]').name;
            const selected = document.querySelector(`input[name="${questionName}"]:checked`);
            if (selected) answeredCount++;
        });

        // Calculate progress percentage
        const progressPercentage = totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0;

        // Update progress bar UI
        const progressDiv = document.getElementById('quiz-progress');
        if (progressDiv) {
            progressDiv.innerHTML = `
            <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: var(--muted);">
                <span>Questions Answered</span>
                <span><strong style="color: var(--brand-2);">${answeredCount}/${totalQuestions}</strong></span>
                </div>
                <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                <div style="width: ${progressPercentage}%; height: 100%; background: linear-gradient(90deg, var(--brand), var(--brand-2)); transition: width 0.3s ease;"></div>
                </div>
            </div>
            `;
        }

        console.log(`📊 Progress: ${answeredCount}/${totalQuestions} (${progressPercentage}%)`);
        }

        // ========================================
        // 5. SUBMIT QUIZ (BULLETPROOF VERSION)
        // ========================================
        window.submitQuiz = async function() {
        console.log('📤 Submitting quiz for Lesson', LESSON_NUMBER);
        
        const container = document.getElementById('quiz-container');
        if (!container) return;

        const mcqs = container.querySelectorAll('.mcq');
        if (mcqs.length === 0) return;

        let answersData = {};
        let correctCount = 0;
        let totalQuestions = mcqs.length;
        let answeredCount = 0;

        mcqs.forEach((mcq, index) => {
            const correctAnswer = mcq.dataset.answer;
            const questionNumber = `q${index + 1}`;
            const inputs = mcq.querySelectorAll('input[type="radio"]');
            const questionName = inputs[0].name;
            const selected = document.querySelector(`input[name="${questionName}"]:checked`);

            if (!selected) return;

            answeredCount++;
            const selectedValue = selected.value;
            const isCorrect = selectedValue === correctAnswer;
            if (isCorrect) correctCount++;

            answersData[questionNumber] = {
            selected: selectedValue,
            correct: correctAnswer,
            isCorrect: isCorrect
            };

            inputs.forEach(input => {
            const label = input.nextElementSibling;
            if (!label) return;
            input.disabled = true;
            if (input.value === correctAnswer) {
                label.style.background = 'linear-gradient(90deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1))';
                label.style.borderLeft = '4px solid #10b981';
                label.style.fontWeight = 'bold';
            }
            if (input.value === selectedValue && !isCorrect) {
                label.style.background = 'linear-gradient(90deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1))';
                label.style.borderLeft = '4px solid #ef4444';
            }
            });
        });

        if (answeredCount === 0) {
            alert('⚠️ Please answer at least 1 question before submitting!');
            return;
        }

        const percentage = Math.round((correctCount / totalQuestions) * 100);
        const submitBtn = document.getElementById('submitQuiz');
        const resultDiv = document.getElementById('quizResult');

        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
        }

        // Show loading state
        if (resultDiv) {
            resultDiv.innerHTML = `
            <div style="padding: 20px; margin-top: 20px; background: rgba(124,77,255,0.1); border-radius: 12px; text-align: center;">
                <div style="font-size: 1.2rem; color: var(--brand-2);">⚙️ Saving your progress...</div>
            </div>`;
        }

        try {
            console.log("📤 Submitting to Firebase:", { lessonNumber: LESSON_NUMBER, correctCount, totalQuestions, percentage });
            const result = await submitLessonAttempt(LESSON_NUMBER, answersData, correctCount, totalQuestions);
            console.log("✅ Firebase response:", result);

            // ALWAYS show result, even if Firebase fails
            if (resultDiv) {
            if (result && result.success) {
                if (result.updated) {
                // New best score!
                resultDiv.innerHTML = `
                    <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-radius: 12px; border: 2px solid #10b981;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #10b981; margin-bottom: 10px;">🎉 New Best Score!</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                    <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                    <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">✅ Progress saved to cloud</div>
                    </div>`;
                } else {
                // Previous score was better
                resultDiv.innerHTML = `
                    <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.1)); border-radius: 12px; border: 2px solid #fbbf24;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #fbbf24; margin-bottom: 10px;">📊 Quiz Completed</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">Current Score: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                    <div style="font-size: 1.1rem; margin-bottom: 10px; color: #10b981;">Your Best: <strong>${result.bestScore}/${result.totalQuestions}</strong> (${result.percentage}%)</div>
                    <div style="color: var(--muted); font-size: 0.9rem;">Answered ${answeredCount} out of ${totalQuestions} questions</div>
                    <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">💡 Try again to beat your best score!</div>
                    </div>`;
                }
            } else {
                // Firebase failed but still show score
                resultDiv.innerHTML = `
                <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                    <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                    <div style="color: #fbbf24; font-size: 0.85rem; margin-top: 10px;">⚠️ Could not save to cloud. Check console (F12) for details.</div>
                </div>`;
                console.error("❌ Firebase error:", result?.error || "Unknown error");
            }
            }
        } catch (error) {
            console.error("❌ Critical error during submission:", error);
            // STILL show the score even if everything fails
            if (resultDiv) {
            resultDiv.innerHTML = `
                <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
                <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                <div style="color: #ef4444; font-size: 0.85rem; margin-top: 10px;">❌ Error: ${error.message}</div>
                <div style="color: var(--muted); font-size: 0.8rem; margin-top: 5px;">Check browser console (F12) for details</div>
                </div>`;
            }
        } finally {
            // Always show retry button and update submit button
            const retryBtn = document.getElementById('retry-btn');
            if (retryBtn) retryBtn.style.display = 'block';
            if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = '✓ Submitted';
            }
        }
        };

        // ========================================
        // 6. RETRY QUIZ
        // ========================================
        window.retryQuiz = function() {
        console.log('🔄 Retrying quiz');
        
        const container = document.getElementById('quiz-container');
        if (!container) return;

        // Reset all inputs
        const allInputs = container.querySelectorAll('input[type="radio"]');
        allInputs.forEach(input => {
            input.checked = false;
            input.disabled = false;
            input.dataset.checked = 'false'; // Reset unclick tracking
            
            const label = input.nextElementSibling;
            if (label) {
            label.style.background = '';
            label.style.borderLeft = '';
            label.style.fontWeight = '';
            }
        });

        // Reset UI
        const resultDiv = document.getElementById('quizResult');
        if (resultDiv) resultDiv.innerHTML = '';

        const submitBtn = document.getElementById('submitQuiz');
        if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.textContent = 'Submit Answers';
        }

        const retryBtn = document.getElementById('retry-btn');
        if (retryBtn) retryBtn.style.display = 'none';

        updateProgressBar();
        document.getElementById('mcqSection')?.scrollIntoView({ behavior: 'smooth' });
        };

        // ========================================
        // 7. INITIALIZE ON PAGE LOAD
        // ========================================
        initQuiz();
        console.log('✅ Lesson', LESSON_NUMBER, 'quiz ready!');
        
        (() => {
        const $ = sel => document.querySelector(sel);
        const $$ = sel => Array.from(document.querySelectorAll(sel));

        /* Animation CSS injection */
        const css = `
            @keyframes shakeX {
            0%,100%{transform:translateX(0)}
            20%{transform:translateX(-8px)}
            40%{transform:translateX(8px)}
            60%{transform:translateX(-6px)}
            80%{transform:translateX(6px)}
            }
            .aw-shake{animation:shakeX 0.4s ease}
            .aw-pop{animation:popIn 0.35s ease both}
            @keyframes popIn {
            0%{opacity:0;transform:translateY(10px) scale(.96)}
            60%{opacity:1;transform:translateY(-4px) scale(1.02)}
            100%{opacity:1;transform:translateY(0) scale(1)}
            }
        `;
        const st = document.createElement("style");
        st.textContent = css;
        document.head.appendChild(st);

        /* Card Animation System - Clean Version */
        class CardAnimator {
            constructor() {
            this.observer = null;
            this.init();
            }

            init() {
            // Fix content visibility and table issues first
            this.fixContentIssues();
            
            // Then add animations
            setTimeout(() => {
                this.addAnimationClasses();
                this.setupObserver();
                this.animateOnLoad();
            }, 100);
            }

            fixContentIssues() {
            // Remove horizontal scroll from tables
            $$('table').forEach(table => {
                table.style.minWidth = 'auto';
                table.style.width = '100%';
                table.style.tableLayout = 'fixed';
                
                // Fix parent container overflow
                let parent = table.parentElement;
                if (parent && parent.style.overflow === 'auto') {
                parent.style.overflow = 'visible';
                parent.style.overflowX = 'visible';
                }
            });

            // Fix all overflow containers
            $$('[style*="overflow: auto"]').forEach(container => {
                container.style.overflow = 'visible';
                container.style.overflowX = 'visible';
            });

            // Ensure all content is visible
            $$('h3, p, ul, li, div').forEach(el => {
                if (!el.classList.contains('term-details')) {
                el.style.visibility = 'visible';
                el.style.opacity = '1';
                }
            });
            }

            addAnimationClasses() {
            // Process flow cards (6 step cards)
            $$('[style*="padding: 20px"][style*="text-align: center"][style*="min-width: 160px"]').forEach(card => {
                card.classList.add('animate-card', 'process-card');
            });

            // Basis cards (3 main accounting basis cards)
            $$('[style*="min-width: 280px"][style*="max-width: 320px"][style*="padding: 24px"]').forEach(card => {
                card.classList.add('animate-card', 'basis-card');
            });

            // Example cards (practical examples section)
            $$('[style*="flex: 1; min-width: 280px"][style*="padding: 20px"]').forEach(card => {
                card.classList.add('animate-card', 'example-card');
            });

            // Summary cards (all cards with border-left styling)
            $$('[style*="border-left: 4px solid"]').forEach(card => {
                card.classList.add('animate-card', 'summary-card');
            });

            // Key terms cards
            $$('.term-card').forEach(card => {
                card.classList.add('animate-card', 'term-card');
            });

            // Special intro card
            $$('[style*="background:rgba(255,255,255,0.04)"]').forEach(card => {
                card.classList.add('animate-card', 'intro-card');
            });

            // Table rows
            $$('tbody tr').forEach(row => {
                row.classList.add('animate-table-row');
            });
            }

            setupObserver() {
            const options = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            this.observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Ensure content is always visible
                    entry.target.style.opacity = '1';
                    entry.target.style.visibility = 'visible';
                    this.observer.unobserve(entry.target);
                }
                });
            }, options);

            // Observe all animated elements
            $$('.animate-card, .animate-table-row').forEach(card => {
                this.observer.observe(card);
            });
            }

            animateOnLoad() {
            // Show intro section immediately
            setTimeout(() => {
                const introSection = $('section:first-of-type');
                if (introSection) {
                introSection.querySelectorAll('.animate-card').forEach(card => {
                    card.classList.add('visible');
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                });
                }
            }, 300);

            // Show cards that are in viewport
            setTimeout(() => {
                $$('.animate-card').forEach(card => {
                const rect = card.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    card.classList.add('visible');
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                }
                });
            }, 600);
            }
        }

        /* Enhanced Hover Effects */
        function addHoverEffects() {
            $$('.animate-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transition = 'all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)';
                const colors = ['var(--brand)', 'var(--brand-2)', 'var(--accent)'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                card.style.boxShadow = `0 25px 50px rgba(2,6,23,.8), 0 0 30px ${randomColor}40`;
            });

            card.addEventListener('mouseleave', () => {
                card.style.boxShadow = 'var(--shadow)';
            });
            });
        }

        /* Term Card Toggle Function */
        window.toggleTerm = function(card) {
            const details = card.querySelector('.term-details');
            const indicator = card.querySelector('.term-indicator');
            
            if (details.style.maxHeight === '0px' || !details.style.maxHeight) {
            // Close other cards
            $$('.term-card').forEach(otherCard => {
                if (otherCard !== card) {
                otherCard.querySelector('.term-details').style.maxHeight = '0px';
                otherCard.querySelector('.term-indicator').style.transform = 'scaleX(0)';
                otherCard.style.background = 'var(--card)';
                }
            });
            
            // Open this card
            details.style.maxHeight = details.scrollHeight + 'px';
            indicator.style.transform = 'scaleX(1)';
            card.style.background = 'linear-gradient(145deg, var(--card), rgba(255,255,255,0.05))';
            } else {
            // Close this card
            details.style.maxHeight = '0px';
            indicator.style.transform = 'scaleX(0)';
            card.style.background = 'var(--card)';
            }
        };

        /* Initialize Everything */
        function initialize() {
            // Initialize card animations
            const animator = new CardAnimator();
            
            // Add hover effects
            setTimeout(() => {
            addHoverEffects();
            }, 500);

            console.log('Card animations loaded successfully!');
        }

        /* Event Listeners */
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }

        // Emergency content fix
        window.addEventListener('load', () => {
            setTimeout(() => {
            $$('h3, p, ul, li, div').forEach(el => {
                if (!el.classList.contains('term-details') && getComputedStyle(el).opacity === '0') {
                el.style.opacity = '1';
                el.style.visibility = 'visible';
                }
            });
            }, 1000);
        });
        })();
</script>
  </main>
</body>
</html>
