<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Chapter 6 – Accounting Equation | AccountsWizard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="main.css">
  <style>
    :root {
      --bg: #0b1020;
      --bg-2: #0f1733;
      --card: #111633;
      --muted: #b8c2ff;
      --brand: #7c4dff;
      --brand-2: #00e5ff;
      --accent: #ff7ac6;
      --text: #e9eefc;
      --radius: 16px;
      --shadow: 0 18px 40px rgba(2,6,23,.55);
      --speed: 300ms;
    }
    
    * { box-sizing: border-box; }
    
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, Roboto, Arial;
      color: var(--text);
      background: linear-gradient(180deg, var(--bg), var(--bg-2));
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }
    
    header { text-align: center; padding: 30px 20px; }
    
    .lesson-title {
      font-size: 2.2rem; font-weight: 900;
      background: linear-gradient(90deg,#fff,var(--accent));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    
    .breadcrumb { color: var(--muted); font-size: .95rem; }
    .breadcrumb a { color: inherit; text-decoration: none; }
    .breadcrumb a:hover { color: var(--text); }
    
    .nav-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 24px; background: var(--card); border-radius: var(--radius);
      margin-bottom: 32px; box-shadow: var(--shadow);
    }
    
    .nav-header a {
      color: var(--muted); text-decoration: none; display: flex; align-items: center;
      gap: 8px; padding: 8px 16px; border-radius: 8px; transition: all var(--speed);
    }
    
    .nav-header a:hover { color: var(--text); background: rgba(255,255,255,.1); }
    
    section {
      background: var(--card); border-radius: var(--radius);
      padding: 32px; margin-bottom: 32px; box-shadow: var(--shadow);
      overflow: visible;
    }
    
    section h2 {
      margin-top: 0; font-size: 1.5rem;
      background: linear-gradient(90deg,#fff,var(--brand-2));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    
    section p { line-height: 1.6; color: var(--muted); }

    /* Card Animation Styles */
    .animate-card {
      opacity: 1;
      transform: translateY(0) scale(1);
      transition: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    .animate-card.animate-pending {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
    }

    .animate-card.animate-pending.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .animate-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 25px 50px rgba(2,6,23,.8) !important;
    }

    .animate-card:nth-child(1) { transition-delay: 0.1s; }
    .animate-card:nth-child(2) { transition-delay: 0.2s; }
    .animate-card:nth-child(3) { transition-delay: 0.3s; }
    .animate-card:nth-child(4) { transition-delay: 0.4s; }
    .animate-card:nth-child(5) { transition-delay: 0.5s; }
    .animate-card:nth-child(6) { transition-delay: 0.6s; }

    .process-card {
      opacity: 0;
      transform: translateX(-40px) rotateY(15deg);
      transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .process-card.visible {
      opacity: 1;
      transform: translateX(0) rotateY(0deg);
    }

    .process-card:hover {
      transform: translateY(-12px) scale(1.05);
      box-shadow: 0 20px 40px rgba(124, 77, 255, 0.4);
    }

    .equation-card {
      opacity: 0;
      transform: translateY(50px) rotateX(20deg);
      transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .equation-card.visible {
      opacity: 1;
      transform: translateY(0) rotateX(0deg);
    }

    .equation-card:hover {
      transform: translateY(-15px) scale(1.05);
      box-shadow: 0 30px 60px rgba(0, 229, 255, 0.3);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .animate-card:hover i {
      animation: float 2s ease-in-out infinite;
    }

    @keyframes pulse-border {
      0% { box-shadow: 0 0 0 0 rgba(124, 77, 255, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(124, 77, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(124, 77, 255, 0); }
    }

    .animate-card:hover {
      animation: pulse-border 1.5s infinite;
    }

    .animate-table-row {
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease;
    }

    .animate-table-row.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .animate-table-row:hover {
      background: rgba(255,255,255,0.08) !important;
      transform: translateX(5px);
    }

    /* Responsive */
    @media (max-width: 768px) {
      section[style*="grid-template-columns"] {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
      }
      
      table {
        font-size: 0.85rem !important;
        width: 100% !important;
        min-width: auto !important;
        table-layout: fixed !important;
      }
      
      th, td {
        padding: 8px 12px !important;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
    }

    /* Key Terms Cards */
    .term-card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,0.05);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .term-details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
      margin-top: 0;
    }

    .term-indicator {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--accent);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    /* Table fixes */
    table {
      width: 100% !important;
      min-width: auto !important;
      table-layout: fixed !important;
      overflow-wrap: break-word;
    }

    table th, table td {
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      min-width: 0;
    }

    div[style*="overflow: auto"] {
      overflow: visible !important;
      overflow-x: visible !important;
    }
  </style>
</head>
<body>
  <div class="nav-header">
    <a href="../index.html"><i class="fa-solid fa-house"></i><span>Home</span></a>
    <a href="../lessons.html"><i class="fa-solid fa-book"></i><span>All Lessons</span></a>
  </div>

  <header>
    <h1 class="lesson-title">Accounting Equation</h1>
    <div class="breadcrumb">
      <a href="../index.html">Home</a> / 
      <a href="../lessons.html">Lessons</a> / 
      Accounting Equation
    </div>
  </header>

  <main>

    <!-- Introduction Section -->
    <section>
      <h2>Introduction</h2>
      <p style="font-size:1.1rem; line-height:1.8; color: var(--muted);">
        The accounting equation is the fundamental principle that underlies all of 
        <strong>double-entry bookkeeping</strong>. It states that a company's 
        <strong>assets</strong> must always equal the sum of its <strong>liabilities</strong> 
        and <strong>owner's equity</strong>. This equation forms the foundation of the 
        balance sheet and ensures that all financial transactions maintain perfect balance.
      </p>

      <div style="
        margin-top:20px; 
        padding:20px; 
        border-radius:12px; 
        background:rgba(255,255,255,0.04);
        box-shadow: var(--shadow); 
        text-align:center;">
        <i class="fas fa-balance-scale" style="font-size:2rem; color:var(--brand-2); margin-bottom:10px;"></i>
        <h3 style="margin:10px 0; color: var(--text);">Why This Chapter Matters?</h3>
        <p style="color:var(--muted); font-size:0.95rem; line-height:1.6;">
          Understanding the accounting equation is crucial for analyzing financial health, 
          preparing accurate financial statements, and making informed business decisions.
        </p>
      </div>
    </section>

    <!-- The Basic Equation -->
    <section>
      <h2>The Basic Accounting Equation</h2>
      <p style="font-size:1.05rem; color:var(--muted); line-height:1.7;">
        The accounting equation is expressed as: <strong>Assets = Liabilities + Owner's Equity</strong>. 
        This equation must always remain in balance, meaning that any change to one side 
        must be offset by an equivalent change to maintain equality.
      </p>

      <!-- Equation Display -->
      <div style="
        display: flex; 
        justify-content: center; 
        align-items: center; 
        flex-wrap: wrap; 
        gap: 25px; 
        margin: 40px 0;">
        
        <!-- Assets -->
        <div style="min-width: 200px; padding: 30px 20px; border-radius: 16px; background: linear-gradient(145deg, var(--card), rgba(124, 77, 255, 0.1)); text-align: center; box-shadow: var(--shadow); border: 2px solid var(--brand);">
          <i class="fas fa-building" style="font-size:2.5rem; color:var(--brand); margin-bottom: 15px;"></i>
          <h3 style="margin:10px 0; color:var(--text); font-size: 1.4rem;">ASSETS</h3>
          <p style="font-size:0.9rem; color:var(--muted); margin: 0;">Resources owned by the business</p>
        </div>

        <div style="font-size:2.5rem; color:var(--accent); font-weight: bold; align-self:center;">=</div>

        <!-- Liabilities -->
        <div style="min-width: 200px; padding: 30px 20px; border-radius: 16px; background: linear-gradient(145deg, var(--card), rgba(0, 229, 255, 0.1)); text-align: center; box-shadow: var(--shadow); border: 2px solid var(--brand-2);">
          <i class="fas fa-file-invoice-dollar" style="font-size:2.5rem; color:var(--brand-2); margin-bottom: 15px;"></i>
          <h3 style="margin:10px 0; color:var(--text); font-size: 1.4rem;">LIABILITIES</h3>
          <p style="font-size:0.9rem; color:var(--muted); margin: 0;">Debts owed to creditors</p>
        </div>

        <div style="font-size:2.5rem; color:var(--accent); font-weight: bold; align-self:center;">+</div>

        <!-- Owner's Equity -->
        <div style="min-width: 200px; padding: 30px 20px; border-radius: 16px; background: linear-gradient(145deg, var(--card), rgba(255, 122, 198, 0.1)); text-align: center; box-shadow: var(--shadow); border: 2px solid var(--accent);">
          <i class="fas fa-user-tie" style="font-size:2.5rem; color:var(--accent); margin-bottom: 15px;"></i>
          <h3 style="margin:10px 0; color:var(--text); font-size: 1.4rem;">OWNER'S EQUITY</h3>
          <p style="font-size:0.9rem; color:var(--muted); margin: 0;">Owner's claim on assets</p>
        </div>
      </div>

      <!-- Detailed Explanation -->
      <div style="margin-top:40px;">
        <h3 style="color:var(--text);">Understanding Each Component</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
          
          <div style="padding: 20px; background: rgba(124, 77, 255, 0.05); border-radius: 12px; border-left: 4px solid var(--brand);">
            <h4 style="color: var(--brand); margin: 0 0 12px 0;">Assets</h4>
            <ul style="color: var(--muted); margin: 0; line-height: 1.6;">
              <li>Cash and cash equivalents</li>
              <li>Accounts receivable</li>
              <li>Inventory and supplies</li>
              <li>Property, plant & equipment</li>
              <li>Investments</li>
            </ul>
          </div>

          <div style="padding: 20px; background: rgba(0, 229, 255, 0.05); border-radius: 12px; border-left: 4px solid var(--brand-2);">
            <h4 style="color: var(--brand-2); margin: 0 0 12px 0;">Liabilities</h4>
            <ul style="color: var(--muted); margin: 0; line-height: 1.6;">
              <li>Accounts payable</li>
              <li>Short-term loans</li>
              <li>Long-term debt</li>
              <li>Accrued expenses</li>
              <li>Unearned revenue</li>
            </ul>
          </div>

          <div style="padding: 20px; background: rgba(255, 122, 198, 0.05); border-radius: 12px; border-left: 4px solid var(--accent);">
            <h4 style="color: var(--accent); margin: 0 0 12px 0;">Owner's Equity</h4>
            <ul style="color: var(--muted); margin: 0; line-height: 1.6;">
              <li>Initial capital investment</li>
              <li>Retained earnings</li>
              <li>Revenue (increases equity)</li>
              <li>Expenses (decreases equity)</li>
              <li>Owner withdrawals</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Expanded Accounting Equation -->
    <section>
      <h2>Expanded Accounting Equation</h2>
      <p style="font-size:1.03rem; color:var(--muted); line-height:1.7;">
        The basic accounting equation can be expanded to show the components of owner's equity 
        in more detail. This expanded form helps understand how business operations affect 
        the financial position.
      </p>

      <!-- Expanded Equation Display -->
      <div style="
        background: linear-gradient(135deg, rgba(124,77,255,0.1), rgba(0,229,255,0.1));
        border-radius: 16px;
        padding: 30px;
        margin: 30px 0;
        text-align: center;
        border: 2px solid var(--brand);
      ">
        <h3 style="color: var(--text); margin-bottom: 20px;">Expanded Equation</h3>
        <div style="
          font-size: 1.3rem;
          font-weight: 700;
          color: var(--text);
          line-height: 1.8;
          word-spacing: 8px;
        ">
          <span style="color: var(--brand);">ASSETS</span> = 
          <span style="color: var(--brand-2);">LIABILITIES</span> + 
          <span style="color: var(--accent);">CAPITAL</span> + 
          <span style="color: #4ade80;">REVENUE</span> - 
          <span style="color: #f87171;">EXPENSES</span> - 
          <span style="color: #fbbf24;">DRAWINGS</span>
        </div>
      </div>

      <!-- Component Explanations -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-top: 30px;">
        
        <div style="padding: 24px; border-radius: 12px; background: linear-gradient(145deg, var(--card), rgba(76, 222, 128, 0.05)); box-shadow: var(--shadow); border-left: 4px solid #4ade80;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
            <i class="fas fa-chart-line" style="font-size:1.8rem; color:#4ade80;"></i>
            <h4 style="margin: 0; color: var(--text);">Revenue</h4>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
            Income earned from business operations like sales, service fees, and interest income. 
            Revenue increases owner's equity.
          </p>
        </div>

        <div style="padding: 24px; border-radius: 12px; background: linear-gradient(145deg, var(--card), rgba(248, 113, 113, 0.05)); box-shadow: var(--shadow); border-left: 4px solid #f87171;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
            <i class="fas fa-chart-line-down" style="font-size:1.8rem; color:#f87171;"></i>
            <h4 style="margin: 0; color: var(--text);">Expenses</h4>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
            Costs incurred to generate revenue, including rent, salaries, utilities, and supplies. 
            Expenses decrease owner's equity.
          </p>
        </div>

        <div style="padding: 24px; border-radius: 12px; background: linear-gradient(145deg, var(--card), rgba(251, 191, 36, 0.05)); box-shadow: var(--shadow); border-left: 4px solid #fbbf24;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
            <i class="fas fa-hand-holding-dollar" style="font-size:1.8rem; color:#fbbf24;"></i>
            <h4 style="margin: 0; color: var(--text);">Drawings</h4>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.6;">
            Assets withdrawn by the owner for personal use. Drawings reduce both assets 
            and owner's equity but are not business expenses.
          </p>
        </div>
      </div>
    </section>

    <!-- Practical Examples -->
    <section>
      <h2>Practical Examples</h2>
      <p style="font-size:0.95rem; color:var(--muted); line-height:1.6;">
        Each transaction is recorded step by step. After every transaction the Accounting Equation is updated and checked:
        <strong>Assets = Liabilities + Owner's Equity</strong>.
      </p>

      <div style="display: grid; gap:36px; margin-top: 20px;">

        <!-- EXAMPLE 1 -->
        <div style="padding:18px; background:var(--card); border-radius:12px; box-shadow:var(--shadow); border-left:4px solid var(--brand);">
          <h4 style="color:var(--brand); margin:0 0 10px 0;">Example 1 — Mr. Arjun</h4>

          <p style="color:var(--text); font-size:0.88rem; margin-bottom:10px;">
            Record the following transactions and prepare the accounting equation table after each transaction.
          </p>

          <ol style="color:var(--muted); font-size:0.88rem; margin:0 0 14px 18px;">
            <li>Commenced business with Cash ₹1,50,000.</li>
            <li>Purchased Furniture ₹30,000 (paid by Cash).</li>
            <li>Purchased Machinery ₹40,000 (paid by Cash).</li>
            <li>Purchased Goods ₹60,000 — 40% by Cash, 60% on Credit.</li>
            <li>Sold Goods costing ₹20,000 for ₹28,000 (40% profit) — half Cash, half Credit.</li>
            <li>Paid Rent ₹5,000 (Cash).</li>
            <li>Paid Salary ₹8,000 (Cash).</li>
            <li>Received Commission ₹6,000 (Cash).</li>
            <li>Owner withdrew Cash ₹10,000 and Goods worth ₹5,000 for personal use.</li>
          </ol>

          <div style="overflow-x:auto;">
            <table style="width:100%; font-size:0.82rem; border-collapse:collapse; text-align:center; background:rgba(255,255,255,0.02);">
              <thead style="background:rgba(255,255,255,0.04);">
                <tr>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); text-align:left;">No.</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); text-align:left;">Transactions</th>
                  <th colspan="6" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--brand);">Assets</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09);">=</th>
                  <th colspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--brand-2);">Liabilities</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09);">+</th>
                  <th colspan="1" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--accent);">Capital</th>
                </tr>
                <tr>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Cash</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Furniture</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Machinery</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Stock</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Debtors</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Building</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Creditors</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Security Deposits</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Capital</th>
                </tr>
              </thead>

              <tbody style="color:var(--text);">

                <!-- T1 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(1)</td>
                  <td style="text-align:left; padding:8px;">Started business</td>
                  <td>1,50,000</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td>
                  <td>=</td>
                  <td>-</td><td>-</td>
                  <td>+</td>
                  <td>1,50,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,50,000</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>1,50,000</td>
                </tr>

                <!-- T2 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(2)</td>
                  <td style="text-align:left; padding:8px;">Purchased Furniture ₹30,000 (by Cash)</td>
                  <td>-30,000</td><td>+30,000</td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,20,000</td><td>30,000</td><td>0</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>1,50,000</td>
                </tr>

                <!-- T3 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(3)</td>
                  <td style="text-align:left; padding:8px;">Purchased Machinery ₹40,000 (by Cash)</td>
                  <td>-40,000</td><td></td><td>+40,000</td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>80,000</td><td>30,000</td><td>40,000</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>1,50,000</td>
                </tr>

                <!-- T4 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(4)</td>
                  <td style="text-align:left; padding:8px;">Purchased Goods ₹60,000 (40% Cash = ₹24,000; Creditors = ₹36,000)</td>
                  <td>-24,000</td><td></td><td></td><td>+60,000</td><td></td><td></td>
                  <td></td>
                  <td>+36,000</td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>56,000</td><td>30,000</td><td>40,000</td><td>60,000</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,50,000</td>
                </tr>

                <!-- T5 (Sale with profit %) -->
                <tr>
                  <td style="text-align:left; padding:8px;">(5)</td>
                  <td style="text-align:left; padding:8px;">Sold Goods (Cost ₹20,000) for ₹28,000 — Profit 40% = ₹8,000 (½ Cash = ₹14,000, ½ Credit = ₹14,000)</td>
                  <td>+14,000</td><td></td><td></td><td>-20,000</td><td>+14,000</td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>+8,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>70,000</td><td>30,000</td><td>40,000</td><td>40,000</td><td>14,000</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,58,000</td>
                </tr>

                <!-- T6 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(6)</td>
                  <td style="text-align:left; padding:8px;">Paid Rent ₹5,000 (Cash)</td>
                  <td>-5,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-5,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>65,000</td><td>30,000</td><td>40,000</td><td>40,000</td><td>14,000</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,53,000</td>
                </tr>

                <!-- T7 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(7)</td>
                  <td style="text-align:left; padding:8px;">Paid Salary ₹8,000 (Cash)</td>
                  <td>-8,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-8,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>57,000</td><td>30,000</td><td>40,000</td><td>40,000</td><td>14,000</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,45,000</td>
                </tr>

                <!-- T8 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(8)</td>
                  <td style="text-align:left; padding:8px;">Commission Received ₹6,000 (Cash)</td>
                  <td>+6,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>+6,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>63,000</td><td>30,000</td><td>40,000</td><td>40,000</td><td>14,000</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,51,000</td>
                </tr>

                <!-- T9 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(9)</td>
                  <td style="text-align:left; padding:8px;">Owner withdrew Cash ₹10,000 and Goods ₹5,000</td>
                  <td>-10,000</td><td></td><td></td><td>-5,000</td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-15,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.04); font-weight:600;">
                  <td style="padding:8px; text-align:left;"></td>
                  <td style="padding:8px; text-align:left;"><strong>Final Equation</strong></td>
                  <td>53,000</td><td>30,000</td><td>40,000</td><td>35,000</td><td>14,000</td><td>0</td>
                  <td>=</td>
                  <td>36,000</td><td>0</td>
                  <td>+</td>
                  <td>1,36,000</td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>

        <!-- EXAMPLE 2 -->
        <div style="padding:18px; background:var(--card); border-radius:12px; box-shadow:var(--shadow); border-left:4px solid var(--brand-2);">
          <h4 style="color:var(--brand-2); margin:0 0 10px 0;">Example 2 — Mr. Rohit</h4>

          <p style="color:var(--text); font-size:0.88rem; margin-bottom:10px;">
            Record the following transactions and update the accounting equation after each step.
          </p>

          <ol style="color:var(--muted); font-size:0.88rem; margin:0 0 14px 18px;">
            <li>Commenced business with Cash ₹2,50,000.</li>
            <li>Purchased Furniture ₹40,000 (Cash).</li>
            <li>Purchased Machinery ₹60,000 (Cash).</li>
            <li>Purchased Goods ₹1,00,000 — 40% Cash, 60% Credit.</li>
            <li>Sold Goods costing ₹40,000 at 25% profit → SP ₹50,000 (½ Cash, ½ Credit).</li>
            <li>Paid Wages ₹6,000 (Cash).</li>
            <li>Paid Rent ₹10,000 (Cash).</li>
            <li>Commission received ₹12,000 (Cash).</li>
            <li>Owner withdrew Cash ₹15,000 and Goods ₹10,000.</li>
          </ol>

          <div style="overflow-x:auto;">
            <table style="width:100%; font-size:0.82rem; border-collapse:collapse; text-align:center; background:rgba(255,255,255,0.02);">
              <thead style="background:rgba(255,255,255,0.04);">
                <tr>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); text-align:left;">No.</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); text-align:left;">Transactions</th>
                  <th colspan="6" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--brand);">Assets</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09);">=</th>
                  <th colspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--brand-2);">Liabilities</th>
                  <th rowspan="2" style="padding:8px; border:1px solid rgba(255,255,255,0.09);">+</th>
                  <th colspan="1" style="padding:8px; border:1px solid rgba(255,255,255,0.09); color:var(--accent);">Capital</th>
                </tr>
                <tr>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Cash</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Furniture</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Machinery</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Stock</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Debtors</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Building</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Creditors</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Security Deposits</th>
                  <th style="padding:6px; border:1px solid rgba(255,255,255,0.06);">Capital</th>
                </tr>
              </thead>

              <tbody style="color:var(--text);">

                <!-- T1 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(1)</td>
                  <td style="text-align:left; padding:8px;">Started business</td>
                  <td>2,50,000</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td>
                  <td>=</td>
                  <td>-</td><td>-</td>
                  <td>+</td>
                  <td>2,50,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>2,50,000</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>2,50,000</td>
                </tr>

                <!-- T2 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(2)</td>
                  <td style="text-align:left; padding:8px;">Purchased Furniture ₹40,000 (by Cash)</td>
                  <td>-40,000</td><td>+40,000</td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>2,10,000</td><td>40,000</td><td>0</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>2,50,000</td>
                </tr>

                <!-- T3 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(3)</td>
                  <td style="text-align:left; padding:8px;">Purchased Machinery ₹60,000 (by Cash)</td>
                  <td>-60,000</td><td></td><td>+60,000</td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,50,000</td><td>40,000</td><td>60,000</td><td>0</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>0</td><td>0</td>
                  <td>+</td>
                  <td>2,50,000</td>
                </tr>

                <!-- T4 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(4)</td>
                  <td style="text-align:left; padding:8px;">Purchased Goods ₹1,00,000 (40% Cash = ₹40,000; Creditors = ₹60,000)</td>
                  <td>-40,000</td><td></td><td></td><td>+1,00,000</td><td></td><td></td>
                  <td></td>
                  <td>+60,000</td><td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,10,000</td><td>40,000</td><td>60,000</td><td>1,00,000</td><td>0</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,50,000</td>
                </tr>

                <!-- T5 (Sale with profit %) -->
                <tr>
                  <td style="text-align:left; padding:8px;">(5)</td>
                  <td style="text-align:left; padding:8px;">Sold Goods (Cost ₹40,000) at 25% profit → SP ₹50,000 (Profit ₹10,000). Half Cash = ₹25,000, Half Credit = ₹25,000</td>
                  <td>+25,000</td><td></td><td></td><td>-40,000</td><td>+25,000</td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>+10,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,35,000</td><td>40,000</td><td>60,000</td><td>60,000</td><td>25,000</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,60,000</td>
                </tr>

                <!-- T6 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(6)</td>
                  <td style="text-align:left; padding:8px;">Paid Wages ₹6,000 (Cash)</td>
                  <td>-6,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-6,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,29,000</td><td>40,000</td><td>60,000</td><td>60,000</td><td>25,000</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,54,000</td>
                </tr>

                <!-- T7 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(7)</td>
                  <td style="text-align:left; padding:8px;">Paid Rent ₹10,000 (Cash)</td>
                  <td>-10,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-10,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,19,000</td><td>40,000</td><td>60,000</td><td>60,000</td><td>25,000</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,44,000</td>
                </tr>

                <!-- T8 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(8)</td>
                  <td style="text-align:left; padding:8px;">Commission Received ₹12,000 (Cash)</td>
                  <td>+12,000</td><td></td><td></td><td></td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>+12,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.02);">
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"></td>
                  <td style="padding:6px; font-size:0.78rem; text-align:left;"><strong>New Equation</strong></td>
                  <td>1,31,000</td><td>40,000</td><td>60,000</td><td>60,000</td><td>25,000</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,56,000</td>
                </tr>

                <!-- T9 -->
                <tr>
                  <td style="text-align:left; padding:8px;">(9)</td>
                  <td style="text-align:left; padding:8px;">Owner withdrew Cash ₹15,000 and Goods ₹10,000</td>
                  <td>-15,000</td><td></td><td></td><td>-10,000</td><td></td><td></td>
                  <td></td>
                  <td></td><td></td>
                  <td></td>
                  <td>-25,000</td>
                </tr>
                <tr style="background:rgba(255,255,255,0.04); font-weight:600;">
                  <td style="padding:8px; text-align:left;"></td>
                  <td style="padding:8px; text-align:left;"><strong>Final Equation</strong></td>
                  <td>1,16,000</td><td>40,000</td><td>60,000</td><td>50,000</td><td>25,000</td><td>0</td>
                  <td>=</td>
                  <td>60,000</td><td>0</td>
                  <td>+</td>
                  <td>2,31,000</td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>

      </div>
    </section>


    <!-- Key Terms Section -->
    <section>
      <h2>Key Terms</h2>
      <p style="font-size:1.05rem; color:var(--muted); line-height:1.7; margin-bottom: 30px;">
        Understanding these fundamental terms is essential for mastering the accounting equation.
        Click on any term to reveal its detailed definition.
      </p>

      <!-- Key Terms Grid -->
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; margin-top: 20px;">
        
        <!-- Assets Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-building" style="font-size: 1.5rem; color: var(--brand);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Assets</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            Resources owned or controlled by a business that have economic value and can provide future benefits.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Types of Assets:</strong><br>
                • <strong>Current Assets:</strong> Cash, inventory, accounts receivable<br>
                • <strong>Non-current Assets:</strong> Property, equipment, investments<br>
                • <strong>Tangible Assets:</strong> Physical items like buildings, machinery<br>
                • <strong>Intangible Assets:</strong> Patents, trademarks, goodwill
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--brand);"></div>
        </div>

        <!-- Liabilities Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-file-invoice-dollar" style="font-size: 1.5rem; color: var(--brand-2);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Liabilities</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            Debts or obligations that a business owes to external parties, requiring future payment or service.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Types of Liabilities:</strong><br>
                • <strong>Current Liabilities:</strong> Accounts payable, short-term loans<br>
                • <strong>Long-term Liabilities:</strong> Mortgages, bonds, long-term debt<br>
                • <strong>Contingent Liabilities:</strong> Potential obligations from lawsuits<br>
                • <strong>Accrued Liabilities:</strong> Wages payable, interest payable
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--brand-2);"></div>
        </div>

        <!-- Owner's Equity Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-user-tie" style="font-size: 1.5rem; color: var(--accent);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Owner's Equity</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            The owner's residual claim on business assets after all liabilities have been paid.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Components:</strong><br>
                • <strong>Capital:</strong> Initial investment by owner<br>
                • <strong>Retained Earnings:</strong> Accumulated profits<br>
                • <strong>Revenue:</strong> Increases equity<br>
                • <strong>Expenses & Drawings:</strong> Decrease equity
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--accent);"></div>
        </div>

        <!-- Double Entry Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-balance-scale" style="font-size: 1.5rem; color: var(--brand);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Double Entry</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            A bookkeeping system where every transaction affects at least two accounts to maintain the accounting equation balance.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Key Principles:</strong><br>
                • Every transaction has equal debits and credits<br>
                • The accounting equation always stays balanced<br>
                • Provides automatic error-checking mechanism<br>
                • Forms basis of all modern accounting systems
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--brand);"></div>
        </div>

        <!-- Balance Sheet Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-file-contract" style="font-size: 1.5rem; color: var(--brand-2);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Balance Sheet</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            A financial statement that shows the accounting equation at a specific point in time.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Structure:</strong><br>
                • <strong>Assets:</strong> Listed in order of liquidity<br>
                • <strong>Liabilities:</strong> Current then long-term<br>
                • <strong>Equity:</strong> Capital and retained earnings<br>
                • Must always balance (Assets = Liabilities + Equity)
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--brand-2);"></div>
        </div>

        <!-- Capital Card -->
        <div class="term-card" onclick="toggleTerm(this)">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
            <i class="fas fa-coins" style="font-size: 1.5rem; color: var(--accent);"></i>
            <h3 style="margin: 0; color: var(--text); font-size: 1.2rem;">Capital</h3>
          </div>
          <p style="color: var(--muted); font-size: 0.95rem; margin: 0; line-height: 1.5;">
            The owner's initial investment in the business, representing their stake in the company.
          </p>
          <div class="term-details">
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <p style="color: var(--muted); font-size: 0.9rem; line-height: 1.6; margin: 0;">
                <strong>Characteristics:</strong><br>
                • Can be in form of cash, assets, or services<br>
                • Increases owner's equity<br>
                • Represents permanent investment<br>
                • Different from loans (no repayment obligation)
              </p>
            </div>
          </div>
          <div class="term-indicator" style="background: var(--accent);"></div>
        </div>
      </div>
    </section>

    <!-- Chapter Summary -->
    <section>
      <h2>Chapter Summary</h2>
      
      <div style="
        background: linear-gradient(135deg, rgba(124,77,255,0.1), rgba(0,229,255,0.1));
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 30px;
        border-left: 5px solid var(--brand);
      ">
        <h3 style="
          margin: 0 0 15px 0;
          color: var(--text);
          display: flex;
          align-items: center;
          gap: 10px;
        ">
          <i class="fas fa-lightbulb" style="color: var(--brand-2);"></i>
          Key Learning Outcomes
        </h3>
        <p style="color: var(--muted); line-height: 1.7; margin: 0; font-size: 1.05rem;">
          This chapter covered the fundamental accounting equation and its expanded form. 
          Understanding this equation is crucial for financial analysis, transaction recording, 
          and preparing accurate financial statements.
        </p>
      </div>

      <!-- Two Column Layout for Key Points -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        
        <!-- Basic Equation -->
        <div style="
          background: var(--card);
          border-radius: 12px;
          padding: 25px;
          box-shadow: var(--shadow);
          border-left: 4px solid var(--brand);
        ">
          <h3 style="
            margin: 0 0 20px 0;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
          ">
            <i class="fas fa-equals" style="color: var(--brand);"></i>
            Basic Equation
          </h3>
          
          <div style="
            background: linear-gradient(90deg, var(--brand), var(--brand-2));
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
          ">
            ASSETS = LIABILITIES + EQUITY
          </div>
          
          <div style="
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--brand);
          ">
            <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
              <i class="fas fa-info-circle" style="color: var(--brand); margin-right: 8px;"></i>
              <strong>Remember:</strong> This equation must always balance after every transaction.
            </p>
          </div>
        </div>

        <!-- Expanded Equation -->
        <div style="
          background: var(--card);
          border-radius: 12px;
          padding: 25px;
          box-shadow: var(--shadow);
          border-left: 4px solid var(--brand-2);
        ">
          <h3 style="
            margin: 0 0 20px 0;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
          ">
            <i class="fas fa-expand-arrows-alt" style="color: var(--brand-2);"></i>
            Expanded Form
          </h3>
          
          <div style="margin-bottom: 20px; font-size: 0.9rem; line-height: 1.8; color: var(--muted);">
            <div><strong style="color: var(--brand);">Assets</strong> = <strong style="color: var(--brand-2);">Liabilities</strong> +</div>
            <div style="margin-left: 20px;">
              <strong style="color: var(--accent);">Capital</strong> + 
              <strong style="color: #4ade80;">Revenue</strong> -
            </div>
            <div style="margin-left: 20px;">
              <strong style="color: #f87171;">Expenses</strong> - 
              <strong style="color: #fbbf24;">Drawings</strong>
            </div>
          </div>
          
          <div style="
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--brand-2);
          ">
            <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
              <i class="fas fa-star" style="color: var(--brand-2); margin-right: 8px;"></i>
              <strong>Key Insight:</strong> Shows how business operations affect owner's equity.
            </p>
          </div>
        </div>
      </div>

      <!-- Important Points -->
      <div style="
        background: linear-gradient(135deg, rgba(255,122,198,0.1), rgba(124,77,255,0.1));
        border-radius: 12px;
        padding: 25px;
        border-left: 4px solid var(--accent);
      ">
        <h3 style="
          margin: 0 0 20px 0;
          color: var(--text);
          display: flex;
          align-items: center;
          gap: 10px;
          font-size: 1.2rem;
        ">
          <i class="fas fa-exclamation-triangle" style="color: var(--accent);"></i>
          Remember These Key Points
        </h3>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
          <div style="
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--brand);
          ">
            <h4 style="color: var(--brand); margin: 0 0 8px 0; font-size: 1rem;">Balance Principle</h4>
            <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
              The equation must always balance. Every transaction affects at least two accounts.
            </p>
          </div>
          
          <div style="
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--brand-2);
          ">
            <h4 style="color: var(--brand-2); margin: 0 0 8px 0; font-size: 1rem;">Double Entry</h4>
            <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
              Every debit must equal credits, maintaining the fundamental equation balance.
            </p>
          </div>
          
          <div style="
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent);
          ">
            <h4 style="color: var(--accent); margin: 0 0 8px 0; font-size: 1rem;">Financial Position</h4>
            <p style="color: var(--muted); margin: 0; font-size: 0.9rem; line-height: 1.5;">
              The equation shows the financial position of a business at any given time.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- MCQ Section -->
    <section>
      <h2>Multiple Choice Questions</h2>
      <p style="color: var(--muted); line-height: 1.6; margin-bottom: 30px;">
        Test your understanding of the Accounting Equation concepts. Complete all 15 questions to see your results.
      </p>

      <!-- MCQ Container -->
      <div class="mcq-grid" id="quiz-container">
        
        <!-- Question 1 -->
        <div class="mcq" data-answer="b">
          <h3>1. What is the basic accounting equation?</h3>
          <input type="radio" name="q1" id="q1a" value="a"><label for="q1a">Assets = Liabilities - Owner's Equity</label>
          <input type="radio" name="q1" id="q1b" value="b"><label for="q1b">Assets = Liabilities + Owner's Equity</label>
          <input type="radio" name="q1" id="q1c" value="c"><label for="q1c">Assets + Liabilities = Owner's Equity</label>
          <input type="radio" name="q1" id="q1d" value="d"><label for="q1d">Assets - Owner's Equity = Liabilities</label>
        </div>

        <!-- Question 2 -->
        <div class="mcq" data-answer="c">
          <h3>2. Which of the following is an asset?</h3>
          <input type="radio" name="q2" id="q2a" value="a"><label for="q2a">Bank loan</label>
          <input type="radio" name="q2" id="q2b" value="b"><label for="q2b">Accounts payable</label>
          <input type="radio" name="q2" id="q2c" value="c"><label for="q2c">Cash</label>
          <input type="radio" name="q2" id="q2d" value="d"><label for="q2d">Capital</label>
        </div>

        <!-- Question 3 -->
        <div class="mcq" data-answer="a">
          <h3>3. Owner's equity increases when:</h3>
          <input type="radio" name="q3" id="q3a" value="a"><label for="q3a">Revenue is earned</label>
          <input type="radio" name="q3" id="q3b" value="b"><label for="q3b">Expenses are incurred</label>
          <input type="radio" name="q3" id="q3c" value="c"><label for="q3c">Owner makes drawings</label>
          <input type="radio" name="q3" id="q3d" value="d"><label for="q3d">Liabilities increase</label>
        </div>

        <!-- Question 4 -->
        <div class="mcq" data-answer="d">
          <h3>4. Which is NOT a liability?</h3>
          <input type="radio" name="q4" id="q4a" value="a"><label for="q4a">Bank loan</label>
          <input type="radio" name="q4" id="q4b" value="b"><label for="q4b">Accounts payable</label>
          <input type="radio" name="q4" id="q4c" value="c"><label for="q4c">Wages payable</label>
          <input type="radio" name="q4" id="q4d" value="d"><label for="q4d">Equipment</label>
        </div>

        <!-- Question 5 -->
        <div class="mcq" data-answer="b">
          <h3>5. If assets are ₹100,000 and liabilities are ₹30,000, owner's equity is:</h3>
          <input type="radio" name="q5" id="q5a" value="a"><label for="q5a">₹130,000</label>
          <input type="radio" name="q5" id="q5b" value="b"><label for="q5b">₹70,000</label>
          <input type="radio" name="q5" id="q5c" value="c"><label for="q5c">₹30,000</label>
          <input type="radio" name="q5" id="q5d" value="d"><label for="q5d">₹100,000</label>
        </div>

        <!-- Question 6 -->
        <div class="mcq" data-answer="c">
          <h3>6. The expanded accounting equation includes:</h3>
          <input type="radio" name="q6" id="q6a" value="a"><label for="q6a">Only assets and liabilities</label>
          <input type="radio" name="q6" id="q6b" value="b"><label for="q6b">Assets, liabilities, and capital only</label>
          <input type="radio" name="q6" id="q6c" value="c"><label for="q6c">Assets, liabilities, capital, revenue, expenses, and drawings</label>
          <input type="radio" name="q6" id="q6d" value="d"><label for="q6d">Only revenue and expenses</label>
        </div>

        <!-- Question 7 -->
        <div class="mcq" data-answer="a">
          <h3>7. When a business purchases equipment for cash, what happens to the accounting equation?</h3>
          <input type="radio" name="q7" id="q7a" value="a"><label for="q7a">Total assets remain the same</label>
          <input type="radio" name="q7" id="q7b" value="b"><label for="q7b">Total assets increase</label>
          <input type="radio" name="q7" id="q7c" value="c"><label for="q7c">Total assets decrease</label>
          <input type="radio" name="q7" id="q7d" value="d"><label for="q7d">Liabilities increase</label>
        </div>

        <!-- Question 8 -->
        <div class="mcq" data-answer="b">
          <h3>8. Drawings by the owner:</h3>
          <input type="radio" name="q8" id="q8a" value="a"><label for="q8a">Increase owner's equity</label>
          <input type="radio" name="q8" id="q8b" value="b"><label for="q8b">Decrease owner's equity</label>
          <input type="radio" name="q8" id="q8c" value="c"><label for="q8c">Increase liabilities</label>
          <input type="radio" name="q8" id="q8d" value="d"><label for="q8d">Have no effect on the equation</label>
        </div>

        <!-- Question 9 -->
        <div class="mcq" data-answer="d">
          <h3>9. The accounting equation forms the basis of:</h3>
          <input type="radio" name="q9" id="q9a" value="a"><label for="q9a">Income statement</label>
          <input type="radio" name="q9" id="q9b" value="b"><label for="q9b">Cash flow statement</label>
          <input type="radio" name="q9" id="q9c" value="c"><label for="q9c">Statement of changes in equity</label>
          <input type="radio" name="q9" id="q9d" value="d"><label for="q9d">Balance sheet</label>
        </div>

        <!-- Question 10 -->
        <div class="mcq" data-answer="c">
          <h3>10. If a business takes a loan of ₹50,000:</h3>
          <input type="radio" name="q10" id="q10a" value="a"><label for="q10a">Assets decrease, liabilities increase</label>
          <input type="radio" name="q10" id="q10b" value="b"><label for="q10b">Assets and equity both increase</label>
          <input type="radio" name="q10" id="q10c" value="c"><label for="q10c">Assets and liabilities both increase</label>
          <input type="radio" name="q10" id="q10d" value="d"><label for="q10d">Only liabilities increase</label>
        </div>

        <!-- Question 11 -->
        <div class="mcq" data-answer="c">
          <h3>11. If Assets are ₹1,50,000 and Liabilities are ₹60,000, Capital will be:</h3>
          <input type="radio" name="q11" id="q11a" value="a"><label for="q11a">₹2,10,000</label>
          <input type="radio" name="q11" id="q11b" value="b"><label for="q11b">₹60,000</label>
          <input type="radio" name="q11" id="q11c" value="c"><label for="q11c">₹90,000</label>
          <input type="radio" name="q11" id="q11d" value="d"><label for="q11d">₹1,50,000</label>
        </div>

        <!-- Question 12 -->
        <div class="mcq" data-answer="b">
          <h3>12. Assets ₹2,40,000, Capital ₹1,80,000. Find Liabilities.</h3>
          <input type="radio" name="q12" id="q12a" value="a"><label for="q12a">₹2,40,000</label>
          <input type="radio" name="q12" id="q12b" value="b"><label for="q12b">₹60,000</label>
          <input type="radio" name="q12" id="q12c" value="c"><label for="q12c">₹4,20,000</label>
          <input type="radio" name="q12" id="q12d" value="d"><label for="q12d">₹1,80,000</label>
        </div>

        <!-- Question 13 -->
        <div class="mcq" data-answer="a">
          <h3>13. If Capital is ₹70,000 and Liabilities are ₹30,000, find Assets.</h3>
          <input type="radio" name="q13" id="q13a" value="a"><label for="q13a">₹1,00,000</label>
          <input type="radio" name="q13" id="q13b" value="b"><label for="q13b">₹70,000</label>
          <input type="radio" name="q13" id="q13c" value="c"><label for="q13c">₹30,000</label>
          <input type="radio" name="q13" id="q13d" value="d"><label for="q13d">₹40,000</label>
        </div>

        <!-- Question 14 -->
        <div class="mcq" data-answer="a">
          <h3>14. Assets ₹3,50,000, Liabilities ₹90,000. Capital = ?</h3>
          <input type="radio" name="q14" id="q14a" value="a"><label for="q14a">₹2,60,000</label>
          <input type="radio" name="q14" id="q14b" value="b"><label for="q14b">₹90,000</label>
          <input type="radio" name="q14" id="q14c" value="c"><label for="q14c">₹4,40,000</label>
          <input type="radio" name="q14" id="q14d" value="d"><label for="q14d">₹3,50,000</label>
        </div>

        <!-- Question 15 -->
        <div class="mcq" data-answer="d">
          <h3>15. A firm has Capital ₹1,20,000 and Liabilities ₹80,000. Its Assets are:</h3>
          <input type="radio" name="q15" id="q15a" value="a"><label for="q15a">₹40,000</label>
          <input type="radio" name="q15" id="q15b" value="b"><label for="q15b">₹1,20,000</label>
          <input type="radio" name="q15" id="q15c" value="c"><label for="q15c">₹80,000</label>
          <input type="radio" name="q15" id="q15d" value="d"><label for="q15d">₹2,00,000</label>
        </div>

        <!-- Question 16 -->
        <div class="mcq" data-answer="b">
          <h3>16. If Assets = ₹5,00,000 and Capital = ₹3,50,000, then Liabilities = ?</h3>
          <input type="radio" name="q16" id="q16a" value="a"><label for="q16a">₹8,50,000</label>
          <input type="radio" name="q16" id="q16b" value="b"><label for="q16b">₹1,50,000</label>
          <input type="radio" name="q16" id="q16c" value="c"><label for="q16c">₹3,50,000</label>
          <input type="radio" name="q16" id="q16d" value="d"><label for="q16d">₹5,00,000</label>
        </div>

        <!-- Question 17 -->
        <div class="mcq" data-answer="a">
          <h3>17. Opening Capital ₹80,000, further Capital introduced ₹20,000, profit earned ₹15,000, and Drawings ₹10,000. Closing Capital = ?</h3>
          <input type="radio" name="q17" id="q17a" value="a"><label for="q17a">₹1,05,000</label>
          <input type="radio" name="q17" id="q17b" value="b"><label for="q17b">₹1,15,000</label>
          <input type="radio" name="q17" id="q17c" value="c"><label for="q17c">₹95,000</label>
          <input type="radio" name="q17" id="q17d" value="d"><label for="q17d">₹80,000</label>
        </div>

        <!-- Question 18 -->
        <div class="mcq" data-answer="c">
          <h3>18. Assets ₹2,00,000, Liabilities ₹70,000. After earning profit of ₹30,000, Capital will be:</h3>
          <input type="radio" name="q18" id="q18a" value="a"><label for="q18a">₹70,000</label>
          <input type="radio" name="q18" id="q18b" value="b"><label for="q18b">₹1,00,000</label>
          <input type="radio" name="q18" id="q18c" value="c"><label for="q18c">₹1,60,000</label>
          <input type="radio" name="q18" id="q18d" value="d"><label for="q18d">₹2,00,000</label>
        </div>

        <!-- Question 19 -->
        <div class="mcq" data-answer="b">
          <h3>19. If Capital is ₹2,40,000, Liabilities ₹1,60,000. Assets = ?</h3>
          <input type="radio" name="q19" id="q19a" value="a"><label for="q19a">₹80,000</label>
          <input type="radio" name="q19" id="q19b" value="b"><label for="q19b">₹4,00,000</label>
          <input type="radio" name="q19" id="q19c" value="c"><label for="q19c">₹2,40,000</label>
          <input type="radio" name="q19" id="q19d" value="d"><label for="q19d">₹1,60,000</label>
        </div>

        <!-- Question 20 -->
        <div class="mcq" data-answer="d">
          <h3>20. Assets ₹1,80,000, Liabilities ₹50,000. After owner withdraws ₹20,000, Capital = ?</h3>
          <input type="radio" name="q20" id="q20a" value="a"><label for="q20a">₹1,80,000</label>
          <input type="radio" name="q20" id="q20b" value="b"><label for="q20b">₹1,50,000</label>
          <input type="radio" name="q20" id="q20c" value="c"><label for="q20c">₹1,30,000</label>
          <input type="radio" name="q20" id="q20d" value="d"><label for="q20d">₹1,10,000</label>
        </div>
        </div>

      <!-- ✅ CHANGED: Added onclick handler -->
      <button id="submitQuiz" onclick="submitQuiz()">Submit Answers</button>
      <div id="quizResult"></div>
      
      <!-- ✅ CHANGED: Added onclick and style -->
      <button id="retry-btn" onclick="retryQuiz()" style="display:none;">Try Again</button>
      </section>

    <!-- Practical Examples Section -->
        <section>
      <h2>Practical Example Questions</h2>
      <p style="color: var(--muted); line-height: 1.6;">
        Solve the following questions and prepare the Accounting Equation table for each.
      </p>

      <!-- Practical Example 1 -->
      <div style="padding:20px; margin:20px 0; background:rgba(255,255,255,0.03); border-radius:12px;">
        <h4 style="color:var(--brand)">Question 1</h4>
        <ul style="color:var(--muted); line-height:1.6;">
          <li>(i) Started business with Cash ₹1,50,000.</li>
          <li>(ii) Purchased Furniture ₹30,000.</li>
          <li>(iii) Purchased Goods ₹50,000 (₹20,000 cash, ₹30,000 credit).</li>
          <li>(iv) Sold Goods costing ₹25,000 for ₹40,000 (half cash, half credit).</li>
          <li>(v) Paid Rent ₹5,000.</li>
          <li>(vi) Owner withdrew ₹10,000 cash for personal use.</li>
        </ul>
      </div>

      <!-- Practical Example 2 -->
      <div style="padding:20px; margin:20px 0; background:rgba(255,255,255,0.03); border-radius:12px;">
        <h4 style="color:var(--brand)">Question 2</h4>
        <ul style="color:var(--muted); line-height:1.6;">
          <li>(i) Started business with Cash ₹2,00,000 and Machinery ₹50,000.</li>
          <li>(ii) Deposited ₹80,000 into Bank.</li>
          <li>(iii) Purchased Goods ₹70,000 (₹35,000 cheque, ₹35,000 credit).</li>
          <li>(iv) Sold Goods costing ₹30,000 for ₹45,000 (on credit).</li>
          <li>(v) Paid Salary ₹6,000 and Wages ₹4,000.</li>
          <li>(vi) Commission received ₹5,000.</li>
          <li>(vii) Withdrew Cash ₹15,000 for personal use.</li>
        </ul>
      </div>

      <!-- Practical Example 3 -->
      <div style="padding:20px; margin:20px 0; background:rgba(255,255,255,0.03); border-radius:12px;">
        <h4 style="color:var(--brand)">Question 3</h4>
        <ul style="color:var(--muted); line-height:1.6;">
          <li>(i) Started business with Cash ₹1,00,000 and Stock ₹40,000.</li>
          <li>(ii) Purchased Furniture ₹20,000.</li>
          <li>(iii) Bought Goods ₹60,000 (₹30,000 cash, ₹30,000 credit).</li>
          <li>(iv) Sold Goods costing ₹20,000 for ₹28,000 (cash).</li>
          <li>(v) Paid Rent ₹4,000 and Advertisement Expenses ₹6,000.</li>
          <li>(vi) Received ₹10,000 from a Debtor.</li>
          <li>(vii) Owner withdrew Goods worth ₹5,000 for personal use.</li>
        </ul>
      </div>

      <!-- Practical Example 4 -->
      <div style="padding:20px; margin:20px 0; background:rgba(255,255,255,0.03); border-radius:12px;">
        <h4 style="color:var(--brand)">Question 4</h4>
        <ul style="color:var(--muted); line-height:1.6;">
          <li>(i) Commenced business with Cash ₹1,80,000 and Building ₹1,20,000.</li>
          <li>(ii) Bought Furniture ₹40,000.</li>
          <li>(iii) Goods purchased ₹80,000 (₹30,000 cash, ₹50,000 credit).</li>
          <li>(iv) Goods sold costing ₹40,000 for ₹60,000 (₹20,000 cash, ₹40,000 credit).</li>
          <li>(v) Paid Wages ₹8,000.</li>
          <li>(vi) Received Commission ₹7,000.</li>
          <li>(vii) Withdrew ₹12,000 cash and Goods worth ₹8,000.</li>
        </ul>
      </div>

      <!-- Practical Example 5 -->
      <div style="padding:20px; margin:20px 0; background:rgba(255,255,255,0.03); border-radius:12px;">
        <h4 style="color:var(--brand)">Question 5</h4>
        <ul style="color:var(--muted); line-height:1.6;">
          <li>(i) Started business with Cash ₹1,20,000 and Stock ₹50,000.</li>
          <li>(ii) Purchased Machinery ₹70,000.</li>
          <li>(iii) Bought Goods ₹60,000 (₹25,000 cash, ₹35,000 credit).</li>
          <li>(iv) Sold Goods costing ₹30,000 for ₹45,000 (half cash, half credit).</li>
          <li>(v) Paid Rent ₹6,000 and Salary ₹9,000.</li>
          <li>(vi) Proprietor withdrew ₹15,000 cash for household use.</li>
          <li>(vii) Received Interest ₹3,000.</li>
        </ul>
      </div>
    </section>
    <!-- End of Practical Examples Section -->
    </section>

  </main>
    <script type="module">
      // ========================================
      // 1. IMPORT FIREBASE (ONLY THIS LINE NEEDS EXTERNAL FILE)
      // ========================================
      import { submitLessonAttempt, loadPreviousAnswers } from '../firebase-config.js';

      // ========================================
      // 2. CONFIGURATION (CHANGE FOR EACH LESSON)
      // ========================================
      const LESSON_NUMBER = '6';  // ← Change this: '1', '2', '3', etc.
      const LESSON_ID = 'lesson-6'; // ← Change this: 'lesson-1', 'lesson-2', etc.

      // ========================================
      // 3. INITIALIZE QUIZ
      // ========================================
      function initQuiz() {
        console.log('🎯 Initializing quiz for Lesson', LESSON_NUMBER);
        
        const container = document.getElementById('quiz-container');
        if (!container) {
          console.error('❌ Quiz container not found');
          return;
        }

        // Add event listeners to all radio buttons
        const allInputs = container.querySelectorAll('input[type="radio"]');
        allInputs.forEach(input => {
          // UPDATE PROGRESS BAR ON CHANGE
          input.addEventListener('change', updateProgressBar);
          
          // ✨ ADD UNCLICK FUNCTIONALITY ✨
          input.addEventListener('click', function(e) {
            // If already checked, uncheck it
            if (this.dataset.checked === 'true') {
              this.checked = false;
              this.dataset.checked = 'false';
              updateProgressBar(); // Update progress after unclick
            } else {
              // Mark all radios in this group as unchecked
              const groupName = this.name;
              document.querySelectorAll(`input[name="${groupName}"]`).forEach(radio => {
                radio.dataset.checked = 'false';
              });
              // Mark this one as checked
              this.dataset.checked = 'true';
            }
          });
        });

        console.log('✅ Quiz initialized with', allInputs.length, 'options');
        updateProgressBar();
      }

      // ========================================
      // 4. UPDATE PROGRESS BAR (REAL-TIME)
      // ========================================
      function updateProgressBar() {
        const container = document.getElementById('quiz-container');
        if (!container) return;

        // Count total questions
        const allQuestions = container.querySelectorAll('.mcq');
        const totalQuestions = allQuestions.length;

        // Count answered questions
        let answeredCount = 0;
        allQuestions.forEach(mcq => {
          const questionName = mcq.querySelector('input[type="radio"]').name;
          const selected = document.querySelector(`input[name="${questionName}"]:checked`);
          if (selected) answeredCount++;
        });

        // Calculate progress percentage
        const progressPercentage = totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0;

        // Update progress bar UI
        const progressDiv = document.getElementById('quiz-progress');
        if (progressDiv) {
          progressDiv.innerHTML = `
            <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: var(--muted);">
                <span>Questions Answered</span>
                <span><strong style="color: var(--brand-2);">${answeredCount}/${totalQuestions}</strong></span>
              </div>
              <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                <div style="width: ${progressPercentage}%; height: 100%; background: linear-gradient(90deg, var(--brand), var(--brand-2)); transition: width 0.3s ease;"></div>
              </div>
            </div>
          `;
        }

        console.log(`📊 Progress: ${answeredCount}/${totalQuestions} (${progressPercentage}%)`);
      }

      // ========================================
      // 5. SUBMIT QUIZ (BULLETPROOF VERSION)
      // ========================================
      window.submitQuiz = async function() {
        console.log('📤 Submitting quiz for Lesson', LESSON_NUMBER);
        
        const container = document.getElementById('quiz-container');
        if (!container) return;

        const mcqs = container.querySelectorAll('.mcq');
        if (mcqs.length === 0) return;

        let answersData = {};
        let correctCount = 0;
        let totalQuestions = mcqs.length;
        let answeredCount = 0;

        mcqs.forEach((mcq, index) => {
          const correctAnswer = mcq.dataset.answer;
          const questionNumber = `q${index + 1}`;
          const inputs = mcq.querySelectorAll('input[type="radio"]');
          const questionName = inputs[0].name;
          const selected = document.querySelector(`input[name="${questionName}"]:checked`);

          if (!selected) return;

          answeredCount++;
          const selectedValue = selected.value;
          const isCorrect = selectedValue === correctAnswer;
          if (isCorrect) correctCount++;

          answersData[questionNumber] = {
            selected: selectedValue,
            correct: correctAnswer,
            isCorrect: isCorrect
          };

          inputs.forEach(input => {
            const label = input.nextElementSibling;
            if (!label) return;
            input.disabled = true;
            if (input.value === correctAnswer) {
              label.style.background = 'linear-gradient(90deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1))';
              label.style.borderLeft = '4px solid #10b981';
              label.style.fontWeight = 'bold';
            }
            if (input.value === selectedValue && !isCorrect) {
              label.style.background = 'linear-gradient(90deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1))';
              label.style.borderLeft = '4px solid #ef4444';
            }
          });
        });

        if (answeredCount === 0) {
          alert('⚠️ Please answer at least 1 question before submitting!');
          return;
        }

        const percentage = Math.round((correctCount / totalQuestions) * 100);
        const submitBtn = document.getElementById('submitQuiz');
        const resultDiv = document.getElementById('quizResult');

        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.textContent = 'Submitting...';
        }

        // Show loading state
        if (resultDiv) {
          resultDiv.innerHTML = `
            <div style="padding: 20px; margin-top: 20px; background: rgba(124,77,255,0.1); border-radius: 12px; text-align: center;">
              <div style="font-size: 1.2rem; color: var(--brand-2);">⚙️ Saving your progress...</div>
            </div>`;
        }

        try {
          console.log("📤 Submitting to Firebase:", { lessonNumber: LESSON_NUMBER, correctCount, totalQuestions, percentage });
          const result = await submitLessonAttempt(LESSON_NUMBER, answersData, correctCount, totalQuestions);
          console.log("✅ Firebase response:", result);

          // ALWAYS show result, even if Firebase fails
          if (resultDiv) {
            if (result && result.success) {
              if (result.updated) {
                // New best score!
                resultDiv.innerHTML = `
                  <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-radius: 12px; border: 2px solid #10b981;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #10b981; margin-bottom: 10px;">🎉 New Best Score!</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                    <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                    <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">✅ Progress saved to cloud</div>
                  </div>`;
              } else {
                // Previous score was better
                resultDiv.innerHTML = `
                  <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.1)); border-radius: 12px; border: 2px solid #fbbf24;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #fbbf24; margin-bottom: 10px;">📊 Quiz Completed</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">Current Score: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                    <div style="font-size: 1.1rem; margin-bottom: 10px; color: #10b981;">Your Best: <strong>${result.bestScore}/${result.totalQuestions}</strong> (${result.percentage}%)</div>
                    <div style="color: var(--muted); font-size: 0.9rem;">Answered ${answeredCount} out of ${totalQuestions} questions</div>
                    <div style="color: var(--muted); font-size: 0.85rem; margin-top: 10px;">💡 Try again to beat your best score!</div>
                  </div>`;
              }
            } else {
              // Firebase failed but still show score
              resultDiv.innerHTML = `
                <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
                  <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
                  <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                  <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                  <div style="color: #fbbf24; font-size: 0.85rem; margin-top: 10px;">⚠️ Could not save to cloud. Check console (F12) for details.</div>
                </div>`;
              console.error("❌ Firebase error:", result?.error || "Unknown error");
            }
          }
        } catch (error) {
          console.error("❌ Critical error during submission:", error);
          // STILL show the score even if everything fails
          if (resultDiv) {
            resultDiv.innerHTML = `
              <div style="padding: 20px; margin-top: 20px; background: linear-gradient(135deg, rgba(124,77,255,0.2), rgba(124,77,255,0.1)); border-radius: 12px; border: 2px solid var(--brand);">
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--brand-2); margin-bottom: 10px;">📊 Your Score</div>
                <div style="font-size: 1.2rem; margin-bottom: 10px;">You scored: <strong>${correctCount}/${totalQuestions}</strong> (${percentage}%)</div>
                <div style="color: var(--muted); font-size: 0.9rem;">✅ Answered ${answeredCount} out of ${totalQuestions} questions</div>
                <div style="color: #ef4444; font-size: 0.85rem; margin-top: 10px;">❌ Error: ${error.message}</div>
                <div style="color: var(--muted); font-size: 0.8rem; margin-top: 5px;">Check browser console (F12) for details</div>
              </div>`;
          }
        } finally {
          // Always show retry button and update submit button
          const retryBtn = document.getElementById('retry-btn');
          if (retryBtn) retryBtn.style.display = 'block';
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = '✓ Submitted';
          }
        }
      };

      // ========================================
      // 6. RETRY QUIZ
      // ========================================
      window.retryQuiz = function() {
        console.log('🔄 Retrying quiz');
        
        const container = document.getElementById('quiz-container');
        if (!container) return;

        // Reset all inputs
        const allInputs = container.querySelectorAll('input[type="radio"]');
        allInputs.forEach(input => {
          input.checked = false;
          input.disabled = false;
          input.dataset.checked = 'false'; // Reset unclick tracking
          
          const label = input.nextElementSibling;
          if (label) {
            label.style.background = '';
            label.style.borderLeft = '';
            label.style.fontWeight = '';
          }
        });

        // Reset UI
        const resultDiv = document.getElementById('quizResult');
        if (resultDiv) resultDiv.innerHTML = '';

        const submitBtn = document.getElementById('submitQuiz');
        if (submitBtn) {
          submitBtn.disabled = false;
          submitBtn.textContent = 'Submit Answers';
        }

        const retryBtn = document.getElementById('retry-btn');
        if (retryBtn) retryBtn.style.display = 'none';

        updateProgressBar();
        document.getElementById('mcqSection')?.scrollIntoView({ behavior: 'smooth' });
      };

      // ========================================
      // 7. INITIALIZE ON PAGE LOAD
      // ========================================
      initQuiz();
      console.log('✅ Lesson', LESSON_NUMBER, 'quiz ready!');
      
      /* Enhanced Hover Effects */
      function addHoverEffects() {
        $$('.animate-card').forEach(card => {
          card.addEventListener('mouseenter', () => {
            card.style.transition = 'all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)';
            const colors = ['var(--brand)', 'var(--brand-2)', 'var(--accent)'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            card.style.boxShadow = `0 25px 50px rgba(2,6,23,.8), 0 0 30px ${randomColor}40`;
          });

          card.addEventListener('mouseleave', () => {
            card.style.boxShadow = 'var(--shadow)';
          });
        });
      }

      /* Term Card Toggle Function */
      window.toggleTerm = function(card) {
        const details = card.querySelector('.term-details');
        const indicator = card.querySelector('.term-indicator');
        
        if (details.style.maxHeight === '0px' || !details.style.maxHeight) {
          // Close other cards
          $$('.term-card').forEach(otherCard => {
            if (otherCard !== card) {
              otherCard.querySelector('.term-details').style.maxHeight = '0px';
              otherCard.querySelector('.term-indicator').style.transform = 'scaleX(0)';
              otherCard.style.background = 'var(--card)';
            }
          });
          
          // Open this card
          details.style.maxHeight = details.scrollHeight + 'px';
          indicator.style.transform = 'scaleX(1)';
          card.style.background = 'linear-gradient(145deg, var(--card), rgba(255,255,255,0.05))';
        } else {
          // Close this card
          details.style.maxHeight = '0px';
          indicator.style.transform = 'scaleX(0)';
          card.style.background = 'var(--card)';
        }
      };

      /* Initialize Everything */
      function initialize() {
        const animator = new CardAnimator();
        
        setTimeout(() => {
          addHoverEffects();
        }, 500);

        const mcqContainer = $('#mcq-container');
        if (mcqContainer) {
          mcqContainer.addEventListener('change', handleRadio);
          console.log('MCQ Container found:', mcqContainer);
        }
        
        if (submitButton) {
          submitButton.addEventListener('click', handleSubmit);
        }
        
        if (retryBtn) {
          retryBtn.addEventListener('click', resetQuiz);
        }

        animateProgressTo(0);
        enableSubmitCheck();

        console.log('Chapter 6 - Accounting Equation loaded successfully!');
      }

      /* Event Listeners */
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initialize);
      } else {
        initialize();
      }

      // Emergency content fix
      window.addEventListener('load', () => {
        setTimeout(() => {
          $$('h3, p, ul, li, div').forEach(el => {
            if (!el.classList.contains('term-details') && getComputedStyle(el).opacity === '0') {
              el.style.opacity = '1';
              el.style.visibility = 'visible';
            }
          });
        }, 1000);
      });
    </script>

</body>
</html>
    