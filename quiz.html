<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Platform - Modern Redesign</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            /* Color Palette - Modern & Fresh */
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #06b6d4;
            
            /* Neutrals */
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a2e;
            --bg-tertiary: #16213e;
            --surface: #1e1e3f;
            --surface-hover: #252547;
            
            /* Text */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            /* Effects */
            --glow: 0 0 30px rgba(99, 102, 241, 0.3);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            
            /* Spacing */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.1) 0%, transparent 60%);
            z-index: -1;
            animation: bgShift 15s ease-in-out infinite alternate;
        }

        @keyframes bgShift {
            0% { transform: scale(1) rotate(0deg); }
            100% { transform: scale(1.1) rotate(5deg); }
        }

        /* Floating Orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.4;
            animation: float 20s infinite ease-in-out;
            z-index: -1;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--primary), transparent);
            top: -200px;
            right: -200px;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--secondary), transparent);
            bottom: -250px;
            left: -250px;
            animation-delay: 7s;
        }

        .orb-3 {
            width: 350px;
            height: 350px;
            background: radial-gradient(circle, var(--accent), transparent);
            top: 50%;
            left: 50%;
            animation-delay: 14s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(50px, -50px) scale(1.1); }
            66% { transform: translate(-50px, 50px) scale(0.9); }
        }

        /* Navigation */
        nav {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo::before {
            content: '‚ö°';
            -webkit-text-fill-color: var(--primary);
            filter: drop-shadow(0 0 10px var(--primary));
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.3s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0.8rem 2rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 0.4rem 0;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary-light);
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .hero-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--primary-light) 50%, var(--accent) 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        /* Progress Stepper */
        .stepper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 1.5rem 0;
            padding: 0 0.3rem;
            flex-wrap: wrap;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .step-circle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--surface);
            border: 2px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
            transition: var(--transition);
            position: relative;
        }

        .step-circle::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            padding: 2px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: var(--transition);
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            box-shadow: var(--glow);
            transform: scale(1.1);
        }

        .step.active .step-circle::before {
            opacity: 1;
        }

        .step.completed .step-circle {
            background: var(--success);
            border-color: var(--success);
        }

        .step.completed .step-circle::after {
            content: '‚úì';
            position: absolute;
        }

        .step-label {
            font-weight: 600;
            color: var(--text-muted);
            transition: var(--transition);
        }

        .step.active .step-label {
            color: var(--text-primary);
        }

        .step-divider {
            width: 60px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .step-divider::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.5s;
        }

        .step.completed + .step-divider::before {
            width: 100%;
        }

        /* Cards */
        .card {
            background: rgba(30, 30, 63, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            display: none;
        }

        .card.active {
            display: block;
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .card-header {
            margin-bottom: 2rem;
        }

        .card-title {
            font-size: 1.875rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Chapter Grid */
        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.25rem;
            margin: 2rem 0;
        }

        .chapter-card {
            background: var(--surface);
            border: 2px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 0.7rem;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .chapter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s;
        }

        .chapter-card:hover {
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .chapter-card:hover::before {
            transform: scaleX(1);
        }

        .chapter-card.selected {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
            border-color: var(--primary);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
        }

        .chapter-card.selected::before {
            transform: scaleX(1);
        }

        .chapter-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .chapter-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
            box-shadow: var(--shadow-sm);
        }

        .chapter-content h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .chapter-meta {
            display: flex;
            gap: 1rem;
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: 0.75rem;
        }

        .chapter-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.6);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            background: var(--surface-hover);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-light);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Progress Bar */
        .progress-section {
            margin: 2rem 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .progress-label {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .progress-value {
            font-weight: 700;
            font-size: 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .progress-bar-container {
            height: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 100px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmerProgress 2s infinite;
        }

        @keyframes shimmerProgress {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Question Card */
        .question-container {
            margin: 2rem 0;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .question-badge {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(236, 72, 153, 0.2));
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary-light);
        }

        .question-number {
            font-weight: 700;
            color: var(--text-secondary);
        }

        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.5;
            color: var(--text-primary);
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.02);
            border-left: 4px solid var(--primary);
            border-radius: var(--radius-md);
        }

        /* Options */
        .options-grid {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .option {
            padding: 1.25rem 1.5rem;
            background: var(--surface);
            border: 2px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(180deg, var(--primary), var(--accent));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .option:hover {
            border-color: var(--primary);
            background: var(--surface-hover);
            transform: translateX(8px);
        }

        .option:hover::before {
            transform: scaleY(1);
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .option-marker::after {
            content: '';
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            transform: scale(0);
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px; /* ensure check/‚úï fit inside */
            line-height: 1;
            color: white;
        }

        .option.selected {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary);
        }

        .option.selected .option-marker {
            border-color: var(--primary);
        }

        .option.selected .option-marker::after {
            transform: scale(1);
        }

        .option.correct {
            background: rgba(16, 185, 129, 0.15);
            border-color: var(--success);
            animation: correctShake 0.5s ease;
        }

        .option.correct .option-marker {
            background: var(--success);
            border-color: var(--success);
        }

        .option.correct .option-marker::after {
            content: '‚úì';
            color: white;
            font-weight: 700;
            transform: scale(1);
            background: none;
        }

        @keyframes correctShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(8px); }
            75% { transform: translateX(4px); }
        }

        .option.wrong {
            background: rgba(239, 68, 68, 0.15);
            border-color: var(--error);
            animation: wrongShake 0.5s ease;
        }

        .option.wrong .option-marker {
            background: var(--error);
            border-color: var(--error);
        }

        .option.wrong .option-marker::after {
            content: '‚úï';
            color: white;
            font-weight: 700;
            transform: scale(1);
            background: none;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
        }

        .option-text {
            font-size: 1rem;
            color: var(--text-primary);
            flex: 1;
        }

        /* Fill in the Blank Input */
        .fill-input {
            width: 100%;
            padding: 1.25rem 1.5rem;
            background: var(--surface);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-size: 1.125rem;
            font-family: inherit;
            outline: none;
            transition: var(--transition);
        }

        .fill-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .fill-input::placeholder {
            color: var(--text-muted);
        }

        /* Explanation Box */
        .explanation {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(52, 211, 153, 0.1));
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-left: 4px solid var(--success);
            border-radius: var(--radius-lg);
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 0.75rem;
            font-size: 1.125rem;
        }

        .explanation-title::before {
            content: 'üí°';
            font-size: 1.25rem;
        }

        .explanation-text {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Results Card */
        .results-container {
            text-align: center;
            padding: 2rem 0;
        }

        .score-display {
            margin: 3rem 0;
            position: relative;
        }

        .score-circle-container {
            width: 250px;
            height: 250px;
            margin: 0 auto;
            position: relative;
            animation: scaleRotate 1s ease-out;
        }

        @keyframes scaleRotate {
            from { transform: scale(0.5) rotate(-180deg); opacity: 0; }
            to { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .score-circle-bg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary) 0deg,
                var(--accent) calc(var(--score-percent) * 3.6deg),
                rgba(255, 255, 255, 0.05) calc(var(--score-percent) * 3.6deg)
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: rotateGradient 2s ease-out;
        }

        @keyframes rotateGradient {
            from { transform: rotate(-180deg); }
            to { transform: rotate(0deg); }
        }

        .score-circle-inner {
            width: 210px;
            height: 210px;
            border-radius: 50%;
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .score-percentage {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-light), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }

        .score-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .performance-badge {
            display: inline-block;
            padding: 0.75rem 2rem;
            margin: 2rem 0;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.25rem;
            animation: bounceIn 0.8s ease-out 0.5s both;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .performance-excellent {
            background: linear-gradient(135deg, var(--success), #34d399);
            color: white;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);
        }

        .performance-good {
            background: linear-gradient(135deg, var(--info), #22d3ee);
            color: white;
            box-shadow: 0 8px 30px rgba(6, 182, 212, 0.4);
        }

        .performance-average {
            background: linear-gradient(135deg, var(--warning), #fbbf24);
            color: white;
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4);
        }

        .performance-poor {
            background: linear-gradient(135deg, var(--error), #f87171);
            color: white;
            box-shadow: 0 8px 30px rgba(239, 68, 68, 0.4);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .stat-card {
            background: var(--surface);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 1.75rem;
            text-align: center;
            transition: var(--transition);
            animation: fadeInUp 0.6s ease-out backwards;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        .stat-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .stat-icon.total { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .stat-icon.correct { background: linear-gradient(135deg, var(--success), #34d399); }
        .stat-icon.wrong { background: linear-gradient(135deg, var(--error), #f87171); }
        .stat-icon.skipped { background: linear-gradient(135deg, var(--warning), #fbbf24); }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Review Section */
        .review-list {
            margin: 2rem 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .review-item {
            background: var(--surface);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            transition: var(--transition);
        }

        .review-item:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(8px);
        }

        .review-item.correct {
            border-left: 4px solid var(--success);
        }

        .review-item.wrong {
            border-left: 4px solid var(--error);
        }

        .review-question {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }

        .review-answer {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .review-answer-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .review-answer-row.correct-answer { color: var(--success); }
        .review-answer-row.wrong-answer { color: var(--error); }
        .review-answer-row.user-answer { color: var(--text-secondary); }

        /* Timer */
        .timer {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid rgba(255, 152, 0, 0.3);
            border-radius: 50px;
            font-weight: 700;
            color: var(--warning);
            animation: pulse 2s infinite;
        }

        .timer.urgent {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error);
            color: var(--error);
            animation: urgentPulse 1s infinite;
        }

        @keyframes urgentPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1.5rem;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: var(--surface);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 400px;
            transform: translateX(500px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .toast.success .toast-icon {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .toast.error .toast-icon {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
        }

        .toast.info .toast-icon {
            background: rgba(6, 182, 212, 0.2);
            color: var(--info);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 2rem 1rem;
            }

            .hero {
                padding: 0.2rem 0;
            }

            .hero-title {
                font-size: 2rem;
            }

            .nav-links {
                display: none;
            }

            .stepper {
                overflow-x: auto;
                justify-content: flex-start;
                padding-bottom: 1rem;
            }

            .step-label {
                display: none;
            }

            .card {
                padding: 0.5rem;
            }

            .chapter-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .score-circle-container {
                width: 200px;
                height: 200px;
            }

            .score-circle-inner {
                width: 170px;
                height: 170px;
            }

            .score-percentage {
                font-size: 3rem;
            }

            .toast {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }

        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus States */
        *:focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 4px;
        }

        /* Selection */
        ::selection {
            background: rgba(99, 102, 241, 0.3);
            color: var(--text-primary);
        }

        /* Multiple Selection Styles */
        .option.multiple-choice .option-marker {
            border-radius: 4px;
            width: 24px;
            height: 24px;
        }

        .option.multiple-choice .option-marker::after {
            content: '‚úì';
            color: white;
            font-weight: 700;
            font-size: 14px;
            width: auto;
            height: auto;
            background: none;
            transform: scale(0);
        }

        .option.multiple-choice.selected .option-marker {
            background: var(--primary);
            border-color: var(--primary);
        }

        .option.multiple-choice.selected .option-marker::after {
            transform: scale(1);
        }

        /* Exit Quiz Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: var(--surface);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .modal-description {
            color: var(--text-secondary);
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .modal-buttons .btn {
            flex: 1;
        }

        /* Exit Button Style */
        .btn-exit {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border: 2px solid var(--error);
        }

        .btn-exit:hover {
            background: var(--error);
            color: white;
        }

        /* Multiple choice indicator */
        .question-type-badge {
            padding: 0.25rem 0.75rem;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--secondary);
            margin-left: 0.5rem;
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 6px;
            z-index: 102;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
            transition: var(--transition);
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: none;
            z-index: 99;
        }

        .mobile-menu.active {
            display: block;
        }

        .mobile-nav-links {
            position: fixed;
            top: 60px;
            right: 0;
            width: 280px;
            height: calc(100vh - 60px);
            background: var(--bg-secondary);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            list-style: none;
            display: none; /* Changed from flex to none */
            flex-direction: column;
            gap: 0;
            animation: slideInRight 0.3s ease;
            z-index: 100;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .mobile-nav-links a {
            display: block;
            padding: 1rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mobile-nav-links a:hover {
            background: rgba(99, 102, 241, 0.1);
            color: var(--text-primary);
            padding-left: 2rem;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hamburger {
                display: flex;
            }
        }

        /* User Profile Styles */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
        }

        .user-profile button {
            padding: 0.5rem 1.5rem;
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .user-profile {
                display: none; /* Hide on mobile, or adjust as needed */
            }
        }

        /* Stats Display in Results */
        .previous-best-badge {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            margin: 1rem 0;
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 50px;
            font-weight: 600;
            color: var(--info);
            font-size: 0.875rem;
        }

        .new-record-badge {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            margin: 1rem 0;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 50px;
            font-weight: 600;
            color: var(--success);
            font-size: 0.875rem;
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Floating Orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">AccountsWizard</div>
            
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="Quiz-files/SC.html">Scenario</a></li>
                <li><a href="Quiz-files/TF.html">True/False</a></li>
                <li><a href="Quiz-files/GTA.html">Guess The Account</a></li>
                <li><a href="Quiz-files/LG.html">Ledger game</a></li>
                <li><a href="Quiz-files/RF.html">Rapid Fire</a></li>
            </ul>

            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu"></div>

    <ul class="mobile-nav-links" id="mobileNavLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="Quiz-files/SC.html">Scenario</a></li>
        <li><a href="Quiz-files/TF.html">True/False</a></li>
        <li><a href="Quiz-files/GTA.html">Guess The Account</a></li>
        <li><a href="Quiz-files/LG.html">Ledger game</a></li>
        <li><a href="Quiz-files/RF.html">Rapid Fire</a></li>
    </ul>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <div class="hero-badge">üéØ Interactive Learning Platform</div>
            <h1 class="hero-title">Master Your Knowledge</h1>
            <p class="hero-subtitle">Challenge yourself with our comprehensive quiz system. Track your progress and improve your skills.</p>
        </div>

        <!-- Progress Stepper -->
        <div class="stepper">
            <div class="step active">
                <div class="step-circle">1</div>
                <span class="step-label">Select Chapter</span>
            </div>
            <div class="step-divider"></div>
            <div class="step">
                <div class="step-circle">2</div>
                <span class="step-label">Take Quiz</span>
            </div>
            <div class="step-divider"></div>
            <div class="step">
                <div class="step-circle">3</div>
                <span class="step-label">View Results</span>
            </div>
        </div>

        <!-- Chapter Selection Card -->
        <div class="card active" id="chapterCard">
            <div class="card-header">
                <h2 class="card-title">Choose Your Chapter</h2>
                <p class="card-description">Select one or more chapters to begin your quiz journey</p>
            </div>

            <div class="chapter-grid">
                <div class="chapter-card" data-chapter="1">
                    <div class="chapter-header">
                        <div class="chapter-icon">01</div>
                        <div class="chapter-content">
                            <h3>Meaning & Objectives of Accounting</h3>
                        </div>
                    </div>
                    <div class="chapter-meta">
                        <span>üìö 12 Questions</span>
                        <span>‚è±Ô∏è 15 min</span>
                    </div>
                </div>

                <div class="chapter-card" data-chapter="2">
                    <div class="chapter-header">
                        <div class="chapter-icon">02</div>
                        <div class="chapter-content">
                            <h3>Basic Accounting Terms</h3>
                        </div>
                    </div>
                    <div class="chapter-meta">
                        <span>üìö 15 Questions</span>
                        <span>‚è±Ô∏è 18 min</span>
                    </div>
                </div>

                <div class="chapter-card" data-chapter="4">
                    <div class="chapter-header">
                        <div class="chapter-icon">04</div>
                        <div class="chapter-content">
                            <h3>Process and Bases of Accounting</h3>
                        </div>
                    </div>
                    <div class="chapter-meta">
                        <span>üìö 10 Questions</span>
                        <span>‚è±Ô∏è 12 min</span>
                    </div>
                </div>

                <div class="chapter-card" data-chapter="6">
                    <div class="chapter-header">
                        <div class="chapter-icon">06</div>
                        <div class="chapter-content">
                            <h3>Accounting Equations</h3>
                        </div>
                    </div>
                    <div class="chapter-meta">
                        <span>üìö 18 Questions</span>
                        <span>‚è±Ô∏è 22 min</span>
                    </div>
                </div>

                <div class="chapter-card" data-chapter="7">
                <div class="chapter-header">
                    <div class="chapter-icon">07</div>
                    <div class="chapter-content">
                        <h3>Double Entry System</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 14 Questions</span>
                    <span>‚è±Ô∏è 16 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="8">
                <div class="chapter-header">
                    <div class="chapter-icon">08</div>
                    <div class="chapter-content">
                        <h3>Origin of Transactions: Source Documents</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 11 Questions</span>
                    <span>‚è±Ô∏è 13 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="9">
                <div class="chapter-header">
                    <div class="chapter-icon">09</div>
                    <div class="chapter-content">
                        <h3>Books of Original Entry ‚Äì Journal</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 16 Questions</span>
                    <span>‚è±Ô∏è 20 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="10">
                <div class="chapter-header">
                    <div class="chapter-icon">10</div>
                    <div class="chapter-content">
                        <h3>Accounting for Goods and Service Tax (GST)</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 13 Questions</span>
                    <span>‚è±Ô∏è 15 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="11">
                <div class="chapter-header">
                    <div class="chapter-icon">11</div>
                    <div class="chapter-content">
                        <h3>Books of Original Entry ‚Äì Cash Book</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 15 Questions</span>
                    <span>‚è±Ô∏è 18 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="12">
                <div class="chapter-header">
                    <div class="chapter-icon">12</div>
                    <div class="chapter-content">
                        <h3>Books of Original Entry ‚Äì Special Purpose Subsidiary Books</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 12 Questions</span>
                    <span>‚è±Ô∏è 14 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="13">
                <div class="chapter-header">
                    <div class="chapter-icon">13</div>
                    <div class="chapter-content">
                        <h3>Ledger</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 14 Questions</span>
                    <span>‚è±Ô∏è 17 min</span>
                </div>
            </div>

            <div class="chapter-card" data-chapter="14">
                <div class="chapter-header">
                    <div class="chapter-icon">14</div>
                    <div class="chapter-content">
                        <h3>Trial Balance and Errors</h3>
                    </div>
                </div>
                <div class="chapter-meta">
                    <span>üìö 16 Questions</span>
                    <span>‚è±Ô∏è 19 min</span>
                </div>
            </div>
        </div>

            <div class="btn-group">
                <button class="btn btn-primary" id="startQuizBtn" disabled>
                    <span>Start Quiz</span>
                    <span>‚Üí</span>
                </button>
                <button class="btn btn-secondary" id="randomQuizBtn">
                    <span>Random Selection</span>
                    <span>üé≤</span>
                </button>
            </div>
        </div>

        <!-- Quiz Card -->
        <div class="card" id="quizCard">
            <div class="card-header">
                <h2 class="card-title" id="quizChapterTitle">Chapter Quiz</h2>
                <p class="card-description" id="quizChapterDescription">Test your knowledge</p>
            </div>

            <div class="progress-section">
                <div class="progress-header">
                    <span class="progress-label">Question Progress</span>
                    <span class="progress-value" id="progressText">1 / 15</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBar" style="width: 6.67%"></div>
                </div>
            </div>

            <div class="question-container" id="questionContainer">
                <!-- Question will be loaded here dynamically -->
            </div>

            <!-- In the Quiz Card btn-group -->
            <div class="btn-group">
                <button class="btn btn-secondary" id="prevBtn" style="display: none;">
                    <span>‚Üê Previous</span>
                </button>
                <button class="btn btn-primary" id="submitAnswerBtn">
                    <span>Submit Answer</span>
                    <span>‚úì</span>
                </button>
                <button class="btn btn-primary" id="nextBtn" style="display: none;">
                    <span>Next Question</span>
                    <span>‚Üí</span>
                </button>
                <button class="btn btn-outline" id="skipBtn">
                    <span>Skip Question</span>
                    <span>‚Üí</span>
                </button>
                <button class="btn btn-exit" onclick="showExitConfirmation()">
                    <span>Exit Quiz</span>
                    <span>‚úï</span>
                </button>
            </div>
        </div>

        <!-- Results Card -->
        <div class="card" id="resultsCard">
            <div class="results-container">
                <h2 class="card-title">Quiz Completed! üéâ</h2>
                <p class="card-description">Here's how you performed</p>

                <div class="score-display">
                    <div class="score-circle-container" style="--score-percent: 85">
                        <div class="score-circle-bg">
                            <div class="score-circle-inner">
                                <div class="score-percentage">85%</div>
                                <div class="score-label">Score</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="performance-badge performance-excellent">
                    üèÜ Excellent Performance!
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon total">üìä</div>
                        <div class="stat-value total">15</div>
                        <div class="stat-label">Total Questions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon correct">‚úì</div>
                        <div class="stat-value correct">13</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon wrong">‚úï</div>
                        <div class="stat-value wrong">2</div>
                        <div class="stat-label">Wrong</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon skipped">‚äò</div>
                        <div class="stat-value skipped">0</div>
                        <div class="stat-label">Skipped</div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" id="reviewAnswersBtn">
                        <span>Review Answers</span>
                        <span>üìã</span>
                    </button>
                    <button class="btn btn-secondary" id="retakeQuizBtn">
                        <span>Retake Quiz</span>
                        <span>üîÑ</span>
                    </button>
                    <button class="btn btn-outline" id="newQuizBtn">
                        <span>New Quiz</span>
                        <span>‚Üí</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exit Confirmation Modal -->
    <div class="modal-overlay" id="exitModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Exit Quiz?</h3>
                <p class="modal-description">
                    Are you sure you want to exit? Your current progress will be lost.
                </p>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="hideExitConfirmation()">
                    <span>Continue Quiz</span>
                </button>
                <button class="btn btn-exit" onclick="exitQuiz()">
                    <span>Exit Quiz</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast success" id="toast">
        <div class="toast-icon">‚úì</div>
        <div class="toast-content">
            <div style="font-weight: 600;">Success!</div>
            <div style="font-size: 0.875rem; color: var(--text-secondary);">Your answer has been saved</div>
        </div>
    </div>
    <script type="module">
    // ========================================
    // üî• FIREBASE IMPORTS
    // ========================================
    import { 
    submitQuizAttempt, 
    loadPreviousQuizAttempt, 
    getUserProfile,
    updateLastLogin
    } from './firebase-config.js';

    // ========================================
    // üìä CHAPTER QUESTIONS DATABASE
    // ========================================
    // üëá PASTE YOUR ENTIRE chapterQuestions OBJECT HERE
    // Keep everything from: const chapterQuestions = { ... all the way to the closing };

    const chapterQuestions = {
            1: {
            title: "Meaning & Objectives of Accounting",
            description: "Test your understanding of accounting fundamentals",
            questions: [
                {
                    question: "What is the primary objective of accounting?",
                    type: "single",
                    options: [
                        "To eliminate business risks",
                        "To provide financial information to stakeholders",
                        "To increase company profits", 
                        "To reduce tax liability"
                    ],
                    correct: 1,
                    explanation: "The primary objective of accounting is to provide financial information about the economic activities of a business to various stakeholders like investors, creditors, and management for decision-making purposes."
                },
                {
                    question: "Which of the following are main objectives of accounting? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Recording financial transactions",
                        "Preventing business fraud",
                        "Providing information for decision making",
                        "Ascertaining profit or loss"
                    ],
                    correct: [0, 2, 3],
                    explanation: "The main objectives of accounting include recording transactions, providing decision-making information, and ascertaining profit or loss. While accounting helps detect fraud, preventing it is not a primary objective."
                },
                {
                    question: "Accounting is often called:",
                    type: "single",
                    options: [
                        "The language of business",
                        "The science of numbers", 
                        "The art of bookkeeping",
                        "The method of taxation"
                    ],
                    correct: 0,
                    explanation: "Accounting is widely known as 'the language of business' because it communicates financial information about a business entity to various users."
                },
                {
                    question: "Which of the following is NOT a characteristic of accounting?",
                    type: "single",
                    options: [
                        "Recording only monetary transactions",
                        "Recording both monetary and non-monetary transactions",
                        "Classifying and summarizing transactions",
                        "Interpreting financial results"
                    ],
                    correct: 1,
                    explanation: "Accounting records only monetary transactions - transactions that can be measured in money terms. Non-monetary transactions are not recorded in accounting."
                },
                {
                    question: "The main users of accounting information include: (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Investors",
                        "Management",
                        "Government authorities",
                        "Creditors"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these stakeholders use accounting information for various purposes - investors for investment decisions, management for planning, government for taxation, and creditors for credit decisions."
                },
                {
                    question: "Book-keeping primarily involves:",
                    type: "single",
                    options: [
                        "Recording financial transactions",
                        "Interpreting financial statements",
                        "Making business decisions",
                        "Auditing financial records"
                    ],
                    correct: 0,
                    explanation: "Book-keeping is concerned with the recording of financial transactions, which is the first stage in the accounting process."
                },
                {
                    question: "Which of the following are advantages of accounting? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Provides complete record of transactions",
                        "Helps in comparative analysis",
                        "Facilitates loan from banks",
                        "Helps in business decision making"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are important advantages of maintaining proper accounting records in a business organization."
                },
                {
                    question: "The process of accounting ends with:",
                    type: "single",
                    options: [
                        "Recording transactions in journal",
                        "Preparing trial balance",
                        "Interpreting financial statements",
                        "Posting to ledger"
                    ],
                    correct: 2,
                    explanation: "The accounting process starts with recording transactions and ends with interpreting the financial statements to draw meaningful conclusions."
                },
                {
                    question: "Which of the following statements about accounting is correct?",
                    type: "single",
                    options: [
                        "Accounting is same as book-keeping",
                        "Accounting includes book-keeping",
                        "Book-keeping includes accounting",
                        "Accounting and book-keeping are unrelated"
                    ],
                    correct: 1,
                    explanation: "Accounting is a broader concept that includes book-keeping. Book-keeping is the recording phase, while accounting includes recording, classifying, summarizing, and interpreting financial information."
                },
                {
                question: "What is the main difference between book-keeping and accounting?",
                type: "single",
                options: [
                    "Book-keeping is broader than accounting",
                    "Accounting is the science and art of book-keeping",
                    "Book-keeping involves interpretation while accounting involves recording",
                    "Accounting includes interpretation while book-keeping is mainly recording"
                ],
                correct: 3,
                explanation: "Book-keeping is mainly concerned with systematic recording of transactions, while accounting includes recording, classifying, summarizing, and interpreting financial information."
            },
            {
                question: "Which objectives of accounting help in measuring financial performance? (Select all that apply)",
                type: "multiple",
                options: [
                    "Ascertaining profit or loss",
                    "Maintaining records of transactions",
                    "Ascertaining financial position",
                    "Providing information to management"
                ],
                correct: [0, 2],
                explanation: "Ascertaining profit or loss (through Income Statement) and ascertaining financial position (through Balance Sheet) are key objectives that help measure a business's financial performance and position."
            },
            {
                question: "The systematic recording of transactions in accounting helps in:",
                type: "single",
                options: [
                    "Eliminating all business risks",
                    "Replacing the need for management",
                    "Providing reliable financial information",
                    "Guaranteeing business success"
                ],
                correct: 2,
                explanation: "Systematic recording of transactions provides reliable and organized financial information that helps various stakeholders in decision-making, but it doesn't eliminate risks or guarantee success."
            }
            ]
        },
        2: {
            title: "Basic Accounting Terms",
            description: "Master the fundamental terminology of accounting",
            questions: [
                {
                    question: "What does 'Assets' mean in accounting?",
                    type: "single",
                    options: [
                        "Company debts",
                        "Resources owned by the business", 
                        "Owner's investments",
                        "Future expenses"
                    ],
                    correct: 1,
                    explanation: "Assets are economic resources owned by a business that are expected to provide future benefits."
                },
                {
                    question: "Which terms represent financial obligations? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Liabilities",
                        "Revenue",
                        "Accounts Payable",
                        "Loans"
                    ],
                    correct: [0, 2, 3],
                    explanation: "Liabilities, Accounts Payable, and Loans all represent financial obligations of the business."
                },
                {
                    question: "Capital refers to:",
                    type: "single",
                    options: [
                        "Owner's investment in the business",
                        "Money borrowed from banks",
                        "Total sales of the business",
                        "Expenses incurred"
                    ],
                    correct: 0,
                    explanation: "Capital represents the owner's investment or equity in the business."
                },
                {
                    question: "Revenue is:",
                    type: "single",
                    options: [
                        "Amount invested by owner",
                        "Income from business operations",
                        "Money borrowed from creditors",
                        "Value of assets purchased"
                    ],
                    correct: 1,
                    explanation: "Revenue is the income earned by a business from its normal business operations, such as sales of goods or services."
                },
                {
                    question: "Which of the following are current assets? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Cash in hand",
                        "Accounts Receivable",
                        "Inventory",
                        "Building"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Cash, Accounts Receivable, and Inventory are current assets as they are expected to be converted to cash within one year. Building is a fixed asset."
                },
                {
                    question: "Expenses are:",
                    type: "single",
                    options: [
                        "Costs incurred to earn revenue",
                        "Money received from customers",
                        "Owner's investments",
                        "Loans taken from banks"
                    ],
                    correct: 0,
                    explanation: "Expenses are the costs incurred by a business in the process of earning revenue."
                },
                {
                    question: "A debtor is:",
                    type: "single",
                    options: [
                        "A person who owes money to the business",
                        "A person to whom the business owes money",
                        "The owner of the business",
                        "A government authority"
                    ],
                    correct: 0,
                    explanation: "A debtor is a person or entity that owes money to the business for goods sold or services rendered on credit."
                },
                {
                    question: "Which of the following are liabilities? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Bank Loan",
                        "Accounts Payable",
                        "Outstanding Expenses",
                        "Cash in Bank"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Bank Loan, Accounts Payable, and Outstanding Expenses are liabilities representing amounts owed by the business. Cash in Bank is an asset."
                },
                {
                    question: "Goods refer to:",
                    type: "single",
                    options: [
                        "All physical items in the business",
                        "Items purchased for resale",
                        "Stationery items used in office",
                        "Machinery and equipment"
                    ],
                    correct: 1,
                    explanation: "In accounting, 'Goods' specifically refer to items that are purchased or manufactured for the purpose of resale in the ordinary course of business."
                },
                {
                    question: "Profit is calculated as:",
                    type: "single",
                    options: [
                        "Revenue + Expenses",
                        "Revenue - Expenses",
                        "Assets - Liabilities",
                        "Capital + Revenue"
                    ],
                    correct: 1,
                    explanation: "Profit = Revenue - Expenses. It represents the excess of revenue over expenses during an accounting period."
                },
                {
                    question: "Which of the following are examples of revenue expenditure? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Purchase of raw materials",
                        "Payment of salaries",
                        "Purchase of machinery",
                        "Payment of rent"
                    ],
                    correct: [0, 1, 3],
                    explanation: "Purchase of raw materials, salaries, and rent are revenue expenditures (benefit current period). Purchase of machinery is capital expenditure (benefits multiple periods)."
                },
                {
                    question: "A creditor is:",
                    type: "single",
                    options: [
                        "A person who owes money to the business",
                        "A person to whom the business owes money",
                        "The owner of the business",
                        "A bank employee"
                    ],
                    correct: 1,
                    explanation: "A creditor is a person or entity to whom the business owes money for goods purchased or services received on credit."
                },
                {
                    question: "Drawings refer to:",
                    type: "single",
                    options: [
                        "Money invested by owner",
                        "Money withdrawn by owner for personal use",
                        "Profit earned by business",
                        "Loss incurred by business"
                    ],
                    correct: 1,
                    explanation: "Drawings represent amounts withdrawn by the owner from the business for personal use, which reduces the owner's capital."
                },
                {
                    question: "Which of the following are fixed assets? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Land and Building",
                        "Plant and Machinery",
                        "Furniture",
                        "Cash"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Land, Building, Plant, Machinery, and Furniture are fixed assets used for long-term business operations. Cash is a current asset."
                },
                {
                    question: "The accounting equation is:",
                    type: "single",
                    options: [
                        "Assets = Liabilities + Capital",
                        "Capital = Assets + Liabilities",
                        "Liabilities = Assets + Capital",
                        "Assets = Capital - Liabilities"
                    ],
                    correct: 0,
                    explanation: "The fundamental accounting equation is Assets = Liabilities + Capital, which must always remain in balance."
                }
            ]
        },
        4: {
            title: "Process and Bases of Accounting",
            description: "Understand accounting processes and different bases",
            questions: [
                {
                    question: "What is the first step in the accounting process?",
                    type: "single",
                    options: [
                        "Preparing financial statements",
                        "Recording transactions in journal",
                        "Identifying financial transactions",
                        "Posting to ledger"
                    ],
                    correct: 2,
                    explanation: "The first step in the accounting process is identifying financial transactions that can be measured in money terms."
                },
                {
                    question: "Which of these are accounting bases? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Cash basis",
                        "Accrual basis",
                        "Hybrid basis",
                        "Profit basis"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Cash basis, accrual basis, and hybrid basis are recognized accounting bases for recording transactions. Profit basis is not an accounting basis."
                },
                {
                    question: "Under accrual basis of accounting, revenue is recognized when:",
                    type: "single",
                    options: [
                        "Cash is received",
                        "Service is performed",
                        "Invoice is sent",
                        "Payment is due"
                    ],
                    correct: 1,
                    explanation: "Under accrual basis, revenue is recognized when the service is performed or goods are delivered, regardless of when cash is received."
                },
                {
                    question: "Which step comes after journalizing in the accounting process?",
                    type: "single",
                    options: [
                        "Preparing trial balance",
                        "Posting to ledger",
                        "Preparing financial statements",
                        "Identifying transactions"
                    ],
                    correct: 1,
                    explanation: "After recording transactions in the journal (journalizing), the next step is posting them to the respective ledger accounts."
                },
                {
                    question: "Under cash basis of accounting, expenses are recorded when:",
                    type: "single",
                    options: [
                        "Expense is incurred",
                        "Cash is paid",
                        "Bill is received",
                        "Service is used"
                    ],
                    correct: 1,
                    explanation: "Under cash basis, expenses are recorded only when cash is actually paid, regardless of when the expense was incurred."
                },
                {
                    question: "Which of the following are advantages of accrual basis? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Shows true profit or loss",
                        "Simple to understand and maintain",
                        "Matches revenue with expenses",
                        "Shows complete financial position"
                    ],
                    correct: [0, 2, 3],
                    explanation: "Accrual basis shows true profit/loss, matches revenue with expenses, and shows complete financial position. Simplicity is an advantage of cash basis."
                },
                {
                    question: "The final step in the accounting process is:",
                    type: "single",
                    options: [
                        "Preparing trial balance",
                        "Interpreting financial statements",
                        "Recording in journal",
                        "Posting to ledger"
                    ],
                    correct: 1,
                    explanation: "The accounting process ends with interpreting the financial statements to draw meaningful conclusions for decision-making."
                },
                {
                    question: "Which basis of accounting is recommended for larger businesses?",
                    type: "single",
                    options: [
                        "Cash basis only",
                        "Accrual basis only",
                        "Hybrid basis only",
                        "None of the above"
                    ],
                    correct: 1,
                    explanation: "Accrual basis is recommended for larger businesses as it provides a more accurate picture of financial performance and position."
                },
                {
                    question: "In hybrid basis of accounting:",
                    type: "single",
                    options: [
                        "Only cash transactions are recorded",
                        "Only credit transactions are recorded",
                        "Some items on cash basis and some on accrual basis",
                        "No transactions are recorded"
                    ],
                    correct: 2,
                    explanation: "Hybrid basis combines elements of both cash and accrual basis - some items are recorded on cash basis while others on accrual basis."
                },
                {
                    question: "Which of the following statements about accounting process is correct?",
                    type: "single",
                    options: [
                        "The process is the same for all types of businesses",
                        "The process may vary based on business size and nature",
                        "Only large businesses follow the complete accounting process",
                        "The process excludes interpretation of results"
                    ],
                    correct: 1,
                    explanation: "The accounting process may vary based on the size, nature, and requirements of the business, though the fundamental principles remain the same."
                }
            ]
        },
        6: {
            title: "Accounting Equations",
            description: "Test your knowledge of fundamental accounting equations",
            questions: [
                {
                    question: "What is the basic accounting equation?",
                    type: "single",
                    options: [
                        "Assets = Liabilities + Capital",
                        "Capital = Assets - Liabilities",
                        "Liabilities = Assets - Capital",
                        "All of the above"
                    ],
                    correct: 3,
                    explanation: "All options represent the basic accounting equation in different forms. Assets = Liabilities + Capital is the standard form."
                },
                {
                    question: "If a business has assets of $50,000 and liabilities of $20,000, what is the capital?",
                    type: "single",
                    options: [
                        "$30,000",
                        "$50,000",
                        "$20,000",
                        "$70,000"
                    ],
                    correct: 0,
                    explanation: "Capital = Assets - Liabilities = $50,000 - $20,000 = $30,000"
                },
                {
                    question: "Which transactions affect both sides of the accounting equation? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Purchase of equipment for cash",
                        "Payment to creditors",
                        "Owner's additional investment",
                        "Sale of goods on credit"
                    ],
                    correct: [0, 1, 2],
                    explanation: "All these transactions affect both sides of the accounting equation, maintaining the balance. Sale on credit affects assets and capital only."
                },
                {
                    question: "When a business purchases furniture for cash:",
                    type: "single",
                    options: [
                        "Assets increase, capital increases",
                        "One asset increases, another asset decreases",
                        "Assets increase, liabilities increase",
                        "Liabilities decrease, capital increases"
                    ],
                    correct: 1,
                    explanation: "Cash (asset) decreases and Furniture (asset) increases - total assets remain the same."
                },
                {
                    question: "The accounting equation is based on:",
                    type: "single",
                    options: [
                        "Single entry system",
                        "Double entry system",
                        "Cash system only",
                        "Accrual system only"
                    ],
                    correct: 1,
                    explanation: "The accounting equation forms the foundation of the double entry system of accounting."
                },
                {
                    question: "Which transactions increase both assets and liabilities? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Purchase of goods on credit",
                        "Loan taken from bank",
                        "Cash received from debtors",
                        "Investment by owner"
                    ],
                    correct: [0, 1],
                    explanation: "Purchase on credit increases inventory (asset) and creditors (liability). Bank loan increases cash (asset) and loan (liability)."
                },
                {
                    question: "If capital is $40,000 and liabilities are $25,000, what are total assets?",
                    type: "single",
                    options: [
                        "$15,000",
                        "$40,000",
                        "$25,000",
                        "$65,000"
                    ],
                    correct: 3,
                    explanation: "Assets = Capital + Liabilities = $40,000 + $25,000 = $65,000"
                },
                {
                    question: "Payment of salary affects the accounting equation by:",
                    type: "single",
                    options: [
                        "Increasing assets and capital",
                        "Decreasing assets and capital",
                        "Increasing liabilities and capital",
                        "Decreasing liabilities and capital"
                    ],
                    correct: 1,
                    explanation: "Payment of salary decreases cash (asset) and decreases capital (due to expense)."
                },
                {
                    question: "Which of the following transactions affect only the asset side? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Purchase of machinery for cash",
                        "Cash received from debtors",
                        "Goods sold for cash",
                        "Payment to creditors"
                    ],
                    correct: [0, 1],
                    explanation: "Purchase of machinery for cash and cash from debtors only affect different asset accounts. Goods sold affects assets and capital."
                },
                {
                    question: "When goods are sold for cash:",
                    type: "single",
                    options: [
                        "Assets increase, capital decreases",
                        "Assets decrease, capital increases",
                        "Assets increase, capital increases",
                        "Assets decrease, capital decreases"
                    ],
                    correct: 2,
                    explanation: "Cash (asset) increases and capital increases due to profit from sale."
                },
                {
                    question: "The expanded accounting equation includes:",
                    type: "single",
                    options: [
                        "Assets = Liabilities + Capital + Revenue - Expenses",
                        "Assets = Liabilities + Capital + Revenue",
                        "Assets = Liabilities + Capital - Expenses",
                        "Assets = Liabilities + Revenue - Expenses"
                    ],
                    correct: 0,
                    explanation: "The expanded equation is Assets = Liabilities + Capital + Revenue - Expenses"
                },
                {
                    question: "Which transactions decrease both assets and liabilities? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Payment to creditors",
                        "Purchase of goods on credit",
                        "Repayment of bank loan",
                        "Sale of goods for cash"
                    ],
                    correct: [0, 2],
                    explanation: "Payment to creditors and loan repayment decrease cash (asset) and decrease liabilities."
                },
                {
                    question: "If a business has assets of $80,000 and capital of $55,000, what are liabilities?",
                    type: "single",
                    options: [
                        "$25,000",
                        "$80,000",
                        "$55,000",
                        "$135,000"
                    ],
                    correct: 0,
                    explanation: "Liabilities = Assets - Capital = $80,000 - $55,000 = $25,000"
                },
                {
                    question: "Commission received in advance affects the equation by:",
                    type: "single",
                    options: [
                        "Increasing assets and capital",
                        "Increasing assets and liabilities",
                        "Decreasing assets and liabilities",
                        "Increasing liabilities and capital"
                    ],
                    correct: 1,
                    explanation: "Commission received in advance increases cash (asset) and increases liability (unearned revenue)."
                },
                {
                    question: "Which of the following always maintains the balance of accounting equation? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Every business transaction",
                        "Only cash transactions",
                        "Only credit transactions",
                        "All types of transactions"
                    ],
                    correct: [0, 3],
                    explanation: "Every business transaction, whether cash or credit, maintains the balance of the accounting equation."
                },
                {
                    question: "When owner withdraws cash for personal use:",
                    type: "single",
                    options: [
                        "Assets increase, capital increases",
                        "Assets decrease, capital decreases",
                        "Assets increase, liabilities decrease",
                        "Assets decrease, liabilities increase"
                    ],
                    correct: 1,
                    explanation: "Drawings decrease cash (asset) and decrease capital."
                },
                {
                    question: "The accounting equation is also known as:",
                    type: "single",
                    options: [
                        "Balance sheet equation",
                        "Income statement equation",
                        "Cash flow equation",
                        "Trial balance equation"
                    ],
                    correct: 0,
                    explanation: "The accounting equation is also called the balance sheet equation as it forms the basis for preparing the balance sheet."
                },
                {
                    question: "Which transaction does NOT affect the accounting equation?",
                    type: "single",
                    options: [
                        "Memorandum entry",
                        "Cash purchase",
                        "Credit sale",
                        "Loan repayment"
                    ],
                    correct: 0,
                    explanation: "Memorandum entries are noting entries that don't affect the accounting equation as they don't involve monetary transactions."
                }
            ]
        },
        7: {
            title: "Double Entry System",
            description: "Understand the double entry system of accounting",
            questions: [
                {
                    question: "What is the fundamental principle of double entry system?",
                    type: "single",
                    options: [
                        "Every transaction affects only one account",
                        "Every transaction affects two or more accounts",
                        "Only cash transactions are recorded",
                        "Only credit transactions are recorded"
                    ],
                    correct: 1,
                    explanation: "The fundamental principle is that every transaction affects at least two accounts - one account is debited and another is credited."
                },
                {
                    question: "Which rules apply in double entry system? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Debit what comes in, credit what goes out",
                        "Debit all expenses and losses",
                        "Credit all incomes and gains",
                        "Debit the receiver, credit the giver"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are fundamental rules of double entry bookkeeping system for different types of accounts."
                },
                {
                    question: "In double entry system, the total of debit balances should equal:",
                    type: "single",
                    options: [
                        "Total of credit balances",
                        "Total assets only",
                        "Total liabilities only",
                        "Total capital only"
                    ],
                    correct: 0,
                    explanation: "The basic principle of double entry system is that total debits must equal total credits, ensuring the accounting equation remains balanced."
                },
                {
                    question: "For personal accounts, the rule is:",
                    type: "single",
                    options: [
                        "Debit what comes in, credit what goes out",
                        "Debit the receiver, credit the giver",
                        "Debit all expenses, credit all incomes",
                        "Debit all losses, credit all gains"
                    ],
                    correct: 1,
                    explanation: "For personal accounts: Debit the receiver, credit the giver."
                },
                {
                    question: "Which of the following are advantages of double entry system? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Complete record of transactions",
                        "Arithmetical accuracy check",
                        "Determination of profit/loss",
                        "Knowledge of financial position"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are key advantages of the double entry system over single entry system."
                },
                {
                    question: "When furniture is purchased for cash:",
                    type: "single",
                    options: [
                        "Furniture account debited, cash account credited",
                        "Cash account debited, furniture account credited",
                        "Furniture account debited, capital account credited",
                        "Cash account debited, capital account credited"
                    ],
                    correct: 0,
                    explanation: "Furniture comes in (debit), cash goes out (credit)."
                },
                {
                    question: "The double entry system was developed by:",
                    type: "single",
                    options: [
                        "Luca Pacioli",
                        "Adam Smith",
                        "Karl Marx",
                        "John Maynard Keynes"
                    ],
                    correct: 0,
                    explanation: "Luca Pacioli, an Italian mathematician, is credited with documenting the double entry system in 1494."
                },
                {
                    question: "For real accounts, the rule is:",
                    type: "single",
                    options: [
                        "Debit what comes in, credit what goes out",
                        "Debit the receiver, credit the giver",
                        "Debit all expenses, credit all incomes",
                        "Debit all losses, credit all gains"
                    ],
                    correct: 0,
                    explanation: "For real accounts: Debit what comes in, credit what goes out."
                },
                {
                    question: "Which accounts are covered under double entry system? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Personal accounts",
                        "Real accounts",
                        "Nominal accounts",
                        "Only cash accounts"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Double entry system covers all three types of accounts: personal, real, and nominal accounts."
                },
                {
                    question: "When salary is paid in cash:",
                    type: "single",
                    options: [
                        "Salary account debited, cash account credited",
                        "Cash account debited, salary account credited",
                        "Salary account debited, capital account credited",
                        "Cash account debited, capital account credited"
                    ],
                    correct: 0,
                    explanation: "Salary is an expense (debit), cash goes out (credit)."
                },
                {
                    question: "The main limitation of single entry system that double entry overcomes is:",
                    type: "single",
                    options: [
                        "Incomplete recording of transactions",
                        "Too much paperwork",
                        "High cost of maintenance",
                        "Complex calculations"
                    ],
                    correct: 0,
                    explanation: "Single entry system records only one aspect of transactions, while double entry records both aspects, providing complete information."
                },
                {
                    question: "For nominal accounts, the rule is:",
                    type: "single",
                    options: [
                        "Debit what comes in, credit what goes out",
                        "Debit the receiver, credit the giver",
                        "Debit all expenses and losses, credit all incomes and gains",
                        "Debit all assets, credit all liabilities"
                    ],
                    correct: 2,
                    explanation: "For nominal accounts: Debit all expenses and losses, credit all incomes and gains."
                },
                {
                    question: "Which of the following statements about double entry system is correct?",
                    type: "single",
                    options: [
                        "It records only cash transactions",
                        "It is based on the accounting equation",
                        "It is suitable only for small businesses",
                        "It ignores the matching principle"
                    ],
                    correct: 1,
                    explanation: "Double entry system is fundamentally based on the accounting equation: Assets = Liabilities + Capital."
                },
                {
                    question: "When goods are sold on credit to Rahul:",
                    type: "single",
                    options: [
                        "Sales account credited, Rahul's account debited",
                        "Rahul's account credited, sales account debited",
                        "Cash account debited, sales account credited",
                        "Sales account debited, cash account credited"
                    ],
                    correct: 0,
                    explanation: "Rahul is the receiver (debit), sales is income (credit)."
                }
            ]
        },
        8: {
            title: "Origin of Transactions: Source Documents",
            description: "Learn about source documents in accounting",
            questions: [
                {
                    question: "What is a source document in accounting?",
                    type: "single",
                    options: [
                        "Final financial statements",
                        "Original evidence of a transaction",
                        "Accounting software output",
                        "Bank reconciliation statement"
                    ],
                    correct: 1,
                    explanation: "Source documents are the original records that provide evidence that a transaction has occurred and form the basis for recording in accounting books."
                },
                {
                    question: "Which of these are source documents? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Invoice",
                        "Receipt",
                        "Cash memo",
                        "Debit note"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these documents serve as evidence for recording transactions in accounting books and are considered source documents."
                },
                {
                    question: "A cash memo is issued for:",
                    type: "single",
                    options: [
                        "Credit sales",
                        "Cash sales",
                        "Credit purchases",
                        "Loan transactions"
                    ],
                    correct: 1,
                    explanation: "Cash memo is issued for cash sales as evidence of the transaction when goods are sold for immediate cash payment."
                },
                {
                    question: "What information does an invoice typically contain?",
                    type: "single",
                    options: [
                        "Only the total amount",
                        "Details of goods, quantity, rate, and total amount",
                        "Only the buyer's name",
                        "Only the seller's address"
                    ],
                    correct: 1,
                    explanation: "An invoice contains detailed information including description of goods, quantity, rate per unit, total amount, taxes, and parties involved."
                },
                {
                    question: "A debit note is prepared when:",
                    type: "single",
                    options: [
                        "Goods are returned by the buyer",
                        "Goods are returned to the supplier",
                        "Cash is received from customer",
                        "Payment is made to supplier"
                    ],
                    correct: 1,
                    explanation: "A debit note is prepared when goods are returned to the supplier, indicating that the supplier's account is being debited (reduced)."
                },
                {
                    question: "Which documents are used for banking transactions? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Pay-in-slip",
                        "Cheque",
                        "Invoice",
                        "Receipt"
                    ],
                    correct: [0, 1],
                    explanation: "Pay-in-slip (for depositing money) and cheque (for withdrawing money) are specific source documents used for banking transactions."
                },
                {
                    question: "A credit note is issued by:",
                    type: "single",
                    options: [
                        "The buyer to the seller",
                        "The seller to the buyer",
                        "The bank to the customer",
                        "The government to the business"
                    ],
                    correct: 1,
                    explanation: "A credit note is issued by the seller to the buyer when goods are returned by the buyer, indicating that the buyer's account is being credited."
                },
                {
                    question: "The main purpose of source documents is to:",
                    type: "single",
                    options: [
                        "Replace the need for ledger",
                        "Provide audit trail and evidence",
                        "Calculate profit and loss",
                        "Prepare balance sheet"
                    ],
                    correct: 1,
                    explanation: "Source documents provide an audit trail and serve as evidence that transactions have actually occurred, supporting the entries in accounting books."
                },
                {
                    question: "Which of the following statements about vouchers is correct?",
                    type: "single",
                    options: [
                        "Vouchers and source documents are the same",
                        "Vouchers are prepared based on source documents",
                        "Source documents are prepared based on vouchers",
                        "Vouchers are not used in accounting"
                    ],
                    correct: 1,
                    explanation: "Vouchers are accounting documents prepared on the basis of source documents to authorize entries in the books of accounts."
                },
                {
                    question: "When goods are purchased on credit, which document is received?",
                    type: "single",
                    options: [
                        "Cash memo",
                        "Invoice",
                        "Receipt",
                        "Pay-in-slip"
                    ],
                    correct: 1,
                    explanation: "When goods are purchased on credit, the supplier provides an invoice showing the details of goods and the credit terms."
                },
                {
                    question: "A receipt is issued when:",
                    type: "single",
                    options: [
                        "Goods are sold",
                        "Payment is received",
                        "Goods are purchased",
                        "Payment is made"
                    ],
                    correct: 1,
                    explanation: "A receipt is issued as an acknowledgment when payment is received from a customer or any other party."
                }
            ]
        },
        9: {
            title: "Books of Original Entry ‚Äì Journal",
            description: "Understand journal entries and their preparation",
            questions: [
                {
                    question: "What is a journal in accounting?",
                    type: "single",
                    options: [
                        "A book of final entry",
                        "A book of original entry",
                        "A summary of accounts",
                        "A financial statement"
                    ],
                    correct: 1,
                    explanation: "A journal is called the book of original entry where transactions are first recorded chronologically before being posted to ledger."
                },
                {
                    question: "Which information is recorded in a journal entry? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Date of transaction",
                        "Accounts involved",
                        "Amount debited and credited",
                        "Narration"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these elements are essential parts of a complete journal entry - date, accounts, amounts, and narration explaining the transaction."
                },
                {
                    question: "The process of recording transactions in journal is called:",
                    type: "single",
                    options: [
                        "Posting",
                        "Journalizing",
                        "Balancing",
                        "Trial balancing"
                    ],
                    correct: 1,
                    explanation: "Journalizing is the process of recording transactions in the journal with proper debit and credit aspects."
                },
                {
                    question: "What is the purpose of narration in a journal entry?",
                    type: "single",
                    options: [
                        "To calculate totals",
                        "To provide brief explanation of the transaction",
                        "To replace ledger accounts",
                        "To prepare financial statements"
                    ],
                    correct: 1,
                    explanation: "Narration provides a brief explanation of the transaction for future reference and understanding."
                },
                {
                    question: "Which of the following are types of journals? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "General Journal",
                        "Sales Journal",
                        "Purchase Journal",
                        "Cash Journal"
                    ],
                    correct: [0, 1, 2],
                    explanation: "General Journal, Sales Journal, and Purchase Journal are common types. Cash transactions are recorded in Cash Book, not Cash Journal."
                },
                {
                    question: "The journal entry for cash sales would be:",
                    type: "single",
                    options: [
                        "Debit Cash, Credit Sales",
                        "Debit Sales, Credit Cash",
                        "Debit Cash, Credit Debtors",
                        "Debit Debtors, Credit Sales"
                    ],
                    correct: 0,
                    explanation: "Cash sales: Cash account debited (asset increases), Sales account credited (revenue increases)."
                },
                {
                    question: "What is the rule of journal entry for personal accounts?",
                    type: "single",
                    options: [
                        "Debit what comes in, credit what goes out",
                        "Debit the receiver, credit the giver",
                        "Debit all expenses, credit all incomes",
                        "Debit all losses, credit all gains"
                    ],
                    correct: 1,
                    explanation: "For personal accounts: Debit the receiver, credit the giver."
                },
                {
                    question: "Which of the following are advantages of journal? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Chronological record of transactions",
                        "Reduces errors through narration",
                        "Provides complete information",
                        "Basis for posting to ledger"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are key advantages of maintaining a journal in the accounting process."
                },
                {
                    question: "The journal entry for purchase of furniture on credit would be:",
                    type: "single",
                    options: [
                        "Debit Furniture, Credit Cash",
                        "Debit Furniture, Credit Creditor",
                        "Debit Creditor, Credit Furniture",
                        "Debit Cash, Credit Furniture"
                    ],
                    correct: 1,
                    explanation: "Furniture purchased on credit: Furniture account debited (asset increases), Creditor's account credited (liability increases)."
                },
                {
                    question: "What is a compound journal entry?",
                    type: "single",
                    options: [
                        "Entry with one debit and one credit",
                        "Entry with multiple debits and/or multiple credits",
                        "Entry without narration",
                        "Entry recorded directly in ledger"
                    ],
                    correct: 1,
                    explanation: "A compound journal entry involves more than two accounts - either multiple debits, multiple credits, or both."
                },
                {
                    question: "The journal entry for payment of salary would be:",
                    type: "single",
                    options: [
                        "Debit Salary, Credit Cash",
                        "Debit Cash, Credit Salary",
                        "Debit Salary, Credit Creditor",
                        "Debit Creditor, Credit Cash"
                    ],
                    correct: 0,
                    explanation: "Payment of salary: Salary account debited (expense increases), Cash account credited (asset decreases)."
                },
                {
                    question: "Which of the following transactions are recorded in journal? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Opening entry",
                        "Closing entry",
                        "Adjusting entry",
                        "Rectifying entry"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All special entries like opening, closing, adjusting, and rectifying entries are recorded through journal entries."
                },
                {
                    question: "The journal entry for receipt of commission would be:",
                    type: "single",
                    options: [
                        "Debit Cash, Credit Commission",
                        "Debit Commission, Credit Cash",
                        "Debit Cash, Credit Debtors",
                        "Debit Debtors, Credit Commission"
                    ],
                    correct: 0,
                    explanation: "Receipt of commission: Cash account debited (asset increases), Commission account credited (income increases)."
                },
                {
                    question: "What is the significance of 'LF' column in journal?",
                    type: "single",
                    options: [
                        "Ledger Folio - page number of ledger",
                        "Last Figure - final amount",
                        "Loan Fund - source of money",
                        "Legal Form - document type"
                    ],
                    correct: 0,
                    explanation: "LF stands for Ledger Folio, indicating the page number of ledger where the entry is posted."
                },
                {
                    question: "The journal entry for goods withdrawn by owner for personal use would be:",
                    type: "single",
                    options: [
                        "Debit Drawings, Credit Purchases",
                        "Debit Purchases, Credit Drawings",
                        "Debit Drawings, Credit Cash",
                        "Debit Cash, Credit Drawings"
                    ],
                    correct: 0,
                    explanation: "Goods withdrawn by owner: Drawings account debited (capital decreases), Purchases account credited (expense decreases)."
                },
                {
                    question: "Which principle ensures that every journal entry has equal debit and credit amounts?",
                    type: "single",
                    options: [
                        "Matching principle",
                        "Dual aspect principle",
                        "Going concern principle",
                        "Consistency principle"
                    ],
                    correct: 1,
                    explanation: "Dual aspect principle ensures that every transaction has two aspects - debit and credit of equal amount."
                }
            ]
        },
        10: {
            title: "Accounting for Goods and Service Tax (GST)",
            description: "Learn about GST accounting and treatment",
            questions: [
                {
                    question: "What is GST?",
                    type: "single",
                    options: [
                        "Goods Sales Tax",
                        "General Service Tax",
                        "Goods and Service Tax",
                        "General Sales Tax"
                    ],
                    correct: 2,
                    explanation: "GST stands for Goods and Service Tax, which is a comprehensive indirect tax on the supply of goods and services throughout India."
                },
                {
                    question: "Which components are included in GST? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "CGST",
                        "SGST",
                        "IGST",
                        "UGST"
                    ],
                    correct: [0, 1, 2],
                    explanation: "CGST (Central GST), SGST (State GST), and IGST (Integrated GST) are the three components of GST in India. UGST is not a component."
                },
                {
                    question: "Input Tax Credit under GST means:",
                    type: "single",
                    options: [
                        "Tax paid on inputs can be set off against output tax liability",
                        "Tax paid on outputs",
                        "Tax exemption for small businesses",
                        "Tax refund for exports"
                    ],
                    correct: 0,
                    explanation: "Input Tax Credit allows businesses to claim credit for taxes paid on inputs (purchases) against their output tax liability (sales)."
                },
                {
                    question: "When goods are sold within the same state, which GST is applicable?",
                    type: "single",
                    options: [
                        "Only CGST",
                        "Only SGST",
                        "Both CGST and SGST",
                        "Only IGST"
                    ],
                    correct: 2,
                    explanation: "For intra-state sales (within same state), both CGST and SGST are applicable and collected simultaneously."
                },
                {
                    question: "Which of the following are features of GST? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Destination-based tax",
                        "Dual GST model",
                        "Input tax credit",
                        "Single tax structure"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are key features of GST - destination-based, dual model (CGST+SGST), input tax credit, and single comprehensive tax."
                },
                {
                    question: "IGST is applicable when:",
                    type: "single",
                    options: [
                        "Goods are sold within same state",
                        "Goods are sold between different states",
                        "Services are provided locally",
                        "Exports to other countries"
                    ],
                    correct: 1,
                    explanation: "IGST (Integrated GST) is applicable on inter-state supplies of goods and services, i.e., between different states."
                },
                {
                    question: "The journal entry for purchase of goods with GST would include:",
                    type: "single",
                    options: [
                        "Debit Purchases, Debit Input GST, Credit Creditor",
                        "Debit Purchases, Credit Input GST, Credit Creditor",
                        "Debit Creditor, Credit Purchases, Credit Input GST",
                        "Debit Input GST, Credit Purchases, Credit Creditor"
                    ],
                    correct: 0,
                    explanation: "Purchase with GST: Purchases account debited, Input GST account debited, Creditor's account credited with total amount."
                },
                {
                    question: "Which GST rate is applicable on essential goods?",
                    type: "single",
                    options: [
                        "0%",
                        "5%",
                        "12%",
                        "18%"
                    ],
                    correct: 1,
                    explanation: "Most essential goods fall under the 5% GST slab, though some essential items may be at 0% or exempted."
                },
                {
                    question: "What is the threshold limit for GST registration for normal category states?",
                    type: "single",
                    options: [
                        "‚Çπ10 lakh",
                        "‚Çπ20 lakh",
                        "‚Çπ40 lakh",
                        "‚Çπ1 crore"
                    ],
                    correct: 1,
                    explanation: "For normal category states, GST registration is mandatory if annual turnover exceeds ‚Çπ20 lakh (‚Çπ10 lakh for special category states)."
                },
                {
                    question: "The journal entry for sale of goods with GST would be:",
                    type: "single",
                    options: [
                        "Debit Debtor, Credit Sales, Credit Output GST",
                        "Debit Sales, Debit Output GST, Credit Debtor",
                        "Debit Debtor, Debit Output GST, Credit Sales",
                        "Debit Sales, Credit Output GST, Credit Debtor"
                    ],
                    correct: 0,
                    explanation: "Sale with GST: Debtor's account debited with total amount, Sales account credited, Output GST account credited."
                },
                {
                    question: "Which of the following are GST returns? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "GSTR-1",
                        "GSTR-3B",
                        "GSTR-9",
                        "GSTR-4"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are different types of GST returns filed by businesses - GSTR-1 (outward supplies), GSTR-3B (summary return), GSTR-9 (annual return), GSTR-4 (composition scheme)."
                },
                {
                    question: "What is the time limit for claiming Input Tax Credit?",
                    type: "single",
                    options: [
                        "Until filing of annual return",
                        "Until due date of September return following financial year",
                        "No time limit",
                        "Within 30 days of invoice date"
                    ],
                    correct: 1,
                    explanation: "Input Tax Credit can be claimed until the due date of filing return for September of the following financial year or annual return, whichever is earlier."
                },
                {
                    question: "Under composition scheme, businesses:",
                    type: "single",
                    options: [
                        "Cannot collect GST from customers",
                        "Can claim input tax credit",
                        "File detailed returns monthly",
                        "Pay GST at normal rates"
                    ],
                    correct: 0,
                    explanation: "Under composition scheme, businesses cannot collect GST from customers and pay tax at a fixed percentage of turnover without input tax credit."
                }
            ]
        },
        11: {
            title: "Books of Original Entry ‚Äì Cash Book",
            description: "Understand cash book and its types",
            questions: [
                {
                    question: "What is a cash book?",
                    type: "single",
                    options: [
                        "A book recording only cash receipts",
                        "A book recording only cash payments",
                        "A book recording both cash and bank transactions",
                        "A book recording credit transactions"
                    ],
                    correct: 2,
                    explanation: "A cash book records all cash receipts and payments, including bank transactions. It serves as both a journal and ledger for cash and bank accounts."
                },
                {
                    question: "Which types of cash books are commonly used? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Single column cash book",
                        "Double column cash book",
                        "Triple column cash book",
                        "Petty cash book"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are common types of cash books used in different business situations depending on the complexity of transactions."
                },
                {
                    question: "A triple column cash book contains columns for:",
                    type: "single",
                    options: [
                        "Cash, bank and discount",
                        "Cash, capital and expenses",
                        "Bank, revenue and liabilities",
                        "Discount, assets and equity"
                    ],
                    correct: 0,
                    explanation: "A triple column cash book typically has three money columns - cash, bank, and discount (both discount allowed and discount received)."
                },
                {
                    question: "The cash book serves as:",
                    type: "single",
                    options: [
                        "Only a journal",
                        "Only a ledger",
                        "Both journal and ledger",
                        "Neither journal nor ledger"
                    ],
                    correct: 2,
                    explanation: "The cash book serves as both a book of original entry (journal) and a book of final entry (ledger) for cash and bank transactions."
                },
                {
                    question: "Which transactions are recorded in the cash book? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Cash sales",
                        "Cash purchases",
                        "Credit sales",
                        "Bank deposits"
                    ],
                    correct: [0, 1, 3],
                    explanation: "Cash book records only cash and bank transactions. Credit sales are recorded in sales book, not cash book."
                },
                {
                    question: "When cash is deposited into bank, the entry in triple column cash book is:",
                    type: "single",
                    options: [
                        "Bank column debit, cash column credit",
                        "Cash column debit, bank column credit",
                        "Both cash and bank columns debit",
                        "Both cash and bank columns credit"
                    ],
                    correct: 0,
                    explanation: "When cash is deposited into bank: Bank account increases (debit), Cash account decreases (credit)."
                },
                {
                    question: "A contra entry in cash book means:",
                    type: "single",
                    options: [
                        "Entry affecting both cash and bank columns",
                        "Entry with wrong amount",
                        "Entry for credit transactions",
                        "Entry for personal expenses"
                    ],
                    correct: 0,
                    explanation: "A contra entry affects both cash and bank columns, such as cash deposited into bank or cash withdrawn from bank for office use."
                },
                {
                    question: "Which of the following are advantages of maintaining cash book? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Saves time in posting",
                        "Provides daily cash balance",
                        "Reduces errors",
                        "Shows complete financial position"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Cash book saves posting time, provides daily cash balance, and reduces errors. It doesn't show complete financial position."
                },
                {
                    question: "In double column cash book, the two columns are for:",
                    type: "single",
                    options: [
                        "Cash and bank",
                        "Cash and discount",
                        "Bank and discount",
                        "Debit and credit"
                    ],
                    correct: 1,
                    explanation: "A double column cash book has two money columns - one for cash and another for discount (both allowed and received)."
                },
                {
                    question: "When a cheque received is deposited into bank on the same day:",
                    type: "single",
                    options: [
                        "It is recorded in cash column",
                        "It is recorded in bank column",
                        "It is not recorded in cash book",
                        "It is recorded in both columns"
                    ],
                    correct: 1,
                    explanation: "When a cheque is received and deposited on the same day, it is directly recorded in the bank column of the cash book."
                },
                {
                    question: "The balance of cash book shows:",
                    type: "single",
                    options: [
                        "Total assets of business",
                        "Cash and bank balance",
                        "Net profit of business",
                        "Total liabilities"
                    ],
                    correct: 1,
                    explanation: "The cash book balance shows the closing balance of cash in hand and cash at bank (if bank column is maintained)."
                },
                {
                    question: "Which entries require 'C' marking in the LF column?",
                    type: "single",
                    options: [
                        "All cash transactions",
                        "Contra entries",
                        "Credit transactions",
                        "Discount entries"
                    ],
                    correct: 1,
                    explanation: "'C' is marked in the ledger folio column for contra entries to indicate that no separate posting is required to cash account."
                },
                {
                    question: "A petty cash book is used for:",
                    type: "single",
                    options: [
                        "Recording large cash transactions",
                        "Recording small routine payments",
                        "Recording credit purchases",
                        "Recording capital expenditures"
                    ],
                    correct: 1,
                    explanation: "Petty cash book is used for recording small routine payments like stationery, postage, conveyance etc., to avoid cluttering the main cash book."
                },
                {
                    question: "The imprest system of petty cash means:",
                    type: "single",
                    options: [
                        "Fixed amount is maintained and reimbursed periodically",
                        "Unlimited cash is available",
                        "No record is maintained",
                        "Only large payments are recorded"
                    ],
                    correct: 0,
                    explanation: "Under imprest system, a fixed amount (imprest) is given to petty cashier, which is reimbursed periodically to maintain the fixed balance."
                },
                {
                    question: "When discount is allowed to a customer, it is recorded in:",
                    type: "single",
                    options: [
                        "Discount allowed column on debit side",
                        "Discount allowed column on credit side",
                        "Discount received column on debit side",
                        "Discount received column on credit side"
                    ],
                    correct: 0,
                    explanation: "Discount allowed to customers is an expense and is recorded in the discount allowed column on the debit side of cash book."
                }
            ]
        },
        12: {
            title: "Books of Original Entry ‚Äì Special Purpose Subsidiary Books",
            description: "Learn about special purpose subsidiary books",
            questions: [
                {
                    question: "What are special purpose subsidiary books?",
                    type: "single",
                    options: [
                        "Books that replace the general ledger",
                        "Books for specific types of transactions",
                        "Books for final accounts",
                        "Books for tax calculations"
                    ],
                    correct: 1,
                    explanation: "Special purpose subsidiary books are used to record specific types of transactions for better organization and efficiency in large businesses."
                },
                {
                    question: "Which books are considered special purpose subsidiary books? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Sales book",
                        "Purchase book",
                        "Sales return book",
                        "Purchase return book"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are special purpose subsidiary books used for recording specific transaction types to facilitate division of work."
                },
                {
                    question: "The sales book records:",
                    type: "single",
                    options: [
                        "All sales transactions",
                        "Only credit sales of goods",
                        "Only cash sales of goods",
                        "Sales of assets"
                    ],
                    correct: 1,
                    explanation: "The sales book records only credit sales of goods dealt in by the business. Cash sales are recorded in cash book."
                },
                {
                    question: "Which information is recorded in purchase book?",
                    type: "single",
                    options: [
                        "All purchase transactions",
                        "Credit purchases of goods for resale",
                        "Cash purchases of goods",
                        "Purchase of assets"
                    ],
                    correct: 1,
                    explanation: "Purchase book records only credit purchases of goods that are meant for resale. Cash purchases go to cash book."
                },
                {
                    question: "The main advantage of subsidiary books is:",
                    type: "single",
                    options: [
                        "They eliminate the need for ledger",
                        "They facilitate division of work",
                        "They replace financial statements",
                        "They calculate profit automatically"
                    ],
                    correct: 1,
                    explanation: "Subsidiary books facilitate division of work among different clerks, making the accounting process more efficient in large organizations."
                },
                {
                    question: "Which transactions are recorded in sales return book? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Goods returned by customers",
                        "Goods returned to suppliers",
                        "Defective goods returned",
                        "Excess goods returned"
                    ],
                    correct: [0, 2, 3],
                    explanation: "Sales return book records all returns of goods by customers for any reason - defective, excess, or wrong goods supplied."
                },
                {
                    question: "Purchase return book is also known as:",
                    type: "single",
                    options: [
                        "Returns inward book",
                        "Returns outward book",
                        "Debit note book",
                        "Credit note book"
                    ],
                    correct: 1,
                    explanation: "Purchase return book is called returns outward book as it records goods returned outward to suppliers."
                },
                {
                    question: "The journal proper is used for recording:",
                    type: "single",
                    options: [
                        "All routine transactions",
                        "Only cash transactions",
                        "Residual transactions not recorded in other books",
                        "Only credit sales"
                    ],
                    correct: 2,
                    explanation: "Journal proper records residual transactions that cannot be recorded in any other subsidiary book, like opening entries, closing entries, etc."
                },
                {
                    question: "Which of the following are recorded in bills receivable book? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Bills received from customers",
                        "Bills accepted by customers",
                        "Bills drawn on customers",
                        "Bills payable to suppliers"
                    ],
                    correct: [0, 2],
                    explanation: "Bills receivable book records bills received from customers or bills drawn on customers that are accepted by them."
                },
                {
                    question: "The total of sales book is posted to:",
                    type: "single",
                    options: [
                        "Debit of sales account",
                        "Credit of sales account",
                        "Debit of debtors account",
                        "Credit of debtors account"
                    ],
                    correct: 1,
                    explanation: "The total of sales book is posted to the credit side of sales account periodically (usually at the end of the month)."
                },
                {
                    question: "A debit note is prepared when:",
                    type: "single",
                    options: [
                        "Goods are sold to customers",
                        "Goods are returned by customers",
                        "Goods are returned to suppliers",
                        "Cash is received from customers"
                    ],
                    correct: 2,
                    explanation: "A debit note is prepared when goods are returned to suppliers, indicating that the supplier's account should be debited."
                },
                {
                    question: "Which subsidiary book records returns of goods by customers?",
                    type: "single",
                    options: [
                        "Sales book",
                        "Purchase book",
                        "Sales return book",
                        "Purchase return book"
                    ],
                    correct: 2,
                    explanation: "Sales return book (also called returns inward book) records all returns of goods by customers."
                }
            ]
        },
        13: {
            title: "Ledger",
            description: "Understand ledger accounts and their balancing",
            questions: [
                {
                    question: "What is a ledger?",
                    type: "single",
                    options: [
                        "A book of original entry",
                        "A book of final entry",
                        "A source document",
                        "A financial statement"
                    ],
                    correct: 1,
                    explanation: "A ledger is called the book of final entry where all transactions from journal are posted to respective accounts in a classified manner."
                },
                {
                    question: "Which are types of ledger accounts? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Personal accounts",
                        "Real accounts",
                        "Nominal accounts",
                        "Temporary accounts"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Personal, real, and nominal accounts are the three main types of ledger accounts based on traditional classification."
                },
                {
                    question: "The process of transferring journal entries to ledger is called:",
                    type: "single",
                    options: [
                        "Journalizing",
                        "Posting",
                        "Balancing",
                        "Trial balancing"
                    ],
                    correct: 1,
                    explanation: "Posting is the process of transferring journal entries to respective ledger accounts."
                },
                {
                    question: "Which side of a ledger account records increases in assets?",
                    type: "single",
                    options: [
                        "Debit side",
                        "Credit side",
                        "Both sides",
                        "Neither side"
                    ],
                    correct: 0,
                    explanation: "Assets follow the rule: Debit what comes in. Therefore, increases in assets are recorded on the debit side."
                },
                {
                    question: "What information is typically shown in a ledger account? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Date of transaction",
                        "Particulars",
                        "Journal folio",
                        "Amount"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "A complete ledger account shows date, particulars (other account involved), journal folio (reference), and amount on both debit and credit sides."
                },
                {
                    question: "The balance of an account is the difference between:",
                    type: "single",
                    options: [
                        "Total debit and total credit entries",
                        "Total assets and total liabilities",
                        "Opening and closing balance",
                        "Cash and bank balances"
                    ],
                    correct: 0,
                    explanation: "The balance of an account is the difference between the total debit entries and total credit entries in that account."
                },
                {
                    question: "A debit balance in personal account indicates:",
                    type: "single",
                    options: [
                        "The person owes money to business",
                        "The business owes money to person",
                        "It is an expense account",
                        "It is an income account"
                    ],
                    correct: 0,
                    explanation: "Debit balance in personal account means the person is a debtor - they owe money to the business."
                },
                {
                    question: "Which accounts normally have credit balance? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Liabilities",
                        "Capital",
                        "Revenue",
                        "Expenses"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Liabilities, capital, and revenue accounts normally have credit balances. Expenses have debit balances."
                },
                {
                    question: "The process of equalizing debit and credit sides of an account is called:",
                    type: "single",
                    options: [
                        "Posting",
                        "Balancing",
                        "Journalizing",
                        "Classifying"
                    ],
                    correct: 1,
                    explanation: "Balancing is the process of finding the difference between debit and credit sides and showing it as balance."
                },
                {
                    question: "A real account records transactions related to:",
                    type: "single",
                    options: [
                        "Persons and organizations",
                        "Assets and properties",
                        "Expenses and incomes",
                        "Profit and loss"
                    ],
                    correct: 1,
                    explanation: "Real accounts record transactions related to assets, properties, and possessions of the business."
                },
                {
                    question: "Which of the following are rules for nominal accounts? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Debit all expenses and losses",
                        "Credit all incomes and gains",
                        "Debit what comes in",
                        "Credit what goes out"
                    ],
                    correct: [0, 1],
                    explanation: "For nominal accounts: Debit all expenses and losses, Credit all incomes and gains."
                },
                {
                    question: "The format of ledger account is called:",
                    type: "single",
                    options: [
                        "T-account format",
                        "Journal format",
                        "Balance sheet format",
                        "Income statement format"
                    ],
                    correct: 0,
                    explanation: "Ledger accounts are typically prepared in T-account format with debit side on left and credit side on right."
                },
                {
                    question: "When an account shows nil balance, it means:",
                    type: "single",
                    options: [
                        "No transactions occurred",
                        "Total debits equal total credits",
                        "Account is closed",
                        "Account is not required"
                    ],
                    correct: 1,
                    explanation: "Nil balance means total debit amount equals total credit amount in that account."
                },
                {
                    question: "The ledger is called the 'King of Books' because:",
                    type: "single",
                    options: [
                        "It contains all financial information",
                        "It is the largest book",
                        "It is used by kings",
                        "It is the most expensive book"
                    ],
                    correct: 0,
                    explanation: "Ledger is called the 'King of Books' as it contains all accounts and provides complete financial information for preparing financial statements."
                }
            ]
        },
        14: {
            title: "Trial Balance and Errors",
            description: "Learn about trial balance and error detection",
            questions: [
                {
                    question: "What is the main purpose of a trial balance?",
                    type: "single",
                    options: [
                        "To detect all accounting errors",
                        "To check arithmetic accuracy of ledger accounts",
                        "To prepare financial statements",
                        "To calculate profit"
                    ],
                    correct: 1,
                    explanation: "The main purpose of a trial balance is to check the arithmetic accuracy of ledger accounts by ensuring total debits equal total credits."
                },
                {
                    question: "Which errors are not revealed by a trial balance? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Error of omission",
                        "Error of principle",
                        "Compensating error",
                        "Error of commission"
                    ],
                    correct: [0, 1, 2],
                    explanation: "Errors of omission, principle, and compensating errors may not be detected by a trial balance as they don't affect the equality of debits and credits."
                },
                {
                    question: "If the total of debit balances equals total of credit balances in trial balance, it indicates:",
                    type: "single",
                    options: [
                        "No errors in accounting records",
                        "Arithmetic accuracy is proved",
                        "Financial statements are correct",
                        "All transactions are properly recorded"
                    ],
                    correct: 1,
                    explanation: "It only proves arithmetic accuracy, but there could still be other types of errors in the accounting records."
                },
                {
                    question: "Which of the following errors affect the trial balance? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Wrong totaling of ledger accounts",
                        "Posting to wrong side of account",
                        "Omission of posting an entry",
                        "Wrong amount in journal"
                    ],
                    correct: [0, 1, 3],
                    explanation: "Wrong totaling, wrong side posting, and wrong amount affect trial balance equality. Omission of posting may not affect if both aspects are omitted."
                },
                {
                    question: "An error of principle occurs when:",
                    type: "single",
                    options: [
                        "A transaction is completely omitted",
                        "Accounting principles are violated",
                        "Wrong amount is recorded",
                        "Posting is done to wrong account"
                    ],
                    correct: 1,
                    explanation: "Error of principle occurs when accounting principles are violated, like treating revenue expenditure as capital expenditure."
                },
                {
                    question: "A compensating error means:",
                    type: "single",
                    options: [
                        "Two errors cancel each other's effect",
                        "Error in compensation calculation",
                        "Error in salary payment",
                        "Error that cannot be corrected"
                    ],
                    correct: 0,
                    explanation: "Compensating errors occur when two or more errors cancel each other's effect, so trial balance still agrees."
                },
                {
                    question: "Which methods can be used to prepare trial balance? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Total method",
                        "Balance method",
                        "Compound method",
                        "Simple method"
                    ],
                    correct: [0, 1],
                    explanation: "Trial balance can be prepared using total method (showing totals) or balance method (showing balances)."
                },
                {
                    question: "The suspense account is used when:",
                    type: "single",
                    options: [
                        "Trial balance does not agree",
                        "All errors are detected",
                        "Financial statements are prepared",
                        "Ledger is balanced"
                    ],
                    correct: 0,
                    explanation: "Suspense account is opened when trial balance doesn't agree, to temporarily make it balance until errors are located."
                },
                {
                    question: "An error of complete omission occurs when:",
                    type: "single",
                    options: [
                        "Transaction is recorded in wrong account",
                        "Transaction is not recorded at all",
                        "Wrong amount is recorded",
                        "Transaction is partially recorded"
                    ],
                    correct: 1,
                    explanation: "Error of complete omission occurs when a transaction is completely omitted from the books of accounts."
                },
                {
                    question: "Which of the following are one-sided errors? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Cast error in sales book",
                        "Posting to wrong side of account",
                        "Wrong balancing of account",
                        "Omission of posting one aspect"
                    ],
                    correct: [0, 1, 2, 3],
                    explanation: "All these are one-sided errors that affect only one side of accounting and cause trial balance disagreement."
                },
                {
                    question: "The rectification entry for undercasting of sales book is:",
                    type: "single",
                    options: [
                        "Debit Sales, Credit Suspense",
                        "Debit Suspense, Credit Sales",
                        "Debit Customer, Credit Sales",
                        "Debit Sales, Credit Customer"
                    ],
                    correct: 1,
                    explanation: "Undercasting of sales book means sales are under-recorded. Rectify by debiting suspense and crediting sales."
                },
                {
                    question: "When goods purchased on credit are recorded in purchase book as ‚Çπ5,000 instead of ‚Çπ500, the error is:",
                    type: "single",
                    options: [
                        "Error of principle",
                        "Error of omission",
                        "Error of commission",
                        "Compensating error"
                    ],
                    correct: 2,
                    explanation: "This is an error of commission - wrong recording of amount in books of original entry."
                },
                {
                    question: "The trial balance is prepared:",
                    type: "single",
                    options: [
                        "Before preparing journal",
                        "After preparing financial statements",
                        "After posting to ledger but before financial statements",
                        "At the beginning of accounting period"
                    ],
                    correct: 2,
                    explanation: "Trial balance is prepared after posting to ledger but before preparing final financial statements."
                },
                {
                    question: "Which errors require rectification through journal entries? (Select all that apply)",
                    type: "multiple",
                    options: [
                        "Errors affecting trial balance",
                        "Errors not affecting trial balance",
                        "One-sided errors",
                        "Two-sided errors"
                    ],
                    correct: [1, 3],
                    explanation: "Errors not affecting trial balance and two-sided errors require rectification through journal entries."
                },
                {
                    question: "If salary paid ‚Çπ2,000 is debited to rent account, it is:",
                    type: "single",
                    options: [
                        "Error of principle",
                        "Error of omission",
                        "Error of commission",
                        "Compensating error"
                    ],
                    correct: 2,
                    explanation: "This is an error of commission - posting to wrong account of the same class (both nominal accounts)."
                },
                {
                    question: "The fundamental accounting equation forms the basis for:",
                    type: "single",
                    options: [
                        "Journal entries only",
                        "Trial balance only",
                        "Both journal entries and trial balance",
                        "Financial statements only"
                    ],
                    correct: 2,
                    explanation: "The accounting equation (Assets = Liabilities + Capital) forms the basis for both journal entries and trial balance."
                }
            ]
        },
    };

    // üëÜ END OF QUESTIONS - Everything below this handles the quiz logic

    // ========================================
    // üéÆ QUIZ STATE MANAGEMENT
    // ========================================
        let currentQuiz = {
        chapters: [],
        allQuestions: [],
        currentQuestion: 0,
        score: 0,
        userAnswers: [],
        skippedQuestions: [],
        startTime: null,
        questionTimings: [],    // üÜï Track time per question
        hintsUsed: [],          // üÜï Track hints per question
        questionStartTime: null // üÜï When current question started
    };
    
    let quizStartTime = null;

    // ========================================
    // üé® DOM ELEMENTS
    // ========================================
    const chapterCards = document.querySelectorAll('.chapter-card');
    const startQuizBtn = document.getElementById('startQuizBtn');
    const randomQuizBtn = document.getElementById('randomQuizBtn');
    const quizCard = document.getElementById('quizCard');
    const chapterCard = document.getElementById('chapterCard');
    const resultsCard = document.getElementById('resultsCard');
    const quizChapterTitle = document.getElementById('quizChapterTitle');
    const quizChapterDescription = document.getElementById('quizChapterDescription');
    const questionContainer = document.getElementById('questionContainer');
    const progressText = document.getElementById('progressText');
    const progressBar = document.getElementById('progressBar');
    const submitAnswerBtn = document.getElementById('submitAnswerBtn');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const skipBtn = document.getElementById('skipBtn');
    const retakeQuizBtn = document.getElementById('retakeQuizBtn');
    const newQuizBtn = document.getElementById('newQuizBtn');
    const reviewAnswersBtn = document.getElementById('reviewAnswersBtn');

    // Review Answers - build review list dynamically when clicked
    if (reviewAnswersBtn) {
        reviewAnswersBtn.addEventListener('click', () => {
            // Toggle existing review list
            const existing = resultsCard.querySelector('.review-list');
            if (existing) {
                existing.classList.toggle('visible');
                existing.scrollIntoView({ behavior: 'smooth' });
                return;
            }

            const list = document.createElement('div');
            list.className = 'review-list';

            const questions = currentQuiz.allQuestions || [];
            const answers = currentQuiz.userAnswers || [];

            questions.forEach((q, idx) => {
                const item = document.createElement('div');
                item.className = 'review-item';

                const userAns = answers[idx];
                let isCorrect = false;
                if (q.type === 'single') {
                    isCorrect = (userAns === q.correct);
                } else if (q.type === 'multiple') {
                    const ua = Array.isArray(userAns) ? [...userAns].sort() : [];
                    const ca = Array.isArray(q.correct) ? [...q.correct].sort() : [];
                    isCorrect = JSON.stringify(ua) === JSON.stringify(ca);
                }

                if (isCorrect) item.classList.add('correct'); else item.classList.add('wrong');

                const qDiv = document.createElement('div');
                qDiv.className = 'review-question';
                qDiv.textContent = `${idx + 1}. ${q.question}`;
                item.appendChild(qDiv);

                const ansDiv = document.createElement('div');
                ansDiv.className = 'review-answer';

                (q.options || []).forEach((opt, i) => {
                    const row = document.createElement('div');
                    row.className = 'review-answer-row';
                    if (q.type === 'single') {
                        if (i === q.correct) row.classList.add('correct-answer');
                        if (i === userAns) row.classList.add('user-answer');
                    } else if (q.type === 'multiple') {
                        // Ensure userAns is always an array
                        const userAnsArr = Array.isArray(userAns) ? userAns : [];
                        if ((q.correct || []).includes(i)) row.classList.add('correct-answer');
                        if (userAnsArr.includes(i)) row.classList.add('user-answer');
                    }
                    row.textContent = opt;
                    ansDiv.appendChild(row);
                });

                item.appendChild(ansDiv);
                list.appendChild(item);
            });

            resultsCard.appendChild(list);
            list.scrollIntoView({ behavior: 'smooth' });
        });
    }

    // ========================================
    // üìù CHAPTER SELECTION
    // ========================================
    chapterCards.forEach(card => {
    card.addEventListener('click', () => {
        card.classList.toggle('selected');
        
        const selectedChapters = Array.from(document.querySelectorAll('.chapter-card.selected'))
        .map(card => card.dataset.chapter);
        
        currentQuiz.chapters = selectedChapters;
        startQuizBtn.disabled = selectedChapters.length === 0;
    });
    });

    // ========================================
    // üöÄ START QUIZ
    // ========================================
    startQuizBtn.addEventListener('click', async () => {
    if (!currentQuiz.chapters || currentQuiz.chapters.length === 0) return;
    
    await loadChapterQuiz(currentQuiz.chapters);
    chapterCard.classList.remove('active');
    quizCard.classList.add('active');
    updateStepper(2);
    });

    // ========================================
    // üé≤ RANDOM QUIZ
    // ========================================
    randomQuizBtn.addEventListener('click', async () => {
    const availableChapters = Object.keys(chapterQuestions);
    const numChapters = Math.min(3, Math.max(2, Math.floor(Math.random() * 3) + 2));
    
    const selectedChapters = [];
    const tempChapters = [...availableChapters];
    
    for (let i = 0; i < numChapters; i++) {
        const randomIndex = Math.floor(Math.random() * tempChapters.length);
        selectedChapters.push(tempChapters.splice(randomIndex, 1)[0]);
    }
    
    // Update UI
    chapterCards.forEach(c => c.classList.remove('selected'));
    selectedChapters.forEach(chapterId => {
        const card = document.querySelector(`[data-chapter="${chapterId}"]`);
        if (card) card.classList.add('selected');
    });
    
    currentQuiz.chapters = selectedChapters;
    startQuizBtn.disabled = false;
    
    await loadChapterQuiz(selectedChapters);
    chapterCard.classList.remove('active');
    quizCard.classList.add('active');
    updateStepper(2);
    });

    // ========================================
    // üîÑ LOAD QUIZ
    // ========================================
    async function loadChapterQuiz(chapterIds) {
    console.log('üìö Loading quiz for chapters:', chapterIds);
    
    // Combine questions from all selected chapters
    const allQuestions = [];
    chapterIds.forEach(chapterId => {
        const chapter = chapterQuestions[chapterId];
        if (chapter) {
        chapter.questions.forEach(q => {
            allQuestions.push({
            ...q,
            sourceChapter: chapterId,
            sourceChapterTitle: chapter.title
            });
        });
        }
    });
    
    // Shuffle questions
    currentQuiz.allQuestions = shuffleArray(allQuestions);
    currentQuiz.currentQuestion = 0;
    currentQuiz.score = 0;
    currentQuiz.userAnswers = [];
    currentQuiz.skippedQuestions = [];
    currentQuiz.questionTimings = [];  // üÜï Initialize
    currentQuiz.hintsUsed = [];        // üÜï Initialize
    currentQuiz.startTime = new Date();
    currentQuiz.questionStartTime = null; // üÜï Initialize
    quizStartTime = Date.now();
    
    // üî• Load previous attempt
    try {
        const previousAttempt = await loadPreviousQuizAttempt(chapterIds);
        if (previousAttempt) {
        console.log('üìñ Previous best:', previousAttempt.score, '/', previousAttempt.totalQuestions);
        showToast(`Previous best: ${previousAttempt.score}/${previousAttempt.totalQuestions} (${previousAttempt.percentage}%)`, 'info');
        }
    } catch (error) {
        console.error('Error loading previous attempt:', error);
    }

    // Update quiz title
    if (chapterIds.length === 1) {
        const chapter = chapterQuestions[chapterIds[0]];
        quizChapterTitle.textContent = `Chapter ${chapterIds[0]}: ${chapter.title}`;
        quizChapterDescription.textContent = chapter.description;
    } else {
        quizChapterTitle.textContent = `${chapterIds.length} Chapters Combined Quiz`;
        quizChapterDescription.textContent = `Questions from chapters: ${chapterIds.join(', ')}`;
    }

    loadQuestion();
    }

    // ========================================
    // ‚ùì LOAD QUESTION
    // ========================================
    function loadQuestion() {
    // üÜï Start timing this question
    currentQuiz.questionStartTime = Date.now();

    if (!currentQuiz.allQuestions || currentQuiz.allQuestions.length === 0) {
        showResults();
        return;
    }

    const question = currentQuiz.allQuestions[currentQuiz.currentQuestion];
    
    if (!question) {
        showResults();
        return;
    }

    const progress = ((currentQuiz.currentQuestion + 1) / currentQuiz.allQuestions.length) * 100;
    progressBar.style.width = `${progress}%`;
    progressText.textContent = `${currentQuiz.currentQuestion + 1} / ${currentQuiz.allQuestions.length}`;

    const isMultiple = question.type === 'multiple';
    const questionTypeHtml = isMultiple ? 
        '<span class="question-type-badge">Multiple Choice - Select All That Apply</span>' : '';

    questionContainer.innerHTML = `
        <div class="question-header">
        <div style="display: flex; align-items: center;">
            <div class="question-badge">${isMultiple ? 'Multiple Selection' : 'Single Choice'}</div>
            ${questionTypeHtml}
            ${question.sourceChapter ? `<span class="question-type-badge">Ch ${question.sourceChapter}</span>` : ''}
        </div>
        <div class="question-number">Question ${currentQuiz.currentQuestion + 1} of ${currentQuiz.allQuestions.length}</div>
        </div>
        
        <div class="question-text">${question.question}</div>

        <div class="options-grid" id="optionsGrid">
        ${question.options.map((option, index) => `
            <div class="option ${isMultiple ? 'multiple-choice' : ''}" data-option="${index}">
            <div class="option-marker"></div>
            <div class="option-text">${option}</div>
            </div>
        `).join('')}
        </div>

        <div class="explanation" id="explanation">
        <div class="explanation-title">Detailed Explanation</div>
        <div class="explanation-text">${question.explanation}</div>
        </div>
    `;

    const options = questionContainer.querySelectorAll('.option');
    
    if (isMultiple) {
        options.forEach(option => {
        option.addEventListener('click', () => {
            const explanation = document.getElementById('explanation');
            if (explanation.classList.contains('show')) return;
            option.classList.toggle('selected');
        });
        });
    } else {
        options.forEach(option => {
        option.addEventListener('click', () => {
            const explanation = document.getElementById('explanation');
            if (explanation.classList.contains('show')) return;
            options.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
        });
        });
    }

    prevBtn.style.display = currentQuiz.currentQuestion > 0 ? 'inline-flex' : 'none';
    nextBtn.style.display = 'none';
    submitAnswerBtn.style.display = 'inline-flex';
    skipBtn.style.display = 'inline-flex';
    document.getElementById('explanation').classList.remove('show');
    }

    // ========================================
    // ‚úÖ SUBMIT ANSWER
    // ========================================
    submitAnswerBtn.addEventListener('click', () => {
    // üÜï Calculate time spent on this question
    const questionTime = Math.floor((Date.now() - (currentQuiz.questionStartTime || Date.now())) / 1000);
    currentQuiz.questionTimings[currentQuiz.currentQuestion] = questionTime;

    const question = currentQuiz.allQuestions[currentQuiz.currentQuestion];
    const isMultiple = question.type === 'multiple';
    
    if (isMultiple) {
        const selectedOptions = document.querySelectorAll('.option.selected');
        if (selectedOptions.length === 0) {
        showToast('Please select at least one answer', 'error');
        return;
        }

        const userAnswers = Array.from(selectedOptions).map(opt => parseInt(opt.dataset.option));
        currentQuiz.userAnswers[currentQuiz.currentQuestion] = userAnswers;

        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
        const isCorrect = correctAnswers.length === userAnswers.length && 
                        correctAnswers.every(ans => userAnswers.includes(ans));

        const options = document.querySelectorAll('.option');
        options.forEach((option, index) => {
        if (correctAnswers.includes(index)) {
            option.classList.add('correct');
        } else if (userAnswers.includes(index) && !correctAnswers.includes(index)) {
            option.classList.add('wrong');
        }
        });

        if (isCorrect) {
        currentQuiz.score++;
        showToast('‚úÖ Correct!', 'success');
        } else {
        showToast('‚ùå Incorrect', 'error');
        }
    } else {
        const selectedOption = document.querySelector('.option.selected');
        if (!selectedOption) {
        showToast('Please select an answer', 'error');
        return;
        }

        const userAnswer = parseInt(selectedOption.dataset.option);
        currentQuiz.userAnswers[currentQuiz.currentQuestion] = userAnswer;

        const options = document.querySelectorAll('.option');
        options.forEach((option, index) => {
        if (index === question.correct) {
            option.classList.add('correct');
        } else if (index === userAnswer && index !== question.correct) {
            option.classList.add('wrong');
        }
        });

        if (userAnswer === question.correct) {
        currentQuiz.score++;
        showToast('‚úÖ Correct!', 'success');
        } else {
        showToast('‚ùå Incorrect', 'error');
        }
    }

    document.getElementById('explanation').classList.add('show');
    submitAnswerBtn.style.display = 'none';
    skipBtn.style.display = 'none';
    nextBtn.style.display = 'inline-flex';
    });

    // ========================================
    // ‚è≠Ô∏è NAVIGATION BUTTONS
    // ========================================
    nextBtn.addEventListener('click', () => {
    if (currentQuiz.currentQuestion < currentQuiz.allQuestions.length - 1) {
        currentQuiz.currentQuestion++;
        loadQuestion();
    } else {
        showResults();
    }
    });

    prevBtn.addEventListener('click', () => {
    if (currentQuiz.currentQuestion > 0) {
        currentQuiz.currentQuestion--;
        loadQuestion();
    }
    });

    skipBtn.addEventListener('click', () => {
    // üÜï Track time even for skipped questions
    const questionTime = Math.floor((Date.now() - (currentQuiz.questionStartTime || Date.now())) / 1000);
    currentQuiz.questionTimings[currentQuiz.currentQuestion] = questionTime;

    currentQuiz.skippedQuestions.push(currentQuiz.currentQuestion);
    currentQuiz.userAnswers[currentQuiz.currentQuestion] = -1;
    // üÜï No hints if skipped
    currentQuiz.hintsUsed[currentQuiz.currentQuestion] = 0;
    
    if (currentQuiz.currentQuestion < currentQuiz.allQuestions.length - 1) {
        currentQuiz.currentQuestion++;
        loadQuestion();
    } else {
        showResults();
    }
    });

    // ========================================
    // üìä SHOW RESULTS & SAVE TO FIREBASE
    // ========================================
    async function showResults() {
    if (!currentQuiz.allQuestions || currentQuiz.allQuestions.length === 0) return;
    
    const totalQuestions = currentQuiz.allQuestions.length;
    const scorePercent = Math.round((currentQuiz.score / totalQuestions) * 100);
    const skippedCount = currentQuiz.skippedQuestions.length;
    const wrongCount = totalQuestions - currentQuiz.score - skippedCount;
    const timeSpent = Math.floor((Date.now() - quizStartTime) / 1000);
    
    // üî• SAVE TO FIREBASE
    try {
    const result = await submitQuizAttempt(
    currentQuiz.chapters,
    currentQuiz.userAnswers,
    currentQuiz.allQuestions,
    currentQuiz.score,
    totalQuestions,
    currentQuiz.skippedQuestions,
    timeSpent,
    currentQuiz.questionTimings,
    currentQuiz.hintsUsed
    );
        
        if (result.success && result.isNewRecord) {
        showToast('üéâ New Best Score Saved!', 'success');
        }
    } catch (error) {
        console.error('Error saving:', error);
    }
    
    // Update UI
    const scoreCircle = document.querySelector('.score-circle-container');
    scoreCircle.style.setProperty('--score-percent', scorePercent);
    document.querySelector('.score-percentage').textContent = `${scorePercent}%`;
    
    const statCards = document.querySelectorAll('.stat-card');
    statCards[0].querySelector('.stat-value').textContent = totalQuestions;
    statCards[1].querySelector('.stat-value').textContent = currentQuiz.score;
    statCards[2].querySelector('.stat-value').textContent = wrongCount;
    statCards[3].querySelector('.stat-value').textContent = skippedCount;
    
    const performanceBadge = document.querySelector('.performance-badge');
    performanceBadge.className = 'performance-badge';
    if (scorePercent >= 90) {
        performanceBadge.classList.add('performance-excellent');
        performanceBadge.textContent = 'üèÜ Excellent!';
    } else if (scorePercent >= 70) {
        performanceBadge.classList.add('performance-good');
        performanceBadge.textContent = 'üëç Good Job!';
    } else if (scorePercent >= 50) {
        performanceBadge.classList.add('performance-average');
        performanceBadge.textContent = 'üí™ Keep Practicing!';
    } else {
        performanceBadge.classList.add('performance-poor');
        performanceBadge.textContent = 'üìö Needs Improvement';
    }

    quizCard.classList.remove('active');
    resultsCard.classList.add('active');
    updateStepper(3);
    }

    // ========================================
    // üîÑ RETAKE & NEW QUIZ
    // ========================================
    retakeQuizBtn.addEventListener('click', async () => {
    await loadChapterQuiz(currentQuiz.chapters);
    resultsCard.classList.remove('active');
    quizCard.classList.add('active');
    updateStepper(2);
    });

    newQuizBtn.addEventListener('click', () => {
    currentQuiz = {
        chapters: [],
        allQuestions: [],
        currentQuestion: 0,
        score: 0,
        userAnswers: [],
        skippedQuestions: [],
        startTime: null
    };
    
    chapterCards.forEach(c => c.classList.remove('selected'));
    startQuizBtn.disabled = true;
    
    resultsCard.classList.remove('active');
    chapterCard.classList.add('active');
    updateStepper(1);
    });

    // ========================================
    // üö™ EXIT MODAL
    // ========================================
    window.showExitConfirmation = () => {
    document.getElementById('exitModal').classList.add('show');
    };

    window.hideExitConfirmation = () => {
    document.getElementById('exitModal').classList.remove('show');
    };

    window.exitQuiz = () => {
    window.hideExitConfirmation();
    chapterCards.forEach(c => c.classList.remove('selected'));
    startQuizBtn.disabled = true;
    quizCard.classList.remove('active');
    resultsCard.classList.remove('active');
    chapterCard.classList.add('active');
    updateStepper(1);
    showToast('Quiz exited', 'info');
    };

    // ========================================
    // üõ†Ô∏è UTILITY FUNCTIONS
    // ========================================
    function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
    }

    function updateStepper(activeStep) {
    const steps = document.querySelectorAll('.step');
    steps.forEach((step, index) => {
        step.classList.remove('active', 'completed');
        if (index + 1 < activeStep) step.classList.add('completed');
        else if (index + 1 === activeStep) step.classList.add('active');
    });
    }

    function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    toast.className = `toast ${type}`;
    
    const icon = toast.querySelector('.toast-icon');
    icon.textContent = type === 'success' ? '‚úì' : type === 'error' ? '‚úï' : '‚Ñπ';
    
    toast.querySelector('.toast-content div:first-child').textContent = 
        type === 'success' ? 'Success!' : type === 'error' ? 'Error!' : 'Info';
    toast.querySelector('.toast-content div:last-child').textContent = message;
    
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ========================================
    // üçî HAMBURGER MENU
    // ========================================
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileNavLinks = document.getElementById('mobileNavLinks');

    hamburger.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    mobileMenu.classList.toggle('active');
    mobileNavLinks.style.display = mobileNavLinks.style.display === 'flex' ? 'none' : 'flex';
    });

    document.querySelectorAll('.mobile-nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        mobileMenu.classList.remove('active');
        mobileNavLinks.style.display = 'none';
    });
    });

    mobileMenu.addEventListener('click', () => {
    hamburger.classList.remove('active');
    mobileMenu.classList.remove('active');
    mobileNavLinks.style.display = 'none';
    });

    console.log('‚úÖ Quiz initialized!');
 </script>
</body>
</html>